!function i(o,a,u){function c(e,t){if(!a[e]){if(!o[e]){var n="function"==typeof require&&require;if(!t&&n)return n(e,!0);if(s)return s(e,!0);throw new Error("Cannot find module '"+e+"'")}var r=a[e]={exports:{}};o[e][0].call(r.exports,function(t){var n=o[e][1][t];return c(n||t)},r,r.exports,i,o,a,u)}return a[e].exports}for(var s="function"==typeof require&&require,t=0;t<u.length;t++)c(u[t]);return c}({1:[function(t,Fu,n){!function(){var z={version:"3.5.17"},o=[].slice,h=function(t){return o.call(t)},x=this.document;function u(t){return t&&(t.ownerDocument||t.document||t).documentElement}function O(t){return t&&(t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView)}if(x)try{h(x.documentElement.childNodes)[0].nodeType}catch(t){h=function(t){for(var n=t.length,e=new Array(n);n--;)e[n]=t[n];return e}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch(t){var n=this.Element.prototype,e=n.setAttribute,r=n.setAttributeNS,i=this.CSSStyleDeclaration.prototype,a=i.setProperty;n.setAttribute=function(t,n){e.call(this,t,n+"")},n.setAttributeNS=function(t,n,e){r.call(this,t,n,e+"")},i.setProperty=function(t,n,e){a.call(this,t,n+"",e)}}function c(t,n){return t<n?-1:n<t?1:n<=t?0:NaN}function s(t){return null===t?NaN:+t}function l(t){return!isNaN(t)}function t(o){return{left:function(t,n,e,r){for(arguments.length<3&&(e=0),arguments.length<4&&(r=t.length);e<r;){var i=e+r>>>1;o(t[i],n)<0?e=i+1:r=i}return e},right:function(t,n,e,r){for(arguments.length<3&&(e=0),arguments.length<4&&(r=t.length);e<r;){var i=e+r>>>1;0<o(t[i],n)?r=i:e=i+1}return e}}}z.ascending=c,z.descending=function(t,n){return n<t?-1:t<n?1:t<=n?0:NaN},z.min=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r<=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&r<e&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r<=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&r<e&&(e=r)}return e},z.max=function(t,n){var e,r,i=-1,o=t.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=t[i])&&r<=r){e=r;break}for(;++i<o;)null!=(r=t[i])&&e<r&&(e=r)}else{for(;++i<o;)if(null!=(r=n.call(t,t[i],i))&&r<=r){e=r;break}for(;++i<o;)null!=(r=n.call(t,t[i],i))&&e<r&&(e=r)}return e},z.extent=function(t,n){var e,r,i,o=-1,a=t.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=t[o])&&r<=r){e=i=r;break}for(;++o<a;)null!=(r=t[o])&&(r<e&&(e=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=n.call(t,t[o],o))&&r<=r){e=i=r;break}for(;++o<a;)null!=(r=n.call(t,t[o],o))&&(r<e&&(e=r),i<r&&(i=r))}return[e,i]},z.sum=function(t,n){var e,r=0,i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)l(e=+t[o])&&(r+=e);else for(;++o<i;)l(e=+n.call(t,t[o],o))&&(r+=e);return r},z.mean=function(t,n){var e,r=0,i=t.length,o=-1,a=i;if(1===arguments.length)for(;++o<i;)l(e=s(t[o]))?r+=e:--a;else for(;++o<i;)l(e=s(n.call(t,t[o],o)))?r+=e:--a;if(a)return r/a},z.quantile=function(t,n){var e=(t.length-1)*n+1,r=Math.floor(e),i=+t[r-1],o=e-r;return o?i+o*(t[r]-i):i},z.median=function(t,n){var e,r=[],i=t.length,o=-1;if(1===arguments.length)for(;++o<i;)l(e=s(t[o]))&&r.push(e);else for(;++o<i;)l(e=s(n.call(t,t[o],o)))&&r.push(e);if(r.length)return z.quantile(r.sort(c),.5)},z.variance=function(t,n){var e,r,i=t.length,o=0,a=0,u=-1,c=0;if(1===arguments.length)for(;++u<i;)l(e=s(t[u]))&&(a+=(r=e-o)*(e-(o+=r/++c)));else for(;++u<i;)l(e=s(n.call(t,t[u],u)))&&(a+=(r=e-o)*(e-(o+=r/++c)));if(1<c)return a/(c-1)},z.deviation=function(){var t=z.variance.apply(this,arguments);return t?Math.sqrt(t):t};var f=t(c);function p(t){return t.length}z.bisectLeft=f.left,z.bisect=z.bisectRight=f.right,z.bisector=function(e){return t(1===e.length?function(t,n){return c(e(t),n)}:e)},z.shuffle=function(t,n,e){(o=arguments.length)<3&&(e=t.length,o<2&&(n=0));for(var r,i,o=e-n;o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},z.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},z.pairs=function(t){for(var n=0,e=t.length-1,r=t[0],i=new Array(e<0?0:e);n<e;)i[n]=[r,r=t[++n]];return i},z.transpose=function(t){if(!(i=t.length))return[];for(var n=-1,e=z.min(t,p),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r},z.zip=function(){return z.transpose(arguments)},z.keys=function(t){var n=[];for(var e in t)n.push(e);return n},z.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},z.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},z.merge=function(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);0<=--i;)for(n=(r=t[i]).length;0<=--n;)e[--a]=r[n];return e};var H=Math.abs;function d(t,n){for(var e in n)Object.defineProperty(t.prototype,e,{value:n[e],enumerable:!1})}function m(){this._=Object.create(null)}z.range=function(t,n,e){if(arguments.length<3&&(e=1,arguments.length<2&&(n=t,t=0)),(n-t)/e==1/0)throw new Error("infinite range");var r,i=[],o=function(t){var n=1;for(;t*n%1;)n*=10;return n}(H(e)),a=-1;if(t*=o,n*=o,(e*=o)<0)for(;(r=t+e*++a)>n;)i.push(r/o);else for(;(r=t+e*++a)<n;)i.push(r/o);return i},z.map=function(t,n){var e=new m;if(t instanceof m)t.forEach(function(t,n){e.set(t,n)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(1===arguments.length)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n.call(t,r=t[i],i),r)}else for(var a in t)e.set(a,t[a]);return e};var g="__proto__",v="\0";function y(t){return(t+="")===g||t[0]===v?v+t:t}function b(t){return(t+="")[0]===v?t.slice(1):t}function w(t){return y(t)in this._}function M(t){return(t=y(t))in this._&&delete this._[t]}function _(){var t=[];for(var n in this._)t.push(b(n));return t}function k(){var t=0;for(var n in this._)++t;return t}function S(){for(var t in this._)return!1;return!0}function C(){this._=Object.create(null)}function D(t){return t}function A(n,e,r){return function(){var t=r.apply(e,arguments);return t===e?n:t}}function E(t,n){if(n in t)return n;n=n.charAt(0).toUpperCase()+n.slice(1);for(var e=0,r=N.length;e<r;++e){var i=N[e]+n;if(i in t)return i}}d(m,{has:w,get:function(t){return this._[y(t)]},set:function(t,n){return this._[y(t)]=n},remove:M,keys:_,values:function(){var t=[];for(var n in this._)t.push(this._[n]);return t},entries:function(){var t=[];for(var n in this._)t.push({key:b(n),value:this._[n]});return t},size:k,empty:S,forEach:function(t){for(var n in this._)t.call(this,b(n),this._[n])}}),z.nest=function(){var f,h,p={},d=[],n=[];function g(e,t,r){if(r>=d.length)return h?h.call(p,t):f?t.sort(f):t;for(var n,i,o,a,u=-1,c=t.length,s=d[r++],l=new m;++u<c;)(a=l.get(n=s(i=t[u])))?a.push(i):l.set(n,[i]);return e?(i=e(),o=function(t,n){i.set(t,g(e,n,r))}):(i={},o=function(t,n){i[t]=g(e,n,r)}),l.forEach(o),i}return p.map=function(t,n){return g(n,t,0)},p.entries=function(t){return function e(t,r){if(r>=d.length)return t;var i=[],o=n[r++];return t.forEach(function(t,n){i.push({key:t,values:e(n,r)})}),o?i.sort(function(t,n){return o(t.key,n.key)}):i}(g(z.map,t,0),0)},p.key=function(t){return d.push(t),p},p.sortKeys=function(t){return n[d.length-1]=t,p},p.sortValues=function(t){return f=t,p},p.rollup=function(t){return h=t,p},p},z.set=function(t){var n=new C;if(t)for(var e=0,r=t.length;e<r;++e)n.add(t[e]);return n},d(C,{has:w,add:function(t){return this._[y(t+="")]=!0,t},remove:M,values:_,size:k,empty:S,forEach:function(t){for(var n in this._)t.call(this,b(n))}}),z.behavior={},z.rebind=function(t,n){for(var e,r=1,i=arguments.length;++r<i;)t[e=arguments[r]]=A(t,n,n[e]);return t};var N=["webkit","ms","moz","Moz","o","O"];function T(){}function L(){}function j(i){var o=[],a=new m;function t(){for(var t,n=o,e=-1,r=n.length;++e<r;)(t=n[e].on)&&t.apply(this,arguments);return i}return t.on=function(t,n){var e,r=a.get(t);return arguments.length<2?r&&r.on:(r&&(r.on=null,o=o.slice(0,e=o.indexOf(r)).concat(o.slice(e+1)),a.remove(t)),n&&o.push(a.set(t,{on:n})),i)},t}function q(){z.event.preventDefault()}function P(){for(var t,n=z.event;t=n.sourceEvent;)n=t;return n}function R(i){for(var o=new L,t=0,n=arguments.length;++t<n;)o[arguments[t]]=j(o);return o.of=function(e,r){return function(t){try{var n=t.sourceEvent=z.event;t.target=i,z.event=t,o[t.type].apply(e,r)}finally{z.event=n}}},o}z.dispatch=function(){for(var t=new L,n=-1,e=arguments.length;++n<e;)t[arguments[n]]=j(t);return t},L.prototype.on=function(t,n){var e=t.indexOf("."),r="";if(0<=e&&(r=t.slice(e+1),t=t.slice(0,e)),t)return arguments.length<2?this[t].on(r):this[t].on(r,n);if(2===arguments.length){if(null==n)for(t in this)this.hasOwnProperty(t)&&this[t].on(r,null);return this}},z.event=null,z.requote=function(t){return t.replace(F,"\\$&")};var F=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(t,n){t.__proto__=n}:function(t,n){for(var e in n)t[e]=n[e]};function I(t){return G(t,Y),t}var U=function(t,n){return n.querySelector(t)},W=function(t,n){return n.querySelectorAll(t)},B=function(t,n){var e=t.matches||t[E(t,"matchesSelector")];return(B=function(t,n){return e.call(t,n)})(t,n)};"function"==typeof Sizzle&&(U=function(t,n){return Sizzle(t,n)[0]||null},W=Sizzle,B=Sizzle.matchesSelector),z.selection=function(){return z.select(x.documentElement)};var Y=z.selection.prototype=[];function $(t){return"function"==typeof t?t:function(){return U(t,this)}}function V(t){return"function"==typeof t?t:function(){return W(t,this)}}Y.select=function(t){var n,e,r,i,o=[];t=$(t);for(var a=-1,u=this.length;++a<u;){o.push(n=[]),n.parentNode=(r=this[a]).parentNode;for(var c=-1,s=r.length;++c<s;)(i=r[c])?(n.push(e=t.call(i,i.__data__,c,a)),e&&"__data__"in i&&(e.__data__=i.__data__)):n.push(null)}return I(o)},Y.selectAll=function(t){var n,e,r=[];t=V(t);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],u=-1,c=a.length;++u<c;)(e=a[u])&&(r.push(n=h(t.call(e,e.__data__,u,i))),n.parentNode=e);return I(r)};var Z="http://www.w3.org/1999/xhtml",X={svg:"http://www.w3.org/2000/svg",xhtml:Z,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function J(n,e){return n=z.ns.qualify(n),null==e?n.local?function(){this.removeAttributeNS(n.space,n.local)}:function(){this.removeAttribute(n)}:"function"==typeof e?n.local?function(){var t=e.apply(this,arguments);null==t?this.removeAttributeNS(n.space,n.local):this.setAttributeNS(n.space,n.local,t)}:function(){var t=e.apply(this,arguments);null==t?this.removeAttribute(n):this.setAttribute(n,t)}:n.local?function(){this.setAttributeNS(n.space,n.local,e)}:function(){this.setAttribute(n,e)}}function K(t){return t.trim().replace(/\s+/g," ")}function Q(t){return new RegExp("(?:^|\\s+)"+z.requote(t)+"(?:\\s+|$)","g")}function tt(t){return(t+"").trim().split(/^|\s+/)}function nt(e,r){var i=(e=tt(e).map(et)).length;return"function"==typeof r?function(){for(var t=-1,n=r.apply(this,arguments);++t<i;)e[t](this,n)}:function(){for(var t=-1;++t<i;)e[t](this,r)}}function et(r){var i=Q(r);return function(t,n){if(e=t.classList)return n?e.add(r):e.remove(r);var e=t.getAttribute("class")||"";n?(i.lastIndex=0,i.test(e)||t.setAttribute("class",K(e+" "+r))):t.setAttribute("class",K(e.replace(i," ")))}}function rt(n,e,r){return null==e?function(){this.style.removeProperty(n)}:"function"==typeof e?function(){var t=e.apply(this,arguments);null==t?this.style.removeProperty(n):this.style.setProperty(n,t,r)}:function(){this.style.setProperty(n,e,r)}}function it(n,e){return null==e?function(){delete this[n]}:"function"==typeof e?function(){var t=e.apply(this,arguments);null==t?delete this[n]:this[n]=t}:function(){this[n]=e}}function ot(e){return"function"==typeof e?e:(e=z.ns.qualify(e)).local?function(){return this.ownerDocument.createElementNS(e.space,e.local)}:function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Z&&t.documentElement.namespaceURI===Z?t.createElement(e):t.createElementNS(n,e)}}function at(){var t=this.parentNode;t&&t.removeChild(this)}function ut(t){return{__data__:t}}function ct(t){return function(){return B(this,t)}}function st(t,n){for(var e=0,r=t.length;e<r;e++)for(var i,o=t[e],a=0,u=o.length;a<u;a++)(i=o[a])&&n(i,a,e);return t}function lt(t){return G(t,ft),t}z.ns={prefix:X,qualify:function(t){var n=t.indexOf(":"),e=t;return 0<=n&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),X.hasOwnProperty(e)?{space:X[e],local:t}:t}},Y.attr=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node();return(t=z.ns.qualify(t)).local?e.getAttributeNS(t.space,t.local):e.getAttribute(t)}for(n in t)this.each(J(n,t[n]));return this}return this.each(J(t,n))},Y.classed=function(t,n){if(arguments.length<2){if("string"==typeof t){var e=this.node(),r=(t=tt(t)).length,i=-1;if(n=e.classList){for(;++i<r;)if(!n.contains(t[i]))return!1}else for(n=e.getAttribute("class");++i<r;)if(!Q(t[i]).test(n))return!1;return!0}for(n in t)this.each(nt(n,t[n]));return this}return this.each(nt(t,n))},Y.style=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){for(e in r<2&&(n=""),t)this.each(rt(e,t[e],n));return this}if(r<2){var i=this.node();return O(i).getComputedStyle(i,null).getPropertyValue(t)}e=""}return this.each(rt(t,n,e))},Y.property=function(t,n){if(arguments.length<2){if("string"==typeof t)return this.node()[t];for(n in t)this.each(it(n,t[n]));return this}return this.each(it(t,n))},Y.text=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.textContent=null==t?"":t}:null==n?function(){this.textContent=""}:function(){this.textContent=n}):this.node().textContent},Y.html=function(n){return arguments.length?this.each("function"==typeof n?function(){var t=n.apply(this,arguments);this.innerHTML=null==t?"":t}:null==n?function(){this.innerHTML=""}:function(){this.innerHTML=n}):this.node().innerHTML},Y.append=function(t){return t=ot(t),this.select(function(){return this.appendChild(t.apply(this,arguments))})},Y.insert=function(t,n){return t=ot(t),n=$(n),this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})},Y.remove=function(){return this.each(at)},Y.data=function(t,d){var n,e,r=-1,i=this.length;if(!arguments.length){for(t=new Array(i=(n=this[0]).length);++r<i;)(e=n[r])&&(t[r]=e.__data__);return t}function o(t,n){var e,r,i,o=t.length,a=n.length,u=Math.min(o,a),c=new Array(a),s=new Array(a),l=new Array(o);if(d){var f,h=new m,p=new Array(o);for(e=-1;++e<o;)(r=t[e])&&(h.has(f=d.call(r,r.__data__,e))?l[e]=r:h.set(f,r),p[e]=f);for(e=-1;++e<a;)(r=h.get(f=d.call(n,i=n[e],e)))?!0!==r&&((c[e]=r).__data__=i):s[e]=ut(i),h.set(f,!0);for(e=-1;++e<o;)e in p&&!0!==h.get(p[e])&&(l[e]=t[e])}else{for(e=-1;++e<u;)r=t[e],i=n[e],r?(r.__data__=i,c[e]=r):s[e]=ut(i);for(;e<a;++e)s[e]=ut(n[e]);for(;e<o;++e)l[e]=t[e]}s.update=c,s.parentNode=c.parentNode=l.parentNode=t.parentNode,g.push(s),v.push(c),y.push(l)}var g=lt([]),v=I([]),y=I([]);if("function"==typeof t)for(;++r<i;)o(n=this[r],t.call(n,n.parentNode.__data__,r));else for(;++r<i;)o(n=this[r],t);return v.enter=function(){return g},v.exit=function(){return y},v},Y.datum=function(t){return arguments.length?this.property("__data__",t):this.property("__data__")},Y.filter=function(t){var n,e,r,i=[];"function"!=typeof t&&(t=ct(t));for(var o=0,a=this.length;o<a;o++){i.push(n=[]),n.parentNode=(e=this[o]).parentNode;for(var u=0,c=e.length;u<c;u++)(r=e[u])&&t.call(r,r.__data__,u,o)&&n.push(r)}return I(i)},Y.order=function(){for(var t=-1,n=this.length;++t<n;)for(var e,r=this[t],i=r.length-1,o=r[i];0<=--i;)(e=r[i])&&(o&&o!==e.nextSibling&&o.parentNode.insertBefore(e,o),o=e);return this},Y.sort=function(t){t=function(e){arguments.length||(e=c);return function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}.apply(this,arguments);for(var n=-1,e=this.length;++n<e;)this[n].sort(t);return this.order()},Y.each=function(r){return st(this,function(t,n,e){r.call(t,t.__data__,n,e)})},Y.call=function(t){var n=h(arguments);return t.apply(n[0]=this,n),this},Y.empty=function(){return!this.node()},Y.node=function(){for(var t=0,n=this.length;t<n;t++)for(var e=this[t],r=0,i=e.length;r<i;r++){var o=e[r];if(o)return o}return null},Y.size=function(){var t=0;return st(this,function(){++t}),t};var ft=[];function ht(i,n,e){var r="__on"+i,t=i.indexOf("."),o=dt;0<t&&(i=i.slice(0,t));var a=pt.get(i);function u(){var t=this[r];t&&(this.removeEventListener(i,t,t.$),delete this[r])}return a&&(i=a,o=gt),t?n?function(){var t=o(n,h(arguments));u.call(this),this.addEventListener(i,this[r]=t,t.$=e),t._=n}:u:n?T:function(){var t,n=new RegExp("^__on([^.]+)"+z.requote(i)+"$");for(var e in this)if(t=e.match(n)){var r=this[e];this.removeEventListener(t[1],r,r.$),delete this[e]}}}z.selection.enter=lt,(z.selection.enter.prototype=ft).append=Y.append,ft.empty=Y.empty,ft.node=Y.node,ft.call=Y.call,ft.size=Y.size,ft.select=function(t){for(var n,e,r,i,o,a=[],u=-1,c=this.length;++u<c;){r=(i=this[u]).update,a.push(n=[]),n.parentNode=i.parentNode;for(var s=-1,l=i.length;++s<l;)(o=i[s])?(n.push(r[s]=e=t.call(i.parentNode,o.__data__,s,u)),e.__data__=o.__data__):n.push(null)}return I(a)},ft.insert=function(t,n){var a,u,c;return arguments.length<2&&(a=this,n=function(t,n,e){var r,i=a[e].update,o=i.length;for(e!=c&&(c=e,u=0),u<=n&&(u=n+1);!(r=i[u])&&++u<o;);return r}),Y.insert.call(this,t,n)},z.select=function(t){var n;return"string"==typeof t?(n=[U(t,x)]).parentNode=x.documentElement:(n=[t]).parentNode=u(t),I([n])},z.selectAll=function(t){var n;return"string"==typeof t?(n=h(W(t,x))).parentNode=x.documentElement:(n=h(t)).parentNode=null,I([n])},Y.on=function(t,n,e){var r=arguments.length;if(r<3){if("string"!=typeof t){for(e in r<2&&(n=!1),t)this.each(ht(e,t[e],n));return this}if(r<2)return(r=this.node()["__on"+t])&&r._;e=!1}return this.each(ht(t,n,e))};var pt=z.map({mouseenter:"mouseover",mouseleave:"mouseout"});function dt(e,r){return function(t){var n=z.event;z.event=t,r[0]=this.__data__;try{e.apply(this,r)}finally{z.event=n}}}function gt(t,n){var e=dt(t,n);return function(t){var n=t.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||e.call(this,t)}}x&&pt.forEach(function(t){"on"+t in x&&pt.remove(t)});var vt,yt=0;function mt(t){var e=".dragsuppress-"+ ++yt,r="click"+e,i=z.select(O(t)).on("touchmove"+e,q).on("dragstart"+e,q).on("selectstart"+e,q);if(null==vt&&(vt=!("onselectstart"in t)&&E(t.style,"userSelect")),vt){var o=u(t).style,a=o[vt];o[vt]="none"}return function(t){if(i.on(e,null),vt&&(o[vt]=a),t){var n=function(){i.on(r,null)};i.on(r,function(){q(),n()},!0),setTimeout(n,0)}}}z.mouse=function(t){return bt(t,P())};var xt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function bt(t,n){n.changedTouches&&(n=n.changedTouches[0]);var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();if(xt<0){var i=O(t);if(i.scrollX||i.scrollY){var o=(e=z.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();xt=!(o.f||o.e),e.remove()}}return xt?(r.x=n.pageX,r.y=n.pageY):(r.x=n.clientX,r.y=n.clientY),[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var a=t.getBoundingClientRect();return[n.clientX-a.left-t.clientLeft,n.clientY-a.top-t.clientTop]}function wt(){return z.event.changedTouches[0].identifier}z.touch=function(t,n,e){if(arguments.length<3&&(e=n,n=P().changedTouches),n)for(var r,i=0,o=n.length;i<o;++i)if((r=n[i]).identifier===e)return bt(t,r)},z.behavior.drag=function(){var g=R(e,"drag","dragstart","dragend"),v=null,t=r(T,z.mouse,O,"mousemove","mouseup"),n=r(wt,z.touch,D,"touchmove","touchend");function e(){this.on("mousedown.drag",t).on("touchstart.drag",n)}function r(l,f,h,p,d){return function(){var r,t=z.event.target.correspondingElement||z.event.target,i=this.parentNode,o=g.of(this,arguments),a=0,u=l(),n=".drag"+(null==u?"":"-"+u),e=z.select(h(t)).on(p+n,function(){var t,n,e=f(i,u);if(!e)return;t=e[0]-s[0],n=e[1]-s[1],a|=t|n,o({type:"drag",x:(s=e)[0]+r[0],y:e[1]+r[1],dx:t,dy:n})}).on(d+n,function(){if(!f(i,u))return;e.on(p+n,null).on(d+n,null),c(a),o({type:"dragend"})}),c=mt(t),s=f(i,u);r=v?[(r=v.apply(this,arguments)).x-s[0],r.y-s[1]]:[0,0],o({type:"dragstart"})}}return e.origin=function(t){return arguments.length?(v=t,e):v},z.rebind(e,g,"on")},z.touches=function(e,t){return arguments.length<2&&(t=P().touches),t?h(t).map(function(t){var n=bt(e,t);return n.identifier=t.identifier,n}):[]};var Mt=1e-6,_t=Mt*Mt,kt=Math.PI,St=2*kt,Ct=St-Mt,At=kt/2,Et=kt/180,Nt=180/kt;function Tt(t){return 0<t?1:t<0?-1:0}function Lt(t,n,e){return(n[0]-t[0])*(e[1]-t[1])-(n[1]-t[1])*(e[0]-t[0])}function jt(t){return 1<t?0:t<-1?kt:Math.acos(t)}function Ht(t){return 1<t?At:t<-1?-At:Math.asin(t)}function zt(t){return((t=Math.exp(t))+1/t)/2}function Ot(t){return(t=Math.sin(t/2))*t}var Dt=Math.SQRT2;z.interpolateZoom=function(t,n){var e,a,u=t[0],c=t[1],s=t[2],r=n[0],i=n[1],o=n[2],l=r-u,f=i-c,h=l*l+f*f;if(h<_t)a=Math.log(o/s)/Dt,e=function(t){return[u+t*l,c+t*f,s*Math.exp(Dt*t*a)]};else{var p=Math.sqrt(h),d=(o*o-s*s+4*h)/(2*s*2*p),g=(o*o-s*s-4*h)/(2*o*2*p),v=Math.log(Math.sqrt(d*d+1)-d),y=Math.log(Math.sqrt(g*g+1)-g);a=(y-v)/Dt,e=function(t){var n,e,r=t*a,i=zt(v),o=s/(2*p)*(i*(e=Dt*r+v,((e=Math.exp(2*e))-1)/(e+1))-(n=v,((n=Math.exp(n))-1/n)/2));return[u+o*l,c+o*f,s*i/zt(Dt*r+v)]}}return e.duration=1e3*a,e},z.behavior.zoom=function(){var n,c,e,r,b,i,o,a,u,w={x:0,y:0,k:1},s=[960,500],l=Rt,f=250,h=0,M="mousedown.zoom",p="mousemove.zoom",d="mouseup.zoom",_="touchstart.zoom",k=R(g,"zoomstart","zoom","zoomend");function g(t){t.on(M,j).on(Pt+".zoom",y).on("dblclick.zoom",m).on(_,H)}function S(t){return[(t[0]-w.x)/w.k,(t[1]-w.y)/w.k]}function C(t){w.k=Math.max(l[0],Math.min(l[1],t))}function A(t,n){var e;n=[(e=n)[0]*w.k+w.x,e[1]*w.k+w.y],w.x+=t[0]-n[0],w.y+=t[1]-n[1]}function E(t,n,e,r){t.__chart__={x:w.x,y:w.y,k:w.k},C(Math.pow(2,r)),A(c=n,e),t=z.select(t),0<f&&(t=t.transition().duration(f)),t.call(g.event)}function v(){o&&o.domain(i.range().map(function(t){return(t-w.x)/w.k}).map(i.invert)),u&&u.domain(a.range().map(function(t){return(t-w.y)/w.k}).map(a.invert))}function N(t){h++||t({type:"zoomstart"})}function T(t){v(),t({type:"zoom",scale:w.k,translate:[w.x,w.y]})}function L(t){--h||(t({type:"zoomend"}),c=null)}function j(){var t=this,n=k.of(t,arguments),e=0,r=z.select(O(t)).on(p,function(){e=1,A(z.mouse(t),i),T(n)}).on(d,function(){r.on(p,null).on(d,null),o(e),L(n)}),i=S(z.mouse(t)),o=mt(t);su.call(t),N(n)}function H(){var s,l=this,f=k.of(l,arguments),h={},p=0,i=".zoom-"+z.event.changedTouches[0].identifier,d="touchmove"+i,g="touchend"+i,v=[],o=z.select(l),a=mt(l);function y(){var t=z.touches(l);return s=w.k,t.forEach(function(t){t.identifier in h&&(h[t.identifier]=S(t))}),t}function t(){var t=z.event.target;z.select(t).on(d,m).on(g,x),v.push(t);for(var n=z.event.changedTouches,e=0,r=n.length;e<r;++e)h[n[e].identifier]=null;var i=y(),o=Date.now();if(1===i.length){if(o-b<500){var a=i[0];E(l,a,h[a.identifier],Math.floor(Math.log(w.k)/Math.LN2)+1),q()}b=o}else if(1<i.length){a=i[0];var u=i[1],c=a[0]-u[0],s=a[1]-u[1];p=c*c+s*s}}function m(){var t,n,e,r,i=z.touches(l);su.call(l);for(var o=0,a=i.length;o<a;++o,r=null)if(e=i[o],r=h[e.identifier]){if(n)break;t=e,n=r}if(r){var u=(u=e[0]-t[0])*u+(u=e[1]-t[1])*u,c=p&&Math.sqrt(u/p);t=[(t[0]+e[0])/2,(t[1]+e[1])/2],n=[(n[0]+r[0])/2,(n[1]+r[1])/2],C(c*s)}b=null,A(t,n),T(f)}function x(){if(z.event.touches.length){for(var t=z.event.changedTouches,n=0,e=t.length;n<e;++n)delete h[t[n].identifier];for(var r in h)return void y()}z.selectAll(v).on(i,null),o.on(M,j).on(_,H),a(),L(f)}t(),N(f),o.on(M,null).on(_,t)}function y(){var t=k.of(this,arguments);r?clearTimeout(r):(su.call(this),n=S(c=e||z.mouse(this)),N(t)),r=setTimeout(function(){r=null,L(t)},50),q(),C(Math.pow(2,.002*qt())*w.k),A(c,n),T(t)}function m(){var t=z.mouse(this),n=Math.log(w.k)/Math.LN2;E(this,t,S(t),z.event.shiftKey?Math.ceil(n)-1:Math.floor(n)+1)}return Pt||(Pt="onwheel"in x?(qt=function(){return-z.event.deltaY*(z.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(qt=function(){return z.event.wheelDelta},"mousewheel"):(qt=function(){return-z.event.detail},"MozMousePixelScroll")),g.event=function(t){t.each(function(){var u=k.of(this,arguments),n=w;hu?z.select(this).transition().each("start.zoom",function(){w=this.__chart__||{x:0,y:0,k:1},N(u)}).tween("zoom:zoom",function(){var r=s[0],t=s[1],i=c?c[0]:r/2,o=c?c[1]:t/2,a=z.interpolateZoom([(i-w.x)/w.k,(o-w.y)/w.k,r/w.k],[(i-n.x)/n.k,(o-n.y)/n.k,r/n.k]);return function(t){var n=a(t),e=r/n[2];this.__chart__=w={x:i-n[0]*e,y:o-n[1]*e,k:e},T(u)}}).each("interrupt.zoom",function(){L(u)}).each("end.zoom",function(){L(u)}):(this.__chart__=w,N(u),T(u),L(u))})},g.translate=function(t){return arguments.length?(w={x:+t[0],y:+t[1],k:w.k},v(),g):[w.x,w.y]},g.scale=function(t){return arguments.length?(w={x:w.x,y:w.y,k:null},C(+t),v(),g):w.k},g.scaleExtent=function(t){return arguments.length?(l=null==t?Rt:[+t[0],+t[1]],g):l},g.center=function(t){return arguments.length?(e=t&&[+t[0],+t[1]],g):e},g.size=function(t){return arguments.length?(s=t&&[+t[0],+t[1]],g):s},g.duration=function(t){return arguments.length?(f=+t,g):f},g.x=function(t){return arguments.length?(i=(o=t).copy(),w={x:0,y:0,k:1},g):o},g.y=function(t){return arguments.length?(a=(u=t).copy(),w={x:0,y:0,k:1},g):u},z.rebind(g,k,"on")};var qt,Pt,Rt=[0,1/0];function Ft(){}function Gt(t,n,e){return this instanceof Gt?(this.h=+t,this.s=+n,void(this.l=+e)):arguments.length<2?t instanceof Gt?new Gt(t.h,t.s,t.l):ln(""+t,fn,Gt):new Gt(t,n,e)}(z.color=Ft).prototype.toString=function(){return this.rgb()+""};var It=(z.hsl=Gt).prototype=new Ft;function Ut(t,n,e){var r,i;function o(t){return Math.round(255*(360<(n=t)?n-=360:n<0&&(n+=360),n<60?r+(i-r)*n/60:n<180?i:n<240?r+(i-r)*(240-n)/60:r));var n}return t=isNaN(t)?0:(t%=360)<0?t+360:t,n=isNaN(n)?0:n<0?0:1<n?1:n,r=2*(e=e<0?0:1<e?1:e)-(i=e<=.5?e*(1+n):e+n-e*n),new on(o(t+120),o(t),o(t-120))}function Wt(t,n,e){return this instanceof Wt?(this.h=+t,this.c=+n,void(this.l=+e)):arguments.length<2?t instanceof Wt?new Wt(t.h,t.c,t.l):tn(t instanceof $t?t.l:(t=hn((t=z.rgb(t)).r,t.g,t.b)).l,t.a,t.b):new Wt(t,n,e)}It.brighter=function(t){return t=Math.pow(.7,arguments.length?t:1),new Gt(this.h,this.s,this.l/t)},It.darker=function(t){return t=Math.pow(.7,arguments.length?t:1),new Gt(this.h,this.s,t*this.l)},It.rgb=function(){return Ut(this.h,this.s,this.l)};var Bt=(z.hcl=Wt).prototype=new Ft;function Yt(t,n,e){return isNaN(t)&&(t=0),isNaN(n)&&(n=0),new $t(e,Math.cos(t*=Et)*n,Math.sin(t)*n)}function $t(t,n,e){return this instanceof $t?(this.l=+t,this.a=+n,void(this.b=+e)):arguments.length<2?t instanceof $t?new $t(t.l,t.a,t.b):t instanceof Wt?Yt(t.h,t.c,t.l):hn((t=on(t)).r,t.g,t.b):new $t(t,n,e)}Bt.brighter=function(t){return new Wt(this.h,this.c,Math.min(100,this.l+Vt*(arguments.length?t:1)))},Bt.darker=function(t){return new Wt(this.h,this.c,Math.max(0,this.l-Vt*(arguments.length?t:1)))},Bt.rgb=function(){return Yt(this.h,this.c,this.l).rgb()},z.lab=$t;var Vt=18,Zt=.95047,Xt=1,Jt=1.08883,Kt=$t.prototype=new Ft;function Qt(t,n,e){var r=(t+16)/116,i=r+n/500,o=r-e/200;return new on(rn(3.2404542*(i=nn(i)*Zt)-1.5371385*(r=nn(r)*Xt)-.4985314*(o=nn(o)*Jt)),rn(-.969266*i+1.8760108*r+.041556*o),rn(.0556434*i-.2040259*r+1.0572252*o))}function tn(t,n,e){return 0<t?new Wt(Math.atan2(e,n)*Nt,Math.sqrt(n*n+e*e),t):new Wt(NaN,NaN,t)}function nn(t){return.206893034<t?t*t*t:(t-4/29)/7.787037}function en(t){return.008856<t?Math.pow(t,1/3):7.787037*t+4/29}function rn(t){return Math.round(255*(t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055))}function on(t,n,e){return this instanceof on?(this.r=~~t,this.g=~~n,void(this.b=~~e)):arguments.length<2?t instanceof on?new on(t.r,t.g,t.b):ln(""+t,on,Ut):new on(t,n,e)}function an(t){return new on(t>>16,t>>8&255,255&t)}function un(t){return an(t)+""}Kt.brighter=function(t){return new $t(Math.min(100,this.l+Vt*(arguments.length?t:1)),this.a,this.b)},Kt.darker=function(t){return new $t(Math.max(0,this.l-Vt*(arguments.length?t:1)),this.a,this.b)},Kt.rgb=function(){return Qt(this.l,this.a,this.b)};var cn=(z.rgb=on).prototype=new Ft;function sn(t){return t<16?"0"+Math.max(0,t).toString(16):Math.min(255,t).toString(16)}function ln(t,n,e){var r,i,o,a=0,u=0,c=0;if(r=/([a-z]+)\((.*)\)/.exec(t=t.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return e(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return n(dn(i[0]),dn(i[1]),dn(i[2]))}return(o=gn.get(t))?n(o.r,o.g,o.b):(null==t||"#"!==t.charAt(0)||isNaN(o=parseInt(t.slice(1),16))||(4===t.length?(a=(3840&o)>>4,a|=a>>4,u=240&o,u|=u>>4,c=15&o,c|=c<<4):7===t.length&&(a=(16711680&o)>>16,u=(65280&o)>>8,c=255&o)),n(a,u,c))}function fn(t,n,e){var r,i,o=Math.min(t/=255,n/=255,e/=255),a=Math.max(t,n,e),u=a-o,c=(a+o)/2;return u?(i=c<.5?u/(a+o):u/(2-a-o),r=t==a?(n-e)/u+(n<e?6:0):n==a?(e-t)/u+2:(t-n)/u+4,r*=60):(r=NaN,i=0<c&&c<1?0:r),new Gt(r,i,c)}function hn(t,n,e){var r=en((.4124564*(t=pn(t))+.3575761*(n=pn(n))+.1804375*(e=pn(e)))/Zt),i=en((.2126729*t+.7151522*n+.072175*e)/Xt);return $t(116*i-16,500*(r-i),200*(i-en((.0193339*t+.119192*n+.9503041*e)/Jt)))}function pn(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function dn(t){var n=parseFloat(t);return"%"===t.charAt(t.length-1)?Math.round(2.55*n):n}cn.brighter=function(t){t=Math.pow(.7,arguments.length?t:1);var n=this.r,e=this.g,r=this.b;return n||e||r?(n&&n<30&&(n=30),e&&e<30&&(e=30),r&&r<30&&(r=30),new on(Math.min(255,n/t),Math.min(255,e/t),Math.min(255,r/t))):new on(30,30,30)},cn.darker=function(t){return new on((t=Math.pow(.7,arguments.length?t:1))*this.r,t*this.g,t*this.b)},cn.hsl=function(){return fn(this.r,this.g,this.b)},cn.toString=function(){return"#"+sn(this.r)+sn(this.g)+sn(this.b)};var gn=z.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function vn(t){return"function"==typeof t?t:function(){return t}}function yn(r){return function(t,n,e){return 2===arguments.length&&"function"==typeof n&&(e=n,n=null),mn(t,n,r,e)}}function mn(i,o,a,t){var e,u={},c=z.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,f=null;function n(){var t,n,e,r=l.status;if(!r&&((e=(n=l).responseType)&&"text"!==e?n.response:n.responseText)||200<=r&&r<300||304===r){try{t=a.call(u,l)}catch(t){return void c.error.call(u,t)}c.load.call(u,t)}else c.error.call(u,l)}return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(i)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=n:l.onreadystatechange=function(){3<l.readyState&&n()},l.onprogress=function(t){var n=z.event;z.event=t;try{c.progress.call(u,l)}finally{z.event=n}},u.header=function(t,n){return t=(t+"").toLowerCase(),arguments.length<2?s[t]:(null==n?delete s[t]:s[t]=n+"",u)},u.mimeType=function(t){return arguments.length?(o=null==t?null:t+"",u):o},u.responseType=function(t){return arguments.length?(f=t,u):f},u.response=function(t){return a=t,u},["get","post"].forEach(function(t){u[t]=function(){return u.send.apply(u,[t].concat(h(arguments)))}}),u.send=function(t,n,e){if(2===arguments.length&&"function"==typeof n&&(e=n,n=null),l.open(t,i,!0),null==o||"accept"in s||(s.accept=o+",*/*"),l.setRequestHeader)for(var r in s)l.setRequestHeader(r,s[r]);return null!=o&&l.overrideMimeType&&l.overrideMimeType(o),null!=f&&(l.responseType=f),null!=e&&u.on("error",e).on("load",function(t){e(null,t)}),c.beforesend.call(u,l),l.send(null==n?null:n),u},u.abort=function(){return l.abort(),u},z.rebind(u,c,"on"),null==t?u:u.get(1===(e=t).length?function(t,n){e(null==t?n:null)}:e)}gn.forEach(function(t,n){gn.set(t,an(n))}),z.functor=vn,z.xhr=yn(D),z.dsv=function(i,o){var n=new RegExp('["'+i+"\n]"),h=i.charCodeAt(0);function a(t,n,e){arguments.length<3&&(e=n,n=null);var r=mn(t,o,null==n?u:c(n),e);return r.row=function(t){return arguments.length?r.response(null==(n=t)?u:c(t)):n},r}function u(t){return a.parse(t.responseText)}function c(n){return function(t){return a.parse(t.responseText,n)}}function e(t){return t.map(s).join(i)}function s(t){return n.test(t)?'"'+t.replace(/\"/g,'""')+'"':t}return a.parse=function(t,r){var i;return a.parseRows(t,function(t,n){if(i)return i(t,n-1);var e=new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}");i=r?function(t,n){return r(e(t),n)}:e})},a.parseRows=function(i,t){var n,o,a={},u={},e=[],c=i.length,s=0,r=0;function l(){if(c<=s)return u;if(o)return o=!1,a;var t=s;if(34===i.charCodeAt(t)){for(var n=t;n++<c;)if(34===i.charCodeAt(n)){if(34!==i.charCodeAt(n+1))break;++n}return s=n+2,13===(e=i.charCodeAt(n+1))?(o=!0,10===i.charCodeAt(n+2)&&++s):10===e&&(o=!0),i.slice(t+1,n).replace(/""/g,'"')}for(;s<c;){var e,r=1;if(10===(e=i.charCodeAt(s++)))o=!0;else if(13===e)o=!0,10===i.charCodeAt(s)&&(++s,++r);else if(e!==h)continue;return i.slice(t,s-r)}return i.slice(t)}for(;(n=l())!==u;){for(var f=[];n!==a&&n!==u;)f.push(n),n=l();t&&null==(f=t(f,r++))||e.push(f)}return e},a.format=function(t){if(Array.isArray(t[0]))return a.formatRows(t);var e=new C,r=[];return t.forEach(function(t){for(var n in t)e.has(n)||r.push(e.add(n))}),[r.map(s).join(i)].concat(t.map(function(n){return r.map(function(t){return s(n[t])}).join(i)})).join("\n")},a.formatRows=function(t){return t.map(e).join("\n")},a},z.csv=z.dsv(",","text/csv"),z.tsv=z.dsv("\t","text/tab-separated-values");var xn,bn,wn,Mn,_n=this[E(this,"requestAnimationFrame")]||function(t){setTimeout(t,17)};function kn(t,n,e){var r=arguments.length;r<2&&(n=0),r<3&&(e=Date.now());var i={c:t,t:e+n,n:null};return bn?bn.n=i:xn=i,bn=i,wn||(Mn=clearTimeout(Mn),wn=1,_n(Sn)),i}function Sn(){var t=Cn(),n=An()-t;24<n?(isFinite(n)&&(clearTimeout(Mn),Mn=setTimeout(Sn,n)),wn=0):(wn=1,_n(Sn))}function Cn(){for(var t=Date.now(),n=xn;n;)t>=n.t&&n.c(t-n.t)&&(n.c=null),n=n.n;return t}function An(){for(var t,n=xn,e=1/0;n;)n.c?(n.t<e&&(e=n.t),n=(t=n).n):n=t?t.n=n.n:xn=n.n;return bn=t,e}function En(t,n){return n-(t?Math.ceil(Math.log(t)/Math.LN10):1)}z.timer=function(){kn.apply(this,arguments)},z.timer.flush=function(){Cn(),An()},z.round=function(t,n){return n?Math.round(t*(n=Math.pow(10,n)))/n:Math.round(t)};var Nn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(function(t,n){var e=Math.pow(10,3*H(8-n));return{scale:8<n?function(t){return t/e}:function(t){return t*e},symbol:t}});z.formatPrefix=function(t,n){var e=0;return(t=+t)&&(t<0&&(t*=-1),n&&(t=z.round(t,En(t,n))),e=1+Math.floor(1e-12+Math.log(t)/Math.LN10),e=Math.max(-24,Math.min(24,3*Math.floor((e-1)/3)))),Nn[8+e/3]};var Tn=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,Ln=z.map({b:function(t){return t.toString(2)},c:function(t){return String.fromCharCode(t)},o:function(t){return t.toString(8)},x:function(t){return t.toString(16)},X:function(t){return t.toString(16).toUpperCase()},g:function(t,n){return t.toPrecision(n)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},r:function(t,n){return(t=z.round(t,En(t,n))).toFixed(Math.max(0,Math.min(20,En(t*(1+1e-15),n))))}});function jn(t){return t+""}var Hn=z.time={},zn=Date;function On(){this._=new Date(1<arguments.length?Date.UTC.apply(this,arguments):arguments[0])}On.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){Dn.setUTCDate.apply(this._,arguments)},setDay:function(){Dn.setUTCDay.apply(this._,arguments)},setFullYear:function(){Dn.setUTCFullYear.apply(this._,arguments)},setHours:function(){Dn.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){Dn.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){Dn.setUTCMinutes.apply(this._,arguments)},setMonth:function(){Dn.setUTCMonth.apply(this._,arguments)},setSeconds:function(){Dn.setUTCSeconds.apply(this._,arguments)},setTime:function(){Dn.setTime.apply(this._,arguments)}};var Dn=Date.prototype;function qn(r,o,a){function t(t){var n=r(t),e=i(n,1);return t-n<e-t?n:e}function u(t){return o(t=r(new zn(t-1)),1),t}function i(t,n){return o(t=new zn(+t),n),t}function c(t,n,e){var r=u(t),i=[];if(1<e)for(;r<n;)a(r)%e||i.push(new Date(+r)),o(r,1);else for(;r<n;)i.push(new Date(+r)),o(r,1);return i}(r.floor=r).round=t,r.ceil=u,r.offset=i,r.range=c;var n=r.utc=Pn(r);return(n.floor=n).round=Pn(t),n.ceil=Pn(u),n.offset=Pn(i),n.range=function(t,n,e){try{var r=new(zn=On);return r._=t,c(r,n,e)}finally{zn=Date}},r}function Pn(r){return function(t,n){try{var e=new(zn=On);return e._=t,r(e,n)._}finally{zn=Date}}}Hn.year=qn(function(t){return(t=Hn.day(t)).setMonth(0,1),t},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t){return t.getFullYear()}),Hn.years=Hn.year.range,Hn.years.utc=Hn.year.utc.range,Hn.day=qn(function(t){var n=new zn(2e3,0);return n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n},function(t,n){t.setDate(t.getDate()+n)},function(t){return t.getDate()-1}),Hn.days=Hn.day.range,Hn.days.utc=Hn.day.utc.range,Hn.dayOfYear=function(t){var n=Hn.year(t);return Math.floor((t-n-6e4*(t.getTimezoneOffset()-n.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(t,e){e=7-e;var n=Hn[t]=qn(function(t){return(t=Hn.day(t)).setDate(t.getDate()-(t.getDay()+e)%7),t},function(t,n){t.setDate(t.getDate()+7*Math.floor(n))},function(t){var n=Hn.year(t).getDay();return Math.floor((Hn.dayOfYear(t)+(n+e)%7)/7)-(n!==e)});Hn[t+"s"]=n.range,Hn[t+"s"].utc=n.utc.range,Hn[t+"OfYear"]=function(t){var n=Hn.year(t).getDay();return Math.floor((Hn.dayOfYear(t)+(n+e)%7)/7)}}),Hn.week=Hn.sunday,Hn.weeks=Hn.sunday.range,Hn.weeks.utc=Hn.sunday.utc.range,Hn.weekOfYear=Hn.sundayOfYear;var Rn={"-":"",_:" ",0:"0"},Fn=/^\s*\d+/,Gn=/^%/;function In(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function Un(t){return new RegExp("^(?:"+t.map(z.requote).join("|")+")","i")}function Wn(t){for(var n=new m,e=-1,r=t.length;++e<r;)n.set(t[e].toLowerCase(),e);return n}function Bn(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function Yn(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e));return r?(t.U=+r[0],e+r[0].length):-1}function $n(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e));return r?(t.W=+r[0],e+r[0].length):-1}function Vn(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function Zn(t,n,e){Fn.lastIndex=0;var r,i=Fn.exec(n.slice(e,e+2));return i?(t.y=(r=+i[0])+(68<r?1900:2e3),e+i[0].length):-1}function Xn(t,n,e){return/^[+-]\d{4}$/.test(n=n.slice(e,e+5))?(t.Z=-n,e+5):-1}function Jn(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function Kn(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function Qn(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+3));return r?(t.j=+r[0],e+r[0].length):-1}function te(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function ne(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function ee(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function re(t,n,e){Fn.lastIndex=0;var r=Fn.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function ie(t){var n=t.getTimezoneOffset(),e=0<n?"-":"+",r=H(n)/60|0,i=H(n)%60;return e+In(r,"0",2)+In(i,"0",2)}function oe(t,n,e){Gn.lastIndex=0;var r=Gn.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function ae(r){for(var t=r.length,n=-1;++n<t;)r[n][0]=this(r[n][0]);return function(t){for(var n=0,e=r[n];!e[1](t);)e=r[++n];return e[0](t)}}z.locale=function(t){return{numberFormat:(n=t,k=n.decimal,u=n.thousands,c=n.grouping,r=n.currency,S=c&&u?function(t,n){for(var e=t.length,r=[],i=0,o=c[0],a=0;0<e&&0<o&&(n<a+o+1&&(o=Math.max(1,n-a)),r.push(t.substring(e-=o,e+o)),!((a+=o+1)>n));)o=c[i=(i+1)%c.length];return r.reverse().join(u)}:D,function(t){var n=Tn.exec(t),l=n[1]||" ",f=n[2]||">",h=n[3]||"-",e=n[4]||"",p=n[5],d=+n[6],g=n[7],v=n[8],y=n[9],m=1,x="",b="",w=!1,M=!0;switch(v&&(v=+v.substring(1)),(p||"0"===l&&"="===f)&&(p=l="0",f="="),y){case"n":g=!0,y="g";break;case"%":m=100,b="%",y="f";break;case"p":m=100,b="%",y="r";break;case"b":case"o":case"x":case"X":"#"===e&&(x="0"+y.toLowerCase());case"c":M=!1;case"d":w=!0,v=0;break;case"s":m=-1,y="r"}"$"===e&&(x=r[0],b=r[1]),"r"!=y||v||(y="g"),null!=v&&("g"==y?v=Math.max(1,Math.min(21,v)):"e"!=y&&"f"!=y||(v=Math.max(0,Math.min(20,v)))),y=Ln.get(y)||jn;var _=p&&g;return function(t){var n=b;if(w&&t%1)return"";var e=t<0||0===t&&1/t<0?(t=-t,"-"):"-"===h?"":h;if(m<0){var r=z.formatPrefix(t,v);t=r.scale(t),n=r.symbol+b}else t*=m;var i,o,a=(t=y(t,v)).lastIndexOf(".");if(a<0){var u=M?t.lastIndexOf("e"):-1;u<0?(i=t,o=""):(i=t.substring(0,u),o=t.substring(u))}else i=t.substring(0,a),o=k+t.substring(a+1);!p&&g&&(i=S(i,1/0));var c=x.length+i.length+o.length+(_?0:e.length),s=c<d?new Array(c=d-c+1).join(l):"";return _&&(i=S(s+i,s.length?d-o.length:1/0)),e+=x,t=i+o,("<"===f?e+t+s:">"===f?s+e+t:"^"===f?s.substring(0,c>>=1)+e+t+s.substring(c):e+(_?t:s+t))+n}}),timeFormat:function(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,c=t.shortMonths;function s(u){var c=u.length;function t(t){for(var n,e,r,i=[],o=-1,a=0;++o<c;)37===u.charCodeAt(o)&&(i.push(u.slice(a,o)),null!=(e=Rn[n=u.charAt(++o)])&&(n=u.charAt(++o)),(r=b[n])&&(n=r(t,null==e?"e"===n?" ":"0":e)),i.push(n),a=o+1);return i.push(u.slice(a,o)),i.join("")}return t.parse=function(t){var n={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(l(n,u,t,0)!=t.length)return null;"p"in n&&(n.H=n.H%12+12*n.p);var e=null!=n.Z&&zn!==On,r=new(e?On:zn);return"j"in n?r.setFullYear(n.y,0,n.j):"W"in n||"U"in n?("w"in n||(n.w="W"in n?1:0),r.setFullYear(n.y,0,1),r.setFullYear(n.y,0,"W"in n?(n.w+6)%7+7*n.W-(r.getDay()+5)%7:n.w+7*n.U-(r.getDay()+6)%7)):r.setFullYear(n.y,n.m,n.d),r.setHours(n.H+(n.Z/100|0),n.M+n.Z%100,n.S,n.L),e?r._:r},t.toString=function(){return u},t}function l(t,n,e,r){for(var i,o,a,u=0,c=n.length,s=e.length;u<c;){if(s<=r)return-1;if(37===(i=n.charCodeAt(u++))){if(a=n.charAt(u++),!(o=w[a in Rn?n.charAt(u++):a])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}s.multi=(s.utc=function(t){var e=s(t);function n(t){try{var n=new(zn=On);return n._=t,e(n)}finally{zn=Date}}return n.parse=function(t){try{zn=On;var n=e.parse(t);return n&&n._}finally{zn=Date}},n.toString=e.toString,n}).multi=ae;var f=z.map(),h=Un(o),p=Wn(o),d=Un(a),g=Wn(a),v=Un(u),y=Wn(u),m=Un(c),x=Wn(c);i.forEach(function(t,n){f.set(t.toLowerCase(),n)});var b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:s(n),d:function(t,n){return In(t.getDate(),n,2)},e:function(t,n){return In(t.getDate(),n,2)},H:function(t,n){return In(t.getHours(),n,2)},I:function(t,n){return In(t.getHours()%12||12,n,2)},j:function(t,n){return In(1+Hn.dayOfYear(t),n,3)},L:function(t,n){return In(t.getMilliseconds(),n,3)},m:function(t,n){return In(t.getMonth()+1,n,2)},M:function(t,n){return In(t.getMinutes(),n,2)},p:function(t){return i[+(12<=t.getHours())]},S:function(t,n){return In(t.getSeconds(),n,2)},U:function(t,n){return In(Hn.sundayOfYear(t),n,2)},w:function(t){return t.getDay()},W:function(t,n){return In(Hn.mondayOfYear(t),n,2)},x:s(e),X:s(r),y:function(t,n){return In(t.getFullYear()%100,n,2)},Y:function(t,n){return In(t.getFullYear()%1e4,n,4)},Z:ie,"%":function(){return"%"}},w={a:function(t,n,e){d.lastIndex=0;var r=d.exec(n.slice(e));return r?(t.w=g.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(t,n,e){h.lastIndex=0;var r=h.exec(n.slice(e));return r?(t.w=p.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(t,n,e){m.lastIndex=0;var r=m.exec(n.slice(e));return r?(t.m=x.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(t,n,e){v.lastIndex=0;var r=v.exec(n.slice(e));return r?(t.m=y.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(t,n,e){return l(t,b.c.toString(),n,e)},d:Kn,e:Kn,H:te,I:te,j:Qn,L:re,m:Jn,M:ne,p:function(t,n,e){var r=f.get(n.slice(e,e+=2).toLowerCase());return null==r?-1:(t.p=r,e)},S:ee,U:Yn,w:Bn,W:$n,x:function(t,n,e){return l(t,b.x.toString(),n,e)},X:function(t,n,e){return l(t,b.X.toString(),n,e)},y:Zn,Y:Vn,Z:Xn,"%":oe};return s}(t)};var n,k,u,c,r,S};var ue=z.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ce(){}z.format=ue.numberFormat,z.geo={},ce.prototype={s:0,t:0,add:function(t){le(t,this.t,se),le(se.s,this.s,this),this.s?this.t+=se.t:this.s=se.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var se=new ce;function le(t,n,e){var r=e.s=t+n,i=r-t,o=r-i;e.t=t-o+(n-i)}function fe(t,n){t&&pe.hasOwnProperty(t.type)&&pe[t.type](t,n)}z.geo.stream=function(t,n){t&&he.hasOwnProperty(t.type)?he[t.type](t,n):fe(t,n)};var he={Feature:function(t,n){fe(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)fe(e[r].geometry,n)}},pe={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){de(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)de(e[r],n,0)},Polygon:function(t,n){ge(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)ge(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)fe(e[r],n)}};function de(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function ge(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)de(t[e],n,1);n.polygonEnd()}z.geo.area=function(t){return ve=0,z.geo.stream(t,Ne),ve};var ve,ye,me,xe,be,we,Me,_e,ke,Se,Ce,Ae,Ee=new ce,Ne={sphere:function(){ve+=4*kt},point:T,lineStart:T,lineEnd:T,polygonStart:function(){Ee.reset(),Ne.lineStart=Te},polygonEnd:function(){var t=2*Ee;ve+=t<0?4*kt+t:t,Ne.lineStart=Ne.lineEnd=Ne.point=T}};function Te(){var e,r,l,f,h;function i(t,n){n=n*Et/2+kt/4;var e=(t*=Et)-l,r=0<=e?1:-1,i=r*e,o=Math.cos(n),a=Math.sin(n),u=h*a,c=f*o+u*Math.cos(i),s=u*r*Math.sin(i);Ee.add(Math.atan2(s,c)),l=t,f=o,h=a}Ne.point=function(t,n){Ne.point=i,l=(e=t)*Et,f=Math.cos(n=(r=n)*Et/2+kt/4),h=Math.sin(n)},Ne.lineEnd=function(){i(e,r)}}function Le(t){var n=t[0],e=t[1],r=Math.cos(e);return[r*Math.cos(n),r*Math.sin(n),Math.sin(e)]}function je(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function He(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ze(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Oe(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function De(t){var n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}function qe(t){return[Math.atan2(t[1],t[0]),Ht(t[2])]}function Pe(t,n){return H(t[0]-n[0])<Mt&&H(t[1]-n[1])<Mt}z.geo.bounds=function(){var l,f,h,p,d,r,i,g,o,c,s,v={point:y,lineStart:t,lineEnd:n,polygonStart:function(){v.point=e,v.lineStart=u,v.lineEnd=m,o=0,Ne.polygonStart()},polygonEnd:function(){Ne.polygonEnd(),v.point=y,v.lineStart=t,v.lineEnd=n,Ee<0?(l=-(h=180),f=-(p=90)):Mt<o?p=90:o<-Mt&&(f=-90),s[0]=l,s[1]=h}};function y(t,n){c.push(s=[l=t,h=t]),n<f&&(f=n),p<n&&(p=n)}function a(t,n){var e=Le([t*Et,n*Et]);if(g){var r=He(g,e),i=He([r[1],-r[0],0],r);De(i),i=qe(i);var o=t-d,a=0<o?1:-1,u=i[0]*Nt*a,c=180<H(o);if(c^(a*d<u&&u<a*t)){var s=i[1]*Nt;p<s&&(p=s)}else if(c^(a*d<(u=(u+360)%360-180)&&u<a*t)){(s=-i[1]*Nt)<f&&(f=s)}else n<f&&(f=n),p<n&&(p=n);c?t<d?x(l,t)>x(l,h)&&(h=t):x(t,h)>x(l,h)&&(l=t):l<=h?(t<l&&(l=t),h<t&&(h=t)):d<t?x(l,t)>x(l,h)&&(h=t):x(t,h)>x(l,h)&&(l=t)}else y(t,n);g=e,d=t}function t(){v.point=a}function n(){s[0]=l,s[1]=h,v.point=y,g=null}function e(t,n){if(g){var e=t-d;o+=180<H(e)?e+(0<e?360:-360):e}else r=t,i=n;Ne.point(t,n),a(t,n)}function u(){Ne.lineStart()}function m(){e(r,i),Ne.lineEnd(),H(o)>Mt&&(l=-(h=180)),s[0]=l,s[1]=h,g=null}function x(t,n){return(n-=t)<0?n+360:n}function b(t,n){return t[0]-n[0]}function w(t,n){return n[0]<=n[1]?n[0]<=t&&t<=n[1]:t<n[0]||n[1]<t}return function(t){if(p=h=-(l=f=1/0),c=[],z.geo.stream(t,v),i=c.length){c.sort(b);for(var n=1,e=[u=c[0]];n<i;++n)w((o=c[n])[0],u)||w(o[1],u)?(x(u[0],o[1])>x(u[0],u[1])&&(u[1]=o[1]),x(o[0],u[1])>x(u[0],u[1])&&(u[0]=o[0])):e.push(u=o);for(var r,i,o,a=-1/0,u=(n=0,e[i=e.length-1]);n<=i;u=o,++n)o=e[n],(r=x(u[1],o[0]))>a&&(a=r,l=o[0],h=u[1])}return c=s=null,l===1/0||f===1/0?[[NaN,NaN],[NaN,NaN]]:[[l,f],[h,p]]}}(),z.geo.centroid=function(t){ye=me=xe=be=we=Me=_e=ke=Se=Ce=Ae=0,z.geo.stream(t,Re);var n=Se,e=Ce,r=Ae,i=n*n+e*e+r*r;return i<_t&&(n=Me,e=_e,r=ke,me<Mt&&(n=xe,e=be,r=we),(i=n*n+e*e+r*r)<_t)?[NaN,NaN]:[Math.atan2(e,n)*Nt,Ht(r/Math.sqrt(i))*Nt]};var Re={sphere:T,point:Fe,lineStart:Ie,lineEnd:Ue,polygonStart:function(){Re.lineStart=We},polygonEnd:function(){Re.lineStart=Ie}};function Fe(t,n){t*=Et;var e=Math.cos(n*=Et);Ge(e*Math.cos(t),e*Math.sin(t),Math.sin(n))}function Ge(t,n,e){xe+=(t-xe)/++ye,be+=(n-be)/ye,we+=(e-we)/ye}function Ie(){var u,c,s;function r(t,n){t*=Et;var e=Math.cos(n*=Et),r=e*Math.cos(t),i=e*Math.sin(t),o=Math.sin(n),a=Math.atan2(Math.sqrt((a=c*o-s*i)*a+(a=s*r-u*o)*a+(a=u*i-c*r)*a),u*r+c*i+s*o);me+=a,Me+=a*(u+(u=r)),_e+=a*(c+(c=i)),ke+=a*(s+(s=o)),Ge(u,c,s)}Re.point=function(t,n){t*=Et;var e=Math.cos(n*=Et);u=e*Math.cos(t),c=e*Math.sin(t),s=Math.sin(n),Re.point=r,Ge(u,c,s)}}function Ue(){Re.point=Fe}function We(){var r,i,p,d,g;function o(t,n){t*=Et;var e=Math.cos(n*=Et),r=e*Math.cos(t),i=e*Math.sin(t),o=Math.sin(n),a=d*o-g*i,u=g*r-p*o,c=p*i-d*r,s=Math.sqrt(a*a+u*u+c*c),l=p*r+d*i+g*o,f=s&&-jt(l)/s,h=Math.atan2(s,l);Se+=f*a,Ce+=f*u,Ae+=f*c,me+=h,Me+=h*(p+(p=r)),_e+=h*(d+(d=i)),ke+=h*(g+(g=o)),Ge(p,d,g)}Re.point=function(t,n){r=t,i=n,Re.point=o,t*=Et;var e=Math.cos(n*=Et);p=e*Math.cos(t),d=e*Math.sin(t),g=Math.sin(n),Ge(p,d,g)},Re.lineEnd=function(){o(r,i),Re.lineEnd=Ue,Re.point=Fe}}function Be(e,r){function t(t,n){return t=e(t,n),r(t[0],t[1])}return e.invert&&r.invert&&(t.invert=function(t,n){return(t=r.invert(t,n))&&e.invert(t[0],t[1])}),t}function Ye(){return!0}function $e(t,n,e,r,u){var c=[],s=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e=t[0],r=t[n];if(Pe(e,r)){u.lineStart();for(var i=0;i<n;++i)u.point((e=t[i])[0],e[1]);u.lineEnd()}else{var o=new Ze(e,t,null,!0),a=new Ze(e,null,o,!1);o.o=a,c.push(o),s.push(a),a=new Ze(r,null,o=new Ze(r,t,null,!1),!0),o.o=a,c.push(o),s.push(a)}}}),s.sort(n),Ve(c),Ve(s),c.length){for(var i=0,o=e,a=s.length;i<a;++i)s[i].e=o=!o;for(var l,f,h=c[0];;){for(var p=h,d=!0;p.v;)if((p=p.n)===h)return;l=p.z,u.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(i=0,a=l.length;i<a;++i)u.point((f=l[i])[0],f[1]);else r(p.x,p.n.x,1,u);p=p.n}else{if(d)for(i=(l=p.p.z).length-1;0<=i;--i)u.point((f=l[i])[0],f[1]);else r(p.x,p.p.x,-1,u);p=p.p}l=(p=p.o).z,d=!d}while(!p.v);u.lineEnd()}}}function Ve(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}function Ze(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Xe(m,x,b,w){return function(r,a){var u,i=x(a),n=r.invert(w[0],w[1]),e={point:o,lineStart:c,lineEnd:s,polygonStart:function(){e.point=g,e.lineStart=v,e.lineEnd=y,u=[],l=[]},polygonEnd:function(){e.point=o,e.lineStart=c,e.lineEnd=s,u=z.merge(u);var t=function(t,n){var e=t[0],r=t[1],i=[Math.sin(e),-Math.cos(e),0],o=0,a=0;Ee.reset();for(var u=0,c=n.length;u<c;++u){var s=n[u],l=s.length;if(l)for(var f=s[0],h=f[0],p=f[1]/2+kt/4,d=Math.sin(p),g=Math.cos(p),v=1;;){v===l&&(v=0);var y=(t=s[v])[0],m=t[1]/2+kt/4,x=Math.sin(m),b=Math.cos(m),w=y-h,M=0<=w?1:-1,_=M*w,k=kt<_,S=d*x;if(Ee.add(Math.atan2(S*M*Math.sin(_),g*b+S*Math.cos(_))),o+=k?w+M*St:w,k^e<=h^e<=y){var C=He(Le(f),Le(t));De(C);var A=He(i,C);De(A);var E=(k^0<=w?-1:1)*Ht(A[2]);(E<r||r===E&&(C[0]||C[1]))&&(a+=k^0<=w?1:-1)}if(!v++)break;h=y,d=x,g=b,f=t}}return(o<-Mt||o<Mt&&Ee<-Mt)^1&a}(n,l);u.length?(d||(a.polygonStart(),d=!0),$e(u,Qe,t,b,a)):t&&(d||(a.polygonStart(),d=!0),a.lineStart(),b(null,null,1,a),a.lineEnd()),d&&(a.polygonEnd(),d=!1),u=l=null},sphere:function(){a.polygonStart(),a.lineStart(),b(null,null,1,a),a.lineEnd(),a.polygonEnd()}};function o(t,n){var e=r(t,n);m(t=e[0],n=e[1])&&a.point(t,n)}function t(t,n){var e=r(t,n);i.point(e[0],e[1])}function c(){e.point=t,i.lineStart()}function s(){e.point=o,i.lineEnd()}var l,f,h=Ke(),p=x(h),d=!1;function g(t,n){f.push([t,n]);var e=r(t,n);p.point(e[0],e[1])}function v(){p.lineStart(),f=[]}function y(){g(f[0][0],f[0][1]),p.lineEnd();var t,n=p.clean(),e=h.buffer(),r=e.length;if(f.pop(),l.push(f),f=null,r)if(1&n){var i,o=-1;if(0<(r=(t=e[0]).length-1)){for(d||(a.polygonStart(),d=!0),a.lineStart();++o<r;)a.point((i=t[o])[0],i[1]);a.lineEnd()}}else 1<r&&2&n&&e.push(e.pop().concat(e.shift())),u.push(e.filter(Je))}return e}}function Je(t){return 1<t.length}function Ke(){var e,n=[];return{lineStart:function(){n.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:T,buffer:function(){var t=n;return n=[],e=null,t},rejoin:function(){1<n.length&&n.push(n.pop().concat(n.shift()))}}}function Qe(t,n){return((t=t.x)[0]<0?t[1]-At-Mt:At-t[1])-((n=n.x)[0]<0?n[1]-At-Mt:At-n[1])}var tr=Xe(Ye,function(f){var h,p=NaN,d=NaN,g=NaN;return{lineStart:function(){f.lineStart(),h=1},point:function(t,n){var e,r,i,o,a,u,c,s=0<t?kt:-kt,l=H(t-p);H(l-kt)<Mt?(f.point(p,d=0<(d+n)/2?At:-At),f.point(g,d),f.lineEnd(),f.lineStart(),f.point(s,d),f.point(t,d),h=0):g!==s&&kt<=l&&(H(p-g)<Mt&&(p-=g*Mt),H(t-s)<Mt&&(t-=s*Mt),e=p,r=d,i=t,o=n,c=Math.sin(e-i),d=H(c)>Mt?Math.atan((Math.sin(r)*(u=Math.cos(o))*Math.sin(i)-Math.sin(o)*(a=Math.cos(r))*Math.sin(e))/(a*u*c)):(r+o)/2,f.point(g,d),f.lineEnd(),f.lineStart(),f.point(s,d),h=0),f.point(p=t,d=n),g=s},lineEnd:function(){f.lineEnd(),p=d=NaN},clean:function(){return 2-h}}},function(t,n,e,r){var i;if(null==t)i=e*At,r.point(-kt,i),r.point(0,i),r.point(kt,i),r.point(kt,0),r.point(kt,-i),r.point(0,-i),r.point(-kt,-i),r.point(-kt,0),r.point(-kt,i);else if(H(t[0]-n[0])>Mt){var o=t[0]<n[0]?kt:-kt;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-kt,-kt/2]);function nr(l,f,h,p){return function(t){var n,e=t.a,r=t.b,i=e.x,o=e.y,a=0,u=1,c=r.x-i,s=r.y-o;if(n=l-i,c||!(0<n)){if(n/=c,c<0){if(n<a)return;n<u&&(u=n)}else if(0<c){if(u<n)return;a<n&&(a=n)}if(n=h-i,c||!(n<0)){if(n/=c,c<0){if(u<n)return;a<n&&(a=n)}else if(0<c){if(n<a)return;n<u&&(u=n)}if(n=f-o,s||!(0<n)){if(n/=s,s<0){if(n<a)return;n<u&&(u=n)}else if(0<s){if(u<n)return;a<n&&(a=n)}if(n=p-o,s||!(n<0)){if(n/=s,s<0){if(u<n)return;a<n&&(a=n)}else if(0<s){if(n<a)return;n<u&&(u=n)}return 0<a&&(t.a={x:i+a*c,y:o+a*s}),u<1&&(t.b={x:i+u*c,y:o+u*s}),t}}}}}}var er=1e9;function rr(b,w,M,_){return function(i){var r,l,o,a,u,c,s,f,h,p,d,g=i,t=Ke(),v=nr(b,w,M,_),n={point:e,lineStart:function(){n.point=x,l&&l.push(o=[]);p=!0,h=!1,s=f=NaN},lineEnd:function(){r&&(x(a,u),c&&h&&t.rejoin(),r.push(t.buffer()));n.point=e,h&&i.lineEnd()},polygonStart:function(){i=t,r=[],l=[],d=!0},polygonEnd:function(){i=g,r=z.merge(r);var t=function(t){for(var n=0,e=l.length,r=t[1],i=0;i<e;++i)for(var o,a=1,u=l[i],c=u.length,s=u[0];a<c;++a)o=u[a],s[1]<=r?o[1]>r&&0<Lt(s,o,t)&&++n:o[1]<=r&&Lt(s,o,t)<0&&--n,s=o;return 0!==n}([b,_]),n=d&&t,e=r.length;(n||e)&&(i.polygonStart(),n&&(i.lineStart(),y(null,null,1,i),i.lineEnd()),e&&$e(r,S,t,y,i),i.polygonEnd()),r=l=o=null}};function y(t,n,e,r){var i=0,o=0;if(null==t||(i=k(t,e))!==(o=k(n,e))||C(t,n)<0^0<e)for(;r.point(0===i||3===i?b:M,1<i?_:w),(i=(i+e+4)%4)!==o;);else r.point(n[0],n[1])}function m(t,n){return b<=t&&t<=M&&w<=n&&n<=_}function e(t,n){m(t,n)&&i.point(t,n)}function x(t,n){var e=m(t=Math.max(-er,Math.min(er,t)),n=Math.max(-er,Math.min(er,n)));if(l&&o.push([t,n]),p)a=t,u=n,p=!1,(c=e)&&(i.lineStart(),i.point(t,n));else if(e&&h)i.point(t,n);else{var r={a:{x:s,y:f},b:{x:t,y:n}};v(r)?(h||(i.lineStart(),i.point(r.a.x,r.a.y)),i.point(r.b.x,r.b.y),e||i.lineEnd(),d=!1):e&&(i.lineStart(),i.point(t,n),d=!1)}s=t,f=n,h=e}return n};function k(t,n){return H(t[0]-b)<Mt?0<n?0:3:H(t[0]-M)<Mt?0<n?2:1:H(t[1]-w)<Mt?0<n?1:0:0<n?3:2}function S(t,n){return C(t.x,n.x)}function C(t,n){var e=k(t,1),r=k(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}}function ir(t){var n=0,e=kt/3,r=Er(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*kt/180,e=t[1]*kt/180):[n/kt*180,e/kt*180]},i}function or(t,n){var e=Math.sin(t),r=(e+Math.sin(n))/2,i=1+e*(2*r-e),o=Math.sqrt(i)/r;function a(t,n){var e=Math.sqrt(i-2*r*Math.sin(n))/r;return[e*Math.sin(t*=r),o-e*Math.cos(t)]}return a.invert=function(t,n){var e=o-n;return[Math.atan2(t,e)/r,Ht((i-(t*t+e*e)*r*r)/(2*r))]},a}z.geo.clipExtent=function(){var n,e,r,i,o,a,u={stream:function(t){return o&&(o.valid=!1),(o=a(t)).valid=!0,o},extent:function(t){return arguments.length?(a=rr(n=+t[0][0],e=+t[0][1],r=+t[1][0],i=+t[1][1]),o&&(o.valid=!1,o=null),u):[[n,e],[r,i]]}};return u.extent([[0,0],[960,500]])},(z.geo.conicEqualArea=function(){return ir(or)}).raw=or,z.geo.albers=function(){return z.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},z.geo.albersUsa=function(){var r,i,o,a,u=z.geo.albers(),c=z.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=z.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,n){r=[t,n]}};function f(t){var n=t[0],e=t[1];return r=null,i(n,e),r||(o(n,e),r)||a(n,e),r}return f.invert=function(t){var n=u.scale(),e=u.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(.12<=i&&i<.234&&-.425<=r&&r<-.214?c:.166<=i&&i<.234&&-.214<=r&&r<-.115?s:u).invert(t)},f.stream=function(t){var e=u.stream(t),r=c.stream(t),i=s.stream(t);return{point:function(t,n){e.point(t,n),r.point(t,n),i.point(t,n)},sphere:function(){e.sphere(),r.sphere(),i.sphere()},lineStart:function(){e.lineStart(),r.lineStart(),i.lineStart()},lineEnd:function(){e.lineEnd(),r.lineEnd(),i.lineEnd()},polygonStart:function(){e.polygonStart(),r.polygonStart(),i.polygonStart()},polygonEnd:function(){e.polygonEnd(),r.polygonEnd(),i.polygonEnd()}}},f.precision=function(t){return arguments.length?(u.precision(t),c.precision(t),s.precision(t),f):u.precision()},f.scale=function(t){return arguments.length?(u.scale(t),c.scale(.35*t),s.scale(t),f.translate(u.translate())):u.scale()},f.translate=function(t){if(!arguments.length)return u.translate();var n=u.scale(),e=+t[0],r=+t[1];return i=u.translate(t).clipExtent([[e-.455*n,r-.238*n],[e+.455*n,r+.238*n]]).stream(l).point,o=c.translate([e-.307*n,r+.201*n]).clipExtent([[e-.425*n+Mt,r+.12*n+Mt],[e-.214*n-Mt,r+.234*n-Mt]]).stream(l).point,a=s.translate([e-.205*n,r+.212*n]).clipExtent([[e-.214*n+Mt,r+.166*n+Mt],[e-.115*n-Mt,r+.234*n-Mt]]).stream(l).point,f},f.scale(1070)};var ar,ur,cr,sr,lr,fr,hr={point:T,lineStart:T,lineEnd:T,polygonStart:function(){ur=0,hr.lineStart=pr},polygonEnd:function(){hr.lineStart=hr.lineEnd=hr.point=T,ar+=H(ur/2)}};function pr(){var e,r,i,o;function a(t,n){ur+=o*t-i*n,i=t,o=n}hr.point=function(t,n){hr.point=a,e=i=t,r=o=n},hr.lineEnd=function(){a(e,r)}}var dr={point:function(t,n){t<cr&&(cr=t);lr<t&&(lr=t);n<sr&&(sr=n);fr<n&&(fr=n)},lineStart:T,lineEnd:T,polygonStart:T,polygonEnd:T};function gr(){var e=vr(4.5),r=[],i={point:t,lineStart:function(){i.point=n},lineEnd:a,polygonStart:function(){i.lineEnd=u},polygonEnd:function(){i.lineEnd=a,i.point=t},pointRadius:function(t){return e=vr(t),i},result:function(){if(r.length){var t=r.join("");return r=[],t}}};function t(t,n){r.push("M",t,",",n,e)}function n(t,n){r.push("M",t,",",n),i.point=o}function o(t,n){r.push("L",t,",",n)}function a(){i.point=t}function u(){r.push("Z")}return i}function vr(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}var yr,mr={point:xr,lineStart:br,lineEnd:wr,polygonStart:function(){mr.lineStart=Mr},polygonEnd:function(){mr.point=xr,mr.lineStart=br,mr.lineEnd=wr}};function xr(t,n){xe+=t,be+=n,++we}function br(){var o,a;function e(t,n){var e=t-o,r=n-a,i=Math.sqrt(e*e+r*r);Me+=i*(o+t)/2,_e+=i*(a+n)/2,ke+=i,xr(o=t,a=n)}mr.point=function(t,n){mr.point=e,xr(o=t,a=n)}}function wr(){mr.point=xr}function Mr(){var e,r,o,a;function i(t,n){var e=t-o,r=n-a,i=Math.sqrt(e*e+r*r);Me+=i*(o+t)/2,_e+=i*(a+n)/2,ke+=i,Se+=(i=a*t-o*n)*(o+t),Ce+=i*(a+n),Ae+=3*i,xr(o=t,a=n)}mr.point=function(t,n){mr.point=i,xr(e=o=t,r=a=n)},mr.lineEnd=function(){i(e,r)}}function _r(e){var r=4.5,i={point:t,lineStart:function(){i.point=n},lineEnd:a,polygonStart:function(){i.lineEnd=u},polygonEnd:function(){i.lineEnd=a,i.point=t},pointRadius:function(t){return r=t,i},result:T};function t(t,n){e.moveTo(t+r,n),e.arc(t,n,r,0,St)}function n(t,n){e.moveTo(t,n),i.point=o}function o(t,n){e.lineTo(t,n)}function a(){i.point=t}function u(){e.closePath()}return i}function kr(N){var T=.5,L=Math.cos(30*Et),w=16;function n(t){return(w?function(i){var e,r,o,a,u,c,s,l,f,h,p,d,g={point:t,lineStart:n,lineEnd:y,polygonStart:function(){i.polygonStart(),g.lineStart=m},polygonEnd:function(){i.polygonEnd(),g.lineStart=n}};function t(t,n){t=N(t,n),i.point(t[0],t[1])}function n(){l=NaN,g.point=v,i.lineStart()}function v(t,n){var e=Le([t,n]),r=N(t,n);j(l,f,s,h,p,d,l=r[0],f=r[1],s=t,h=e[0],p=e[1],d=e[2],w,i),i.point(l,f)}function y(){g.point=t,i.lineEnd()}function m(){n(),g.point=x,g.lineEnd=b}function x(t,n){v(e=t,n),r=l,o=f,a=h,u=p,c=d,g.point=v}function b(){j(l,f,s,h,p,d,r,o,e,a,u,c,w,i),(g.lineEnd=y)()}return g}:function(e){return Cr(e,function(t,n){t=N(t,n),e.point(t[0],t[1])})})(t)}function j(t,n,e,r,i,o,a,u,c,s,l,f,h,p){var d=a-t,g=u-n,v=d*d+g*g;if(4*T<v&&h--){var y=r+s,m=i+l,x=o+f,b=Math.sqrt(y*y+m*m+x*x),w=Math.asin(x/=b),M=H(H(x)-1)<Mt||H(e-c)<Mt?(e+c)/2:Math.atan2(m,y),_=N(M,w),k=_[0],S=_[1],C=k-t,A=S-n,E=g*C-d*A;(T<E*E/v||.3<H((d*C+g*A)/v-.5)||r*s+i*l+o*f<L)&&(j(t,n,e,r,i,o,k,S,M,y/=b,m/=b,x,h,p),p.point(k,S),j(k,S,M,y,m,x,a,u,c,s,l,f,h,p))}}return n.precision=function(t){return arguments.length?(w=0<(T=t*t)&&16,n):Math.sqrt(T)},n}function Sr(t){this.stream=t}function Cr(t,n){return{point:n,sphere:function(){t.sphere()},lineStart:function(){t.lineStart()},lineEnd:function(){t.lineEnd()},polygonStart:function(){t.polygonStart()},polygonEnd:function(){t.polygonEnd()}}}function Ar(t){return Er(function(){return t})()}function Er(t){var e,n,r,i,o,a,u=kr(function(t,n){return[(t=e(t,n))[0]*c+i,o-t[1]*c]}),c=150,s=480,l=250,f=0,h=0,p=0,d=0,g=0,v=tr,y=D,m=null,x=null;function b(t){return[(t=r(t[0]*Et,t[1]*Et))[0]*c+i,o-t[1]*c]}function w(t){return(t=r.invert((t[0]-i)/c,(o-t[1])/c))&&[t[0]*Nt,t[1]*Nt]}function M(){r=Be(n=jr(p,d,g),e);var t=e(f,h);return i=s-t[0]*c,o=l+t[1]*c,_()}function _(){return a&&(a.valid=!1,a=null),b}return b.stream=function(t){return a&&(a.valid=!1),(a=Nr(v(n,u(y(t))))).valid=!0,a},b.clipAngle=function(t){return arguments.length?(v=null==t?(m=t,tr):function(i){var C=Math.cos(i),p=0<C,d=H(C)>Mt;return Xe(g,function(u){var c,s,l,f,h;return{lineStart:function(){f=l=!1,h=1},point:function(t,n){var e,r=[t,n],i=g(t,n),o=p?i?0:y(t,n):i?y(t+(t<0?kt:-kt),n):0;if(!c&&(f=l=i)&&u.lineStart(),i!==l&&(e=v(c,r),(Pe(c,e)||Pe(r,e))&&(r[0]+=Mt,r[1]+=Mt,i=g(r[0],r[1]))),i!==l)h=0,i?(u.lineStart(),e=v(r,c),u.point(e[0],e[1])):(e=v(c,r),u.point(e[0],e[1]),u.lineEnd()),c=e;else if(d&&c&&p^i){var a;o&s||!(a=v(r,c,!0))||(h=0,p?(u.lineStart(),u.point(a[0][0],a[0][1]),u.point(a[1][0],a[1][1]),u.lineEnd()):(u.point(a[1][0],a[1][1]),u.lineEnd(),u.lineStart(),u.point(a[0][0],a[0][1])))}!i||c&&Pe(c,r)||u.point(r[0],r[1]),c=r,l=i,s=o},lineEnd:function(){l&&u.lineEnd(),c=null},clean:function(){return h|(f&&l)<<1}}},Dr(i,6*Et),p?[0,-i]:[-kt,i-kt]);function g(t,n){return Math.cos(t)*Math.cos(n)>C}function v(t,n,e){var r=[1,0,0],i=He(Le(t),Le(n)),o=je(i,i),a=i[0],u=o-a*a;if(!u)return!e&&t;var c=C*o/u,s=-C*a/u,l=He(r,i),f=Oe(r,c);ze(f,Oe(i,s));var h=l,p=je(f,h),d=je(h,h),g=p*p-d*(je(f,f)-1);if(!(g<0)){var v=Math.sqrt(g),y=Oe(h,(-p-v)/d);if(ze(y,f),y=qe(y),!e)return y;var m,x=t[0],b=n[0],w=t[1],M=n[1];b<x&&(m=x,x=b,b=m);var _=b-x,k=H(_-kt)<Mt;if(!k&&M<w&&(m=w,w=M,M=m),k||_<Mt?k?0<w+M^y[1]<(H(y[0]-x)<Mt?w:M):w<=y[1]&&y[1]<=M:kt<_^(x<=y[0]&&y[0]<=b)){var S=Oe(h,(-p+v)/d);return ze(S,f),[y,qe(S)]}}}function y(t,n){var e=p?i:kt-i,r=0;return t<-e?r|=1:e<t&&(r|=2),n<-e?r|=4:e<n&&(r|=8),r}}((m=+t)*Et),_()):m},b.clipExtent=function(t){return arguments.length?(y=(x=t)?rr(t[0][0],t[0][1],t[1][0],t[1][1]):D,_()):x},b.scale=function(t){return arguments.length?(c=+t,M()):c},b.translate=function(t){return arguments.length?(s=+t[0],l=+t[1],M()):[s,l]},b.center=function(t){return arguments.length?(f=t[0]%360*Et,h=t[1]%360*Et,M()):[f*Nt,h*Nt]},b.rotate=function(t){return arguments.length?(p=t[0]%360*Et,d=t[1]%360*Et,g=2<t.length?t[2]%360*Et:0,M()):[p*Nt,d*Nt,g*Nt]},z.rebind(b,u,"precision"),function(){return e=t.apply(this,arguments),b.invert=e.invert&&w,M()}}function Nr(e){return Cr(e,function(t,n){e.point(t*Et,n*Et)})}function Tr(t,n){return[t,n]}function Lr(t,n){return[kt<t?t-St:t<-kt?t+St:t,n]}function jr(t,n,e){return t?n||e?Be(zr(t),Or(n,e)):zr(t):n||e?Or(n,e):Lr}function Hr(e){return function(t,n){return[kt<(t+=e)?t-St:t<-kt?t+St:t,n]}}function zr(t){var n=Hr(t);return n.invert=Hr(-t),n}function Or(t,n){var u=Math.cos(t),c=Math.sin(t),s=Math.cos(n),l=Math.sin(n);function e(t,n){var e=Math.cos(n),r=Math.cos(t)*e,i=Math.sin(t)*e,o=Math.sin(n),a=o*u+r*c;return[Math.atan2(i*s-a*l,r*u-o*c),Ht(a*s+i*l)]}return e.invert=function(t,n){var e=Math.cos(n),r=Math.cos(t)*e,i=Math.sin(t)*e,o=Math.sin(n),a=o*s-i*l;return[Math.atan2(i*s+o*l,r*u+a*c),Ht(a*u-r*c)]},e}function Dr(u,c){var s=Math.cos(u),l=Math.sin(u);return function(t,n,e,r){var i=e*c;null!=t?(t=qr(s,t),n=qr(s,n),(0<e?t<n:n<t)&&(t+=e*St)):(t=u+e*St,n=u-.5*i);for(var o,a=t;0<e?n<a:a<n;a-=i)r.point((o=qe([s,-l*Math.cos(a),-l*Math.sin(a)]))[0],o[1])}}function qr(t,n){var e=Le(n);e[0]-=t,De(e);var r=jt(-e[1]);return((-e[2]<0?-r:r)+2*Math.PI-Mt)%(2*Math.PI)}function Pr(t,n,e){var r=z.range(t,n-Mt,e).concat(n);return function(n){return r.map(function(t){return[n,t]})}}function Rr(t,n,e){var r=z.range(t,n-Mt,e).concat(n);return function(n){return r.map(function(t){return[t,n]})}}function Fr(t){return t.source}function Gr(t){return t.target}z.geo.path=function(){var r,n,i,e,o,a=4.5;function u(t){return t&&("function"==typeof a&&e.pointRadius(+a.apply(this,arguments)),o&&o.valid||(o=i(e)),z.geo.stream(t,o)),e.result()}function c(){return o=null,u}return u.area=function(t){return ar=0,z.geo.stream(t,i(hr)),ar},u.centroid=function(t){return xe=be=we=Me=_e=ke=Se=Ce=Ae=0,z.geo.stream(t,i(mr)),Ae?[Se/Ae,Ce/Ae]:ke?[Me/ke,_e/ke]:we?[xe/we,be/we]:[NaN,NaN]},u.bounds=function(t){return lr=fr=-(cr=sr=1/0),z.geo.stream(t,i(dr)),[[cr,sr],[lr,fr]]},u.projection=function(t){return arguments.length?(i=(r=t)?t.stream||(e=t,n=kr(function(t,n){return e([t*Nt,n*Nt])}),function(t){return Nr(n(t))}):D,c()):r;var e,n},u.context=function(t){return arguments.length?(e=null==(n=t)?new gr:new _r(t),"function"!=typeof a&&e.pointRadius(a),c()):n},u.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(e.pointRadius(+t),+t),u):a},u.projection(z.geo.albersUsa()).context(null)},z.geo.transform=function(r){return{stream:function(t){var n=new Sr(t);for(var e in r)n[e]=r[e];return n}}},Sr.prototype={point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},z.geo.projection=Ar,z.geo.projectionMutator=Er,(z.geo.equirectangular=function(){return Ar(Tr)}).raw=Tr.invert=Tr,z.geo.rotation=function(n){function t(t){return(t=n(t[0]*Et,t[1]*Et))[0]*=Nt,t[1]*=Nt,t}return n=jr(n[0]%360*Et,n[1]*Et,2<n.length?n[2]*Et:0),t.invert=function(t){return(t=n.invert(t[0]*Et,t[1]*Et))[0]*=Nt,t[1]*=Nt,t},t},Lr.invert=Tr,z.geo.circle=function(){var n,i,o=[0,0],e=6;function r(){var t="function"==typeof o?o.apply(this,arguments):o,e=jr(-t[0]*Et,-t[1]*Et,0).invert,r=[];return i(null,null,1,{point:function(t,n){r.push(t=e(t,n)),t[0]*=Nt,t[1]*=Nt}}),{type:"Polygon",coordinates:[r]}}return r.origin=function(t){return arguments.length?(o=t,r):o},r.angle=function(t){return arguments.length?(i=Dr((n=+t)*Et,e*Et),r):n},r.precision=function(t){return arguments.length?(i=Dr(n*Et,(e=+t)*Et),r):e},r.angle(90)},z.geo.distance=function(t,n){var e,r=(n[0]-t[0])*Et,i=t[1]*Et,o=n[1]*Et,a=Math.sin(r),u=Math.cos(r),c=Math.sin(i),s=Math.cos(i),l=Math.sin(o),f=Math.cos(o);return Math.atan2(Math.sqrt((e=f*a)*e+(e=s*l-c*f*u)*e),c*l+s*f*u)},z.geo.graticule=function(){var n,e,r,i,o,a,u,c,s,l,f,h,p=10,d=p,g=90,v=360,y=2.5;function m(){return{type:"MultiLineString",coordinates:t()}}function t(){return z.range(Math.ceil(i/g)*g,r,g).map(f).concat(z.range(Math.ceil(c/v)*v,u,v).map(h)).concat(z.range(Math.ceil(e/p)*p,n,p).filter(function(t){return H(t%g)>Mt}).map(s)).concat(z.range(Math.ceil(a/d)*d,o,d).filter(function(t){return H(t%v)>Mt}).map(l))}return m.lines=function(){return t().map(function(t){return{type:"LineString",coordinates:t}})},m.outline=function(){return{type:"Polygon",coordinates:[f(i).concat(h(u).slice(1),f(r).reverse().slice(1),h(c).reverse().slice(1))]}},m.extent=function(t){return arguments.length?m.majorExtent(t).minorExtent(t):m.minorExtent()},m.majorExtent=function(t){return arguments.length?(i=+t[0][0],r=+t[1][0],c=+t[0][1],u=+t[1][1],r<i&&(t=i,i=r,r=t),u<c&&(t=c,c=u,u=t),m.precision(y)):[[i,c],[r,u]]},m.minorExtent=function(t){return arguments.length?(e=+t[0][0],n=+t[1][0],a=+t[0][1],o=+t[1][1],n<e&&(t=e,e=n,n=t),o<a&&(t=a,a=o,o=t),m.precision(y)):[[e,a],[n,o]]},m.step=function(t){return arguments.length?m.majorStep(t).minorStep(t):m.minorStep()},m.majorStep=function(t){return arguments.length?(g=+t[0],v=+t[1],m):[g,v]},m.minorStep=function(t){return arguments.length?(p=+t[0],d=+t[1],m):[p,d]},m.precision=function(t){return arguments.length?(y=+t,s=Pr(a,o,90),l=Rr(e,n,y),f=Pr(c,u,90),h=Rr(i,r,y),m):y},m.majorExtent([[-180,-90+Mt],[180,90-Mt]]).minorExtent([[-180,-80-Mt],[180,80+Mt]])},z.geo.greatArc=function(){var n,e,r=Fr,i=Gr;function o(){return{type:"LineString",coordinates:[n||r.apply(this,arguments),e||i.apply(this,arguments)]}}return o.distance=function(){return z.geo.distance(n||r.apply(this,arguments),e||i.apply(this,arguments))},o.source=function(t){return arguments.length?(n="function"==typeof(r=t)?null:t,o):r},o.target=function(t){return arguments.length?(e="function"==typeof(i=t)?null:t,o):i},o.precision=function(){return arguments.length?o:0},o},z.geo.interpolate=function(t,n){return e=t[0]*Et,r=t[1]*Et,i=n[0]*Et,o=n[1]*Et,a=Math.cos(r),u=Math.sin(r),c=Math.cos(o),s=Math.sin(o),l=a*Math.cos(e),f=a*Math.sin(e),h=c*Math.cos(i),p=c*Math.sin(i),d=2*Math.asin(Math.sqrt(Ot(o-r)+a*c*Ot(i-e))),g=1/Math.sin(d),(v=d?function(t){var n=Math.sin(t*=d)*g,e=Math.sin(d-t)*g,r=e*l+n*h,i=e*f+n*p,o=e*u+n*s;return[Math.atan2(i,r)*Nt,Math.atan2(o,Math.sqrt(r*r+i*i))*Nt]}:function(){return[e*Nt,r*Nt]}).distance=d,v;var e,r,i,o,a,u,c,s,l,f,h,p,d,g,v},z.geo.length=function(t){return yr=0,z.geo.stream(t,Ir),yr};var Ir={sphere:T,point:T,lineStart:function(){var a,u,c;function e(t,n){var e=Math.sin(n*=Et),r=Math.cos(n),i=H((t*=Et)-a),o=Math.cos(i);yr+=Math.atan2(Math.sqrt((i=r*Math.sin(i))*i+(i=c*e-u*r*o)*i),u*e+c*r*o),a=t,u=e,c=r}Ir.point=function(t,n){a=t*Et,u=Math.sin(n*=Et),c=Math.cos(n),Ir.point=e},Ir.lineEnd=function(){Ir.point=Ir.lineEnd=T}},lineEnd:T,polygonStart:T,polygonEnd:T};function Ur(o,a){function t(t,n){var e=Math.cos(t),r=Math.cos(n),i=o(e*r);return[i*r*Math.sin(t),i*Math.sin(n)]}return t.invert=function(t,n){var e=Math.sqrt(t*t+n*n),r=a(e),i=Math.sin(r),o=Math.cos(r);return[Math.atan2(t*i,e*o),Math.asin(e&&n*i/e)]},t}var Wr=Ur(function(t){return Math.sqrt(2/(1+t))},function(t){return 2*Math.asin(t/2)});(z.geo.azimuthalEqualArea=function(){return Ar(Wr)}).raw=Wr;var Br=Ur(function(t){var n=Math.acos(t);return n&&n/Math.sin(n)},D);function Yr(t,n){var e=Math.cos(t),r=function(t){return Math.tan(kt/4+t/2)},i=t===n?Math.sin(t):Math.log(e/Math.cos(n))/Math.log(r(n)/r(t)),o=e*Math.pow(r(t),i)/i;if(!i)return Zr;function a(t,n){0<o?n<-At+Mt&&(n=-At+Mt):At-Mt<n&&(n=At-Mt);var e=o/Math.pow(r(n),i);return[e*Math.sin(i*t),o-e*Math.cos(i*t)]}return a.invert=function(t,n){var e=o-n,r=Tt(i)*Math.sqrt(t*t+e*e);return[Math.atan2(t,e)/i,2*Math.atan(Math.pow(o/r,1/i))-At]},a}function $r(t,n){var e=Math.cos(t),r=t===n?Math.sin(t):(e-Math.cos(n))/(n-t),i=e/r+t;if(H(r)<Mt)return Tr;function o(t,n){var e=i-n;return[e*Math.sin(r*t),i-e*Math.cos(r*t)]}return o.invert=function(t,n){var e=i-n;return[Math.atan2(t,e)/r,i-Tt(r)*Math.sqrt(t*t+e*e)]},o}(z.geo.azimuthalEquidistant=function(){return Ar(Br)}).raw=Br,(z.geo.conicConformal=function(){return ir(Yr)}).raw=Yr,(z.geo.conicEquidistant=function(){return ir($r)}).raw=$r;var Vr=Ur(function(t){return 1/t},Math.atan);function Zr(t,n){return[t,Math.log(Math.tan(kt/4+n/2))]}function Xr(t){var i,o=Ar(t),a=o.scale,u=o.translate,c=o.clipExtent;return o.scale=function(){var t=a.apply(o,arguments);return t===o?i?o.clipExtent(null):o:t},o.translate=function(){var t=u.apply(o,arguments);return t===o?i?o.clipExtent(null):o:t},o.clipExtent=function(t){var n=c.apply(o,arguments);if(n===o){if(i=null==t){var e=kt*a(),r=u();c([[r[0]-e,r[1]-e],[r[0]+e,r[1]+e]])}}else i&&(n=null);return n},o.clipExtent(null)}(z.geo.gnomonic=function(){return Ar(Vr)}).raw=Vr,Zr.invert=function(t,n){return[t,2*Math.atan(Math.exp(n))-At]},(z.geo.mercator=function(){return Xr(Zr)}).raw=Zr;var Jr=Ur(function(){return 1},Math.asin);(z.geo.orthographic=function(){return Ar(Jr)}).raw=Jr;var Kr=Ur(function(t){return 1/(1+t)},function(t){return 2*Math.atan(t)});function Qr(t,n){return[Math.log(Math.tan(kt/4+n/2)),-t]}function ti(t){return t[0]}function ni(t){return t[1]}function ei(t){for(var n=t.length,e=[0,1],r=2,i=2;i<n;i++){for(;1<r&&Lt(t[e[r-2]],t[e[r-1]],t[i])<=0;)--r;e[r++]=i}return e.slice(0,r)}function ri(t,n){return t[0]-n[0]||t[1]-n[1]}(z.geo.stereographic=function(){return Ar(Kr)}).raw=Kr,Qr.invert=function(t,n){return[-n,2*Math.atan(Math.exp(t))-At]},(z.geo.transverseMercator=function(){var t=Xr(Qr),n=t.center,e=t.rotate;return t.center=function(t){return t?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return t?e([t[0],t[1],2<t.length?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90])}).raw=Qr,z.geom={},z.geom.hull=function(t){var h=ti,p=ni;if(arguments.length)return n(t);function n(t){if(t.length<3)return[];var n,e=vn(h),r=vn(p),i=t.length,o=[],a=[];for(n=0;n<i;n++)o.push([+e.call(this,t[n],n),+r.call(this,t[n],n),n]);for(o.sort(ri),n=0;n<i;n++)a.push([o[n][0],-o[n][1]]);var u=ei(o),c=ei(a),s=c[0]===u[0],l=c[c.length-1]===u[u.length-1],f=[];for(n=u.length-1;0<=n;--n)f.push(t[o[u[n]][2]]);for(n=+s;n<c.length-l;++n)f.push(t[o[c[n]][2]]);return f}return n.x=function(t){return arguments.length?(h=t,n):h},n.y=function(t){return arguments.length?(p=t,n):p},n},z.geom.polygon=function(t){return G(t,ii),t};var ii=z.geom.polygon.prototype=[];function oi(t,n,e){return(e[0]-n[0])*(t[1]-n[1])<(e[1]-n[1])*(t[0]-n[0])}function ai(t,n,e,r){var i=t[0],o=e[0],a=n[0]-i,u=r[0]-o,c=t[1],s=e[1],l=n[1]-c,f=r[1]-s,h=(u*(c-s)-f*(i-o))/(f*a-u*l);return[i+h*a,c+h*l]}function ui(t){var n=t[0],e=t[t.length-1];return!(n[0]-e[0]||n[1]-e[1])}ii.area=function(){for(var t,n=-1,e=this.length,r=this[e-1],i=0;++n<e;)t=r,r=this[n],i+=t[1]*r[0]-t[0]*r[1];return.5*i},ii.centroid=function(t){var n,e,r=-1,i=this.length,o=0,a=0,u=this[i-1];for(arguments.length||(t=-1/(6*this.area()));++r<i;)n=u,u=this[r],e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o*t,a*t]},ii.clip=function(t){for(var n,e,r,i,o,a,u=ui(t),c=-1,s=this.length-ui(this),l=this[s-1];++c<s;){for(n=t.slice(),t.length=0,i=this[c],o=n[(r=n.length-u)-1],e=-1;++e<r;)oi(a=n[e],l,i)?(oi(o,l,i)||t.push(ai(o,a,l,i)),t.push(a)):oi(o,l,i)&&t.push(ai(o,a,l,i)),o=a;u&&t.push(t[0]),l=i}return t};var ci,si,li,fi,hi,pi=[],di=[];function gi(){Hi(this),this.edge=this.site=this.circle=null}function vi(t){var n=pi.pop()||new gi;return n.site=t,n}function yi(t){Ci(t),li.remove(t),pi.push(t),Hi(t)}function mi(t){var n=t.circle,e=n.x,r=n.cy,i={x:e,y:r},o=t.P,a=t.N,u=[t];yi(t);for(var c=o;c.circle&&H(e-c.circle.x)<Mt&&H(r-c.circle.cy)<Mt;)o=c.P,u.unshift(c),yi(c),c=o;u.unshift(c),Ci(c);for(var s=a;s.circle&&H(e-s.circle.x)<Mt&&H(r-s.circle.cy)<Mt;)a=s.N,u.push(s),yi(s),s=a;u.push(s),Ci(s);var l,f=u.length;for(l=1;l<f;++l)s=u[l],c=u[l-1],Ti(s.edge,c.site,s.site,i);c=u[0],(s=u[f-1]).edge=Ni(c.site,s.site,null,i),Si(c),Si(s)}function xi(t){for(var n,e,r,i,o=t.x,a=t.y,u=li._;u;)if(r=bi(u,a)-o,Mt<r)u=u.L;else{if(i=o-wi(u,a),!(Mt<i)){-Mt<r?(n=u.P,e=u):-Mt<i?e=(n=u).N:n=e=u;break}if(!u.R){n=u;break}u=u.R}var c=vi(t);if(li.insert(n,c),n||e){if(n===e)return Ci(n),e=vi(n.site),li.insert(c,e),c.edge=e.edge=Ni(n.site,c.site),Si(n),void Si(e);if(e){Ci(n),Ci(e);var s=n.site,l=s.x,f=s.y,h=t.x-l,p=t.y-f,d=e.site,g=d.x-l,v=d.y-f,y=2*(h*v-p*g),m=h*h+p*p,x=g*g+v*v,b={x:(v*m-p*x)/y+l,y:(h*x-g*m)/y+f};Ti(e.edge,s,d,b),c.edge=Ni(s,t,null,b),e.edge=Ni(t,d,null,b),Si(n),Si(e)}else c.edge=Ni(n.site,c.site)}}function bi(t,n){var e=t.site,r=e.x,i=e.y,o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(e=a.site).x,c=e.y,s=c-n;if(!s)return u;var l=u-r,f=1/o-1/s,h=l/s;return f?(-h+Math.sqrt(h*h-2*f*(l*l/(-2*s)-c+s/2+i-o/2)))/f+r:(r+u)/2}function wi(t,n){var e=t.N;if(e)return bi(e,n);var r=t.site;return r.y===n?r.x:1/0}function Mi(t){this.site=t,this.edges=[]}function _i(t,n){return n.angle-t.angle}function ki(){Hi(this),this.x=this.y=this.arc=this.site=this.cy=null}function Si(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i.x,u=i.y,c=r.x-a,s=r.y-u,l=o.x-a,f=2*(c*(v=o.y-u)-s*l);if(!(-_t<=f)){var h=c*c+s*s,p=l*l+v*v,d=(v*h-s*p)/f,g=(c*p-l*h)/f,v=g+u,y=di.pop()||new ki;y.arc=t,y.site=i,y.x=d+a,y.y=v+Math.sqrt(d*d+g*g),y.cy=v,t.circle=y;for(var m=null,x=hi._;x;)if(y.y<x.y||y.y===x.y&&y.x<=x.x){if(!x.L){m=x.P;break}x=x.L}else{if(!x.R){m=x;break}x=x.R}hi.insert(m,y),m||(fi=y)}}}}function Ci(t){var n=t.circle;n&&(n.P||(fi=n.N),hi.remove(n),di.push(n),Hi(n),t.circle=null)}function Ai(t,n){var e=t.b;if(e)return!0;var r,i,o=t.a,a=n[0][0],u=n[1][0],c=n[0][1],s=n[1][1],l=t.l,f=t.r,h=l.x,p=l.y,d=f.x,g=f.y,v=(h+d)/2,y=(p+g)/2;if(g===p){if(v<a||u<=v)return;if(d<h){if(o){if(o.y>=s)return}else o={x:v,y:c};e={x:v,y:s}}else{if(o){if(o.y<c)return}else o={x:v,y:s};e={x:v,y:c}}}else if(i=y-(r=(h-d)/(g-p))*v,r<-1||1<r)if(d<h){if(o){if(o.y>=s)return}else o={x:(c-i)/r,y:c};e={x:(s-i)/r,y:s}}else{if(o){if(o.y<c)return}else o={x:(s-i)/r,y:s};e={x:(c-i)/r,y:c}}else if(p<g){if(o){if(o.x>=u)return}else o={x:a,y:r*a+i};e={x:u,y:r*u+i}}else{if(o){if(o.x<a)return}else o={x:u,y:r*u+i};e={x:a,y:r*a+i}}return t.a=o,t.b=e,!0}function Ei(t,n){this.l=t,this.r=n,this.a=this.b=null}function Ni(t,n,e,r){var i=new Ei(t,n);return ci.push(i),e&&Ti(i,t,n,e),r&&Ti(i,n,t,r),si[t.i].edges.push(new Li(i,t,n)),si[n.i].edges.push(new Li(i,n,t)),i}function Ti(t,n,e,r){t.a||t.b?t.l===e?t.b=r:t.a=r:(t.a=r,t.l=n,t.r=e)}function Li(t,n,e){var r=t.a,i=t.b;this.edge=t,this.site=n,this.angle=e?Math.atan2(e.y-n.y,e.x-n.x):t.l===n?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function ji(){this._=null}function Hi(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function zi(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function Oi(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function Di(t){for(;t.L;)t=t.L;return t}function qi(t,n){var e,r,i,o=t.sort(Pi).pop();for(ci=[],si=new Array(t.length),li=new ji,hi=new ji;;)if(i=fi,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===e&&o.y===r||(si[o.i]=new Mi(o),xi(o),e=o.x,r=o.y),o=t.pop();else{if(!i)break;mi(i.arc)}n&&(function(t){for(var n,e=ci,r=nr(t[0][0],t[0][1],t[1][0],t[1][1]),i=e.length;i--;)(!Ai(n=e[i],t)||!r(n)||H(n.a.x-n.b.x)<Mt&&H(n.a.y-n.b.y)<Mt)&&(n.a=n.b=null,e.splice(i,1))}(n),function(t){for(var n,e,r,i,o,a,u,c,s,l,f=t[0][0],h=t[1][0],p=t[0][1],d=t[1][1],g=si,v=g.length;v--;)if((o=g[v])&&o.prepare())for(c=(u=o.edges).length,a=0;a<c;)r=(l=u[a].end()).x,i=l.y,n=(s=u[++a%c].start()).x,e=s.y,(H(r-n)>Mt||H(i-e)>Mt)&&(u.splice(a,0,new Li((y=o.site,m=l,x=H(r-f)<Mt&&Mt<d-i?{x:f,y:H(n-f)<Mt?e:d}:H(i-d)<Mt&&Mt<h-r?{x:H(e-d)<Mt?n:h,y:d}:H(r-h)<Mt&&Mt<i-p?{x:h,y:H(n-h)<Mt?e:p}:H(i-p)<Mt&&Mt<r-f?{x:H(e-p)<Mt?n:f,y:p}:null,b=void 0,b=new Ei(y,null),b.a=m,b.b=x,ci.push(b),b),o.site,null)),++c);var y,m,x,b}(n));var a={cells:si,edges:ci};return li=hi=ci=si=null,a}function Pi(t,n){return n.y-t.y||n.x-t.x}Mi.prototype.prepare=function(){for(var t,n=this.edges,e=n.length;e--;)(t=n[e].edge).b&&t.a||n.splice(e,1);return n.sort(_i),n.length},Li.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},ji.prototype={insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=Di(this._),n.P=null,(n.N=t).P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(zi(this,e),e=(t=e).U),e.C=!1,r.C=!0,Oi(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(Oi(this,e),e=(t=e).U),e.C=!1,r.C=!0,zi(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?Di(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,((e.L=o).U=e)!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,(e.R=a).U=e):(e.U=i,t=(i=e).R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,zi(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,Oi(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,zi(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,Oi(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,zi(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,Oi(this,i),t=this._;break}n.C=!0,i=(t=i).U}while(!t.C);t&&(t.C=!1)}}},z.geom.voronoi=function(t){var n=ti,e=ni,r=n,i=e,l=Ri;if(t)return o(t);function o(i){var o=new Array(i.length),a=l[0][0],u=l[0][1],c=l[1][0],s=l[1][1];return qi(f(i),l).cells.forEach(function(t,n){var e=t.edges,r=t.site;(o[n]=e.length?e.map(function(t){var n=t.start();return[n.x,n.y]}):r.x>=a&&r.x<=c&&r.y>=u&&r.y<=s?[[a,s],[c,s],[c,u],[a,u]]:[]).point=i[n]}),o}function f(t){return t.map(function(t,n){return{x:Math.round(r(t,n)/Mt)*Mt,y:Math.round(i(t,n)/Mt)*Mt,i:n}})}return o.links=function(n){return qi(f(n)).edges.filter(function(t){return t.l&&t.r}).map(function(t){return{source:n[t.l.i],target:n[t.r.i]}})},o.triangles=function(h){var p=[];return qi(f(h)).cells.forEach(function(t,n){for(var e,r,i,o,a=t.site,u=t.edges.sort(_i),c=-1,s=u.length,l=u[s-1].edge,f=l.l===a?l.r:l.l;++c<s;)l,e=f,f=(l=u[c].edge).l===a?l.r:l.l,n<e.i&&n<f.i&&(i=e,o=f,((r=a).x-o.x)*(i.y-r.y)-(r.x-i.x)*(o.y-r.y)<0)&&p.push([h[n],h[e.i],h[f.i]])}),p},o.x=function(t){return arguments.length?(r=vn(n=t),o):n},o.y=function(t){return arguments.length?(i=vn(e=t),o):e},o.clipExtent=function(t){return arguments.length?(l=null==t?Ri:t,o):l===Ri?null:l},o.size=function(t){return arguments.length?o.clipExtent(t&&[[0,0],t]):l===Ri?null:l&&l[1]},o};var Ri=[[-1e6,-1e6],[1e6,1e6]];function Fi(t){return t.x}function Gi(t){return t.y}function Ii(t,n){t=z.rgb(t),n=z.rgb(n);var e=t.r,r=t.g,i=t.b,o=n.r-e,a=n.g-r,u=n.b-i;return function(t){return"#"+sn(Math.round(e+o*t))+sn(Math.round(r+a*t))+sn(Math.round(i+u*t))}}function Ui(t,n){var e,r={},i={};for(e in t)e in n?r[e]=Vi(t[e],n[e]):i[e]=t[e];for(e in n)e in t||(i[e]=n[e]);return function(t){for(e in r)i[e]=r[e](t);return i}}function Wi(n,e){return n=+n,e=+e,function(t){return n*(1-t)+e*t}}function Bi(t,r){var n,e,i,o=Yi.lastIndex=$i.lastIndex=0,a=-1,u=[],c=[];for(t+="",r+="";(n=Yi.exec(t))&&(e=$i.exec(r));)(i=e.index)>o&&(i=r.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(n=n[0])===(e=e[0])?u[a]?u[a]+=e:u[++a]=e:(u[++a]=null,c.push({i:a,x:Wi(n,e)})),o=$i.lastIndex;return o<r.length&&(i=r.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?(r=c[0].x,function(t){return r(t)+""}):function(){return r}:(r=c.length,function(t){for(var n,e=0;e<r;++e)u[(n=c[e]).i]=n.x(t);return u.join("")})}z.geom.delaunay=function(t){return z.geom.voronoi().triangles(t)},z.geom.quadtree=function(t,m,x,b,w){var M,_=ti,S=ni;if(M=arguments.length)return _=Fi,S=Gi,3===M&&(w=x,b=m,x=m=0),n(t);function n(t){var n,e,r,i,o,a,u,c,s,l=vn(_),f=vn(S);if(null!=m)a=m,u=x,c=b,s=w;else if(c=s=-(a=u=1/0),e=[],r=[],o=t.length,M)for(i=0;i<o;++i)(n=t[i]).x<a&&(a=n.x),n.y<u&&(u=n.y),n.x>c&&(c=n.x),n.y>s&&(s=n.y),e.push(n.x),r.push(n.y);else for(i=0;i<o;++i){var h=+l(n=t[i],i),p=+f(n,i);h<a&&(a=h),p<u&&(u=p),c<h&&(c=h),s<p&&(s=p),e.push(h),r.push(p)}var d=c-a,g=s-u;function v(t,n,e,r,i,o,a,u){if(!isNaN(e)&&!isNaN(r))if(t.leaf){var c=t.x,s=t.y;if(null!=c)if(H(c-e)+H(s-r)<.01)y(t,n,e,r,i,o,a,u);else{var l=t.point;t.x=t.y=t.point=null,y(t,l,c,s,i,o,a,u),y(t,n,e,r,i,o,a,u)}else t.x=e,t.y=r,t.point=n}else y(t,n,e,r,i,o,a,u)}function y(t,n,e,r,i,o,a,u){var c=.5*(i+a),s=.5*(o+u),l=c<=e,f=s<=r,h=f<<1|l;t.leaf=!1,l?i=c:a=c,f?o=s:u=s,v(t=t.nodes[h]||(t.nodes[h]={leaf:!0,nodes:[],point:null,x:null,y:null}),n,e,r,i,o,a,u)}g<d?s=u+d:c=a+g;var k={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(t){v(k,t,+l(t,++i),+f(t,i),a,u,c,s)}};if(k.visit=function(t){!function t(n,e,r,i,o,a){if(!n(e,r,i,o,a)){var u=.5*(r+o),c=.5*(i+a),s=e.nodes;s[0]&&t(n,s[0],r,i,u,c),s[1]&&t(n,s[1],u,i,o,c),s[2]&&t(n,s[2],r,c,u,a),s[3]&&t(n,s[3],u,c,o,a)}}(t,k,a,u,c,s)},k.find=function(t){return n=k,v=t[0],y=t[1],_=1/0,function t(n,e,r,i,o){if(!(b<e||w<r||i<m||o<x)){if(a=n.point){var a,u=v-n.x,c=y-n.y,s=u*u+c*c;if(s<_){var l=Math.sqrt(_=s);m=v-l,x=y-l,b=v+l,w=y+l,M=a}}for(var f=n.nodes,h=.5*(e+i),p=.5*(r+o),d=(p<=y)<<1|h<=v,g=d+4;d<g;++d)if(n=f[3&d])switch(3&d){case 0:t(n,e,r,h,p);break;case 1:t(n,h,r,i,p);break;case 2:t(n,e,p,h,o);break;case 3:t(n,h,p,i,o)}}}(n,m=a,x=u,b=c,w=s),M;var n,v,y,m,x,b,w,M,_},i=-1,null==m){for(;++i<o;)v(k,t[i],e[i],r[i],a,u,c,s);--i}else t.forEach(k.add);return e=r=t=n=null,k}return n.x=function(t){return arguments.length?(_=t,n):_},n.y=function(t){return arguments.length?(S=t,n):S},n.extent=function(t){return arguments.length?(null==t?m=x=b=w=null:(m=+t[0][0],x=+t[0][1],b=+t[1][0],w=+t[1][1]),n):null==m?null:[[m,x],[b,w]]},n.size=function(t){return arguments.length?(null==t?m=x=b=w=null:(m=x=0,b=+t[0],w=+t[1]),n):null==m?null:[b-m,w-x]},n},z.interpolateRgb=Ii,z.interpolateObject=Ui,z.interpolateNumber=Wi,z.interpolateString=Bi;var Yi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$i=new RegExp(Yi.source,"g");function Vi(t,n){for(var e,r=z.interpolators.length;0<=--r&&!(e=z.interpolators[r](t,n)););return e}function Zi(t,n){var e,r=[],i=[],o=t.length,a=n.length,u=Math.min(t.length,n.length);for(e=0;e<u;++e)r.push(Vi(t[e],n[e]));for(;e<o;++e)i[e]=t[e];for(;e<a;++e)i[e]=n[e];return function(t){for(e=0;e<u;++e)i[e]=r[e](t);return i}}z.interpolate=Vi,z.interpolators=[function(t,n){var e=typeof n;return("string"===e?gn.has(n.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(n)?Ii:Bi:n instanceof Ft?Ii:Array.isArray(n)?Zi:"object"===e&&isNaN(n)?Ui:Wi)(t,n)}],z.interpolateArray=Zi;var Xi=function(){return D},Ji=z.map({linear:Xi,poly:function(n){return function(t){return Math.pow(t,n)}},quad:function(){return no},cubic:function(){return eo},sin:function(){return io},exp:function(){return oo},circle:function(){return ao},elastic:function(n,e){var r;arguments.length<2&&(e=.45);arguments.length?r=e/St*Math.asin(1/n):(n=1,r=e/4);return function(t){return 1+n*Math.pow(2,-10*t)*Math.sin((t-r)*St/e)}},back:function(n){n||(n=1.70158);return function(t){return t*t*((n+1)*t-n)}},bounce:function(){return uo}}),Ki=z.map({in:D,out:Qi,"in-out":to,"out-in":function(t){return to(Qi(t))}});function Qi(n){return function(t){return 1-n(1-t)}}function to(n){return function(t){return.5*(t<.5?n(2*t):2-n(2-2*t))}}function no(t){return t*t}function eo(t){return t*t*t}function ro(t){if(t<=0)return 0;if(1<=t)return 1;var n=t*t,e=n*t;return 4*(t<.5?e:3*(t-n)+e-.75)}function io(t){return 1-Math.cos(t*At)}function oo(t){return Math.pow(2,10*(t-1))}function ao(t){return 1-Math.sqrt(1-t*t)}function uo(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function co(n,e){return e-=n,function(t){return Math.round(n+e*t)}}function so(t){var n,e,r,i=[t.a,t.b],o=[t.c,t.d],a=fo(i),u=lo(i,o),c=fo(((n=o)[0]+=(r=-u)*(e=i)[0],n[1]+=r*e[1],n))||0;i[0]*o[1]<o[0]*i[1]&&(i[0]*=-1,i[1]*=-1,a*=-1,u*=-1),this.rotate=(a?Math.atan2(i[1],i[0]):Math.atan2(-o[0],o[1]))*Nt,this.translate=[t.e,t.f],this.scale=[a,c],this.skew=c?Math.atan2(u,c)*Nt:0}function lo(t,n){return t[0]*n[0]+t[1]*n[1]}function fo(t){var n=Math.sqrt(lo(t,t));return n&&(t[0]/=n,t[1]/=n),n}z.ease=function(t){var n,e=t.indexOf("-"),r=0<=e?t.slice(0,e):t,i=0<=e?t.slice(e+1):"in";return r=Ji.get(r)||Xi,i=Ki.get(i)||D,n=i(r.apply(null,o.call(arguments,1))),function(t){return t<=0?0:1<=t?1:n(t)}},z.interpolateHcl=function(t,n){t=z.hcl(t),n=z.hcl(n);var e=t.h,r=t.c,i=t.l,o=n.h-e,a=n.c-r,u=n.l-i;isNaN(a)&&(a=0,r=isNaN(r)?n.c:r);isNaN(o)?(o=0,e=isNaN(e)?n.h:e):180<o?o-=360:o<-180&&(o+=360);return function(t){return Yt(e+o*t,r+a*t,i+u*t)+""}},z.interpolateHsl=function(t,n){t=z.hsl(t),n=z.hsl(n);var e=t.h,r=t.s,i=t.l,o=n.h-e,a=n.s-r,u=n.l-i;isNaN(a)&&(a=0,r=isNaN(r)?n.s:r);isNaN(o)?(o=0,e=isNaN(e)?n.h:e):180<o?o-=360:o<-180&&(o+=360);return function(t){return Ut(e+o*t,r+a*t,i+u*t)+""}},z.interpolateLab=function(t,n){t=z.lab(t),n=z.lab(n);var e=t.l,r=t.a,i=t.b,o=n.l-e,a=n.a-r,u=n.b-i;return function(t){return Qt(e+o*t,r+a*t,i+u*t)+""}},z.interpolateRound=co,z.transform=function(t){var e=x.createElementNS(z.ns.prefix.svg,"g");return(z.transform=function(t){if(null!=t){e.setAttribute("transform",t);var n=e.transform.baseVal.consolidate()}return new so(n?n.matrix:ho)})(t)},so.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var ho={a:1,b:0,c:0,d:1,e:0,f:0};function po(t){return t.length?t.pop()+",":""}function go(t,n){var e,r,i,o,a,u,c,s,l=[],f=[];return t=z.transform(t),n=z.transform(n),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push("translate(",null,",",null,")");r.push({i:i-4,x:Wi(t[0],n[0])},{i:i-2,x:Wi(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}(t.translate,n.translate,l,f),e=t.rotate,r=n.rotate,i=l,o=f,e!==r?(180<e-r?r+=360:180<r-e&&(e+=360),o.push({i:i.push(po(i)+"rotate(",null,")")-2,x:Wi(e,r)})):r&&i.push(po(i)+"rotate("+r+")"),a=t.skew,u=n.skew,c=l,s=f,a!==u?s.push({i:c.push(po(c)+"skewX(",null,")")-2,x:Wi(a,u)}):u&&c.push(po(c)+"skewX("+u+")"),function(t,n,e,r){if(t[0]!==n[0]||t[1]!==n[1]){var i=e.push(po(e)+"scale(",null,",",null,")");r.push({i:i-4,x:Wi(t[0],n[0])},{i:i-2,x:Wi(t[1],n[1])})}else 1===n[0]&&1===n[1]||e.push(po(e)+"scale("+n+")")}(t.scale,n.scale,l,f),t=n=null,function(t){for(var n,e=-1,r=f.length;++e<r;)l[(n=f[e]).i]=n.x(t);return l.join("")}}function vo(n,e){return e=(e-=n=+n)||1/e,function(t){return(t-n)/e}}function yo(n,e){return e=(e-=n=+n)||1/e,function(t){return Math.max(0,Math.min(1,(t-n)/e))}}function mo(t){for(var n=t.source,e=t.target,r=function(t,n){if(t===n)return t;var e=xo(t),r=xo(n),i=e.pop(),o=r.pop(),a=null;for(;i===o;)a=i,i=e.pop(),o=r.pop();return a}(n,e),i=[n];n!==r;)n=n.parent,i.push(n);for(var o=i.length;e!==r;)i.splice(o,0,e),e=e.parent;return i}function xo(t){for(var n=[],e=t.parent;null!=e;)n.push(t),e=(t=e).parent;return n.push(t),n}function bo(t){t.fixed|=2}function wo(t){t.fixed&=-7}function Mo(t){t.fixed|=4,t.px=t.x,t.py=t.y}function _o(t){t.fixed&=-5}z.interpolateTransform=go,z.layout={},z.layout.bundle=function(){return function(t){for(var n=[],e=-1,r=t.length;++e<r;)n.push(mo(t[e]));return n}},z.layout.chord=function(){var v,y,m,x,b,w,M,n={},_=0;function t(){var t,n,e,r,i,o={},a=[],u=z.range(x),c=[];for(v=[],y=[],t=0,r=-1;++r<x;){for(n=0,i=-1;++i<x;)n+=m[r][i];a.push(n),c.push(z.range(x)),t+=n}for(b&&u.sort(function(t,n){return b(a[t],a[n])}),w&&c.forEach(function(t,e){t.sort(function(t,n){return w(m[e][t],m[e][n])})}),t=(St-_*x)/t,n=0,r=-1;++r<x;){for(e=n,i=-1;++i<x;){var s=u[r],l=c[s][i],f=m[s][l],h=n,p=n+=f*t;o[s+"-"+l]={index:s,subindex:l,startAngle:h,endAngle:p,value:f}}y[s]={index:s,startAngle:e,endAngle:n,value:a[s]},n+=_}for(r=-1;++r<x;)for(i=r-1;++i<x;){var d=o[r+"-"+i],g=o[i+"-"+r];(d.value||g.value)&&v.push(d.value<g.value?{source:g,target:d}:{source:d,target:g})}M&&k()}function k(){v.sort(function(t,n){return M((t.source.value+t.target.value)/2,(n.source.value+n.target.value)/2)})}return n.matrix=function(t){return arguments.length?(x=(m=t)&&m.length,v=y=null,n):m},n.padding=function(t){return arguments.length?(_=t,v=y=null,n):_},n.sortGroups=function(t){return arguments.length?(b=t,v=y=null,n):b},n.sortSubgroups=function(t){return arguments.length?(w=t,v=null,n):w},n.sortChords=function(t){return arguments.length?(M=t,v&&k(),n):M},n.chords=function(){return v||t(),v},n.groups=function(){return y||t(),y},n},z.layout.force=function(){var f,t,h,p,d,g,i={},v=z.dispatch("start","tick","end"),y=[1,1],m=.9,o=ko,a=So,x=-30,l=Co,b=.1,w=.64,M=[],_=[];function k(s){return function(t,n,e,r){if(t.point!==s){var i=t.cx-s.x,o=t.cy-s.y,a=r-n,u=i*i+o*o;if(a*a/w<u){if(u<l){var c=t.charge/u;s.px-=i*c,s.py-=o*c}return!0}if(t.point&&u&&u<l){c=t.pointCharge/u;s.px-=i*c,s.py-=o*c}}return!t.charge}}function n(t){t.px=z.event.x,t.py=z.event.y,i.resume()}return i.tick=function(){if((h*=.99)<.005)return f=null,v.end({type:"end",alpha:h=0}),!0;var t,n,e,r,i,o,a,u,c,s=M.length,l=_.length;for(n=0;n<l;++n)r=(e=_[n]).source,(o=(u=(i=e.target).x-r.x)*u+(c=i.y-r.y)*c)&&(u*=o=h*d[n]*((o=Math.sqrt(o))-p[n])/o,c*=o,i.x-=u*(a=r.weight+i.weight?r.weight/(r.weight+i.weight):.5),i.y-=c*a,r.x+=u*(a=1-a),r.y+=c*a);if((a=h*b)&&(u=y[0]/2,c=y[1]/2,n=-1,a))for(;++n<s;)(e=M[n]).x+=(u-e.x)*a,e.y+=(c-e.y)*a;if(x)for(!function t(n,e,r){var i=0,o=0;n.charge=0;if(!n.leaf)for(var a,u=n.nodes,c=u.length,s=-1;++s<c;)null!=(a=u[s])&&(t(a,e,r),n.charge+=a.charge,i+=a.charge*a.cx,o+=a.charge*a.cy);if(n.point){n.leaf||(n.point.x+=Math.random()-.5,n.point.y+=Math.random()-.5);var l=e*r[n.point.index];n.charge+=n.pointCharge=l,i+=l*n.point.x,o+=l*n.point.y}n.cx=i/n.charge;n.cy=o/n.charge}(t=z.geom.quadtree(M),h,g),n=-1;++n<s;)(e=M[n]).fixed||t.visit(k(e));for(n=-1;++n<s;)(e=M[n]).fixed?(e.x=e.px,e.y=e.py):(e.x-=(e.px-(e.px=e.x))*m,e.y-=(e.py-(e.py=e.y))*m);v.tick({type:"tick",alpha:h})},i.nodes=function(t){return arguments.length?(M=t,i):M},i.links=function(t){return arguments.length?(_=t,i):_},i.size=function(t){return arguments.length?(y=t,i):y},i.linkDistance=function(t){return arguments.length?(o="function"==typeof t?t:+t,i):o},i.distance=i.linkDistance,i.linkStrength=function(t){return arguments.length?(a="function"==typeof t?t:+t,i):a},i.friction=function(t){return arguments.length?(m=+t,i):m},i.charge=function(t){return arguments.length?(x="function"==typeof t?t:+t,i):x},i.chargeDistance=function(t){return arguments.length?(l=t*t,i):Math.sqrt(l)},i.gravity=function(t){return arguments.length?(b=+t,i):b},i.theta=function(t){return arguments.length?(w=t*t,i):Math.sqrt(w)},i.alpha=function(t){return arguments.length?(t=+t,h?0<t?h=t:(f.c=null,f.t=NaN,f=null,v.end({type:"end",alpha:h=0})):0<t&&(v.start({type:"start",alpha:h=t}),f=kn(i.tick)),i):h},i.start=function(){var u,c,t,s=M.length,l=_.length,n=y[0],e=y[1];for(u=0;u<s;++u)(t=M[u]).index=u,t.weight=0;for(u=0;u<l;++u)"number"==typeof(t=_[u]).source&&(t.source=M[t.source]),"number"==typeof t.target&&(t.target=M[t.target]),++t.source.weight,++t.target.weight;for(u=0;u<s;++u)t=M[u],isNaN(t.x)&&(t.x=r("x",n)),isNaN(t.y)&&(t.y=r("y",e)),isNaN(t.px)&&(t.px=t.x),isNaN(t.py)&&(t.py=t.y);if(p=[],"function"==typeof o)for(u=0;u<l;++u)p[u]=+o.call(this,_[u],u);else for(u=0;u<l;++u)p[u]=o;if(d=[],"function"==typeof a)for(u=0;u<l;++u)d[u]=+a.call(this,_[u],u);else for(u=0;u<l;++u)d[u]=a;if(g=[],"function"==typeof x)for(u=0;u<s;++u)g[u]=+x.call(this,M[u],u);else for(u=0;u<s;++u)g[u]=x;function r(t,n){if(!c){for(c=new Array(s),o=0;o<s;++o)c[o]=[];for(o=0;o<l;++o){var e=_[o];c[e.source.index].push(e.target),c[e.target.index].push(e.source)}}for(var r,i=c[u],o=-1,a=i.length;++o<a;)if(!isNaN(r=i[o][t]))return r;return Math.random()*n}return i.resume()},i.resume=function(){return i.alpha(.1)},i.stop=function(){return i.alpha(0)},i.drag=function(){if(t||(t=z.behavior.drag().origin(D).on("dragstart.force",bo).on("drag.force",n).on("dragend.force",wo)),!arguments.length)return t;this.on("mouseover.force",Mo).on("mouseout.force",_o).call(t)},z.rebind(i,v,"on")};var ko=20,So=1,Co=1/0;function Ao(t,n){return z.rebind(t,n,"sort","children","value"),(t.nodes=t).links=Ho,t}function Eo(t,n){for(var e=[t];null!=(t=e.pop());)if(n(t),(i=t.children)&&(r=i.length))for(var r,i;0<=--r;)e.push(i[r])}function No(t,n){for(var e=[t],r=[];null!=(t=e.pop());)if(r.push(t),(o=t.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)e.push(o[a]);for(;null!=(t=r.pop());)n(t)}function To(t){return t.children}function Lo(t){return t.value}function jo(t,n){return n.value-t.value}function Ho(t){return z.merge(t.map(function(n){return(n.children||[]).map(function(t){return{source:n,target:t}})}))}z.layout.hierarchy=function(){var u=jo,c=To,s=Lo;function l(t){var n,e=[t],r=[];for(t.depth=0;null!=(n=e.pop());)if(r.push(n),(o=c.call(l,n,n.depth))&&(i=o.length)){for(var i,o,a;0<=--i;)e.push(a=o[i]),a.parent=n,a.depth=n.depth+1;s&&(n.value=0),n.children=o}else s&&(n.value=+s.call(l,n,n.depth)||0),delete n.children;return No(t,function(t){var n,e;u&&(n=t.children)&&n.sort(u),s&&(e=t.parent)&&(e.value+=t.value)}),r}return l.sort=function(t){return arguments.length?(u=t,l):u},l.children=function(t){return arguments.length?(c=t,l):c},l.value=function(t){return arguments.length?(s=t,l):s},l.revalue=function(t){return s&&(Eo(t,function(t){t.children&&(t.value=0)}),No(t,function(t){var n;t.children||(t.value=+s.call(l,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},l},z.layout.partition=function(){var r=z.layout.hierarchy(),i=[1,1];function n(t,n){var e=r.call(this,t,n);return function t(n,e,r,i){var o=n.children;if(n.x=e,n.y=n.depth*i,n.dx=r,n.dy=i,o&&(a=o.length)){var a,u,c,s=-1;for(r=n.value?r/n.value:0;++s<a;)t(u=o[s],e,c=u.value*r,i),e+=c}}(e[0],0,i[0],i[1]/function t(n){var e=n.children,r=0;if(e&&(i=e.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(e[o]));return 1+r}(e[0])),e}return n.size=function(t){return arguments.length?(i=t,n):i},Ao(n,r)},z.layout.pie=function(){var h=Number,p=zo,d=0,g=St,v=0;function y(e){var n,t=e.length,r=e.map(function(t,n){return+h.call(y,t,n)}),i=+("function"==typeof d?d.apply(this,arguments):d),o=("function"==typeof g?g.apply(this,arguments):g)-i,a=Math.min(Math.abs(o)/t,+("function"==typeof v?v.apply(this,arguments):v)),u=a*(o<0?-1:1),c=z.sum(r),s=c?(o-t*u)/c:0,l=z.range(t),f=[];return null!=p&&l.sort(p===zo?function(t,n){return r[n]-r[t]}:function(t,n){return p(e[t],e[n])}),l.forEach(function(t){f[t]={data:e[t],value:n=r[t],startAngle:i,endAngle:i+=n*s+u,padAngle:a}}),f}return y.value=function(t){return arguments.length?(h=t,y):h},y.sort=function(t){return arguments.length?(p=t,y):p},y.startAngle=function(t){return arguments.length?(d=t,y):d},y.endAngle=function(t){return arguments.length?(g=t,y):g},y.padAngle=function(t){return arguments.length?(v=t,y):v},y};var zo={};function Oo(t){return t.x}function Do(t){return t.y}function qo(t,n,e){t.y0=n,t.y=e}z.layout.stack=function(){var f=D,h=Fo,p=Go,d=qo,g=Oo,v=Do;function y(t,n){if(!(o=t.length))return t;var e=t.map(function(t,n){return f.call(y,t,n)}),r=e.map(function(t){return t.map(function(t,n){return[g.call(y,t,n),v.call(y,t,n)]})}),i=h.call(y,r,n);e=z.permute(e,i),r=z.permute(r,i);var o,a,u,c,s=p.call(y,r,n),l=e[0].length;for(u=0;u<l;++u)for(d.call(y,e[0][u],c=s[u],r[0][u][1]),a=1;a<o;++a)d.call(y,e[a][u],c+=r[a-1][u][1],r[a][u][1]);return t}return y.values=function(t){return arguments.length?(f=t,y):f},y.order=function(t){return arguments.length?(h="function"==typeof t?t:Po.get(t)||Fo,y):h},y.offset=function(t){return arguments.length?(p="function"==typeof t?t:Ro.get(t)||Go,y):p},y.x=function(t){return arguments.length?(g=t,y):g},y.y=function(t){return arguments.length?(v=t,y):v},y.out=function(t){return arguments.length?(d=t,y):d},y};var Po=z.map({"inside-out":function(t){var n,e,r=t.length,i=t.map(Io),o=t.map(Uo),a=z.range(r).sort(function(t,n){return i[t]-i[n]}),u=0,c=0,s=[],l=[];for(n=0;n<r;++n)e=a[n],u<c?(u+=o[e],s.push(e)):(c+=o[e],l.push(e));return l.reverse().concat(s)},reverse:function(t){return z.range(t.length).reverse()},default:Fo}),Ro=z.map({silhouette:function(t){var n,e,r,i=t.length,o=t[0].length,a=[],u=0,c=[];for(e=0;e<o;++e){for(r=n=0;n<i;n++)r+=t[n][e][1];u<r&&(u=r),a.push(r)}for(e=0;e<o;++e)c[e]=(u-a[e])/2;return c},wiggle:function(t){var n,e,r,i,o,a,u,c,s,l=t.length,f=t[0],h=f.length,p=[];for(p[0]=c=s=0,e=1;e<h;++e){for(i=n=0;n<l;++n)i+=t[n][e][1];for(o=n=0,u=f[e][0]-f[e-1][0];n<l;++n){for(r=0,a=(t[n][e][1]-t[n][e-1][1])/(2*u);r<n;++r)a+=(t[r][e][1]-t[r][e-1][1])/u;o+=a*t[n][e][1]}p[e]=c-=i?o/i*u:0,c<s&&(s=c)}for(e=0;e<h;++e)p[e]-=s;return p},expand:function(t){var n,e,r,i=t.length,o=t[0].length,a=1/i,u=[];for(e=0;e<o;++e){for(r=n=0;n<i;n++)r+=t[n][e][1];if(r)for(n=0;n<i;n++)t[n][e][1]/=r;else for(n=0;n<i;n++)t[n][e][1]=a}for(e=0;e<o;++e)u[e]=0;return u},zero:Go});function Fo(t){return z.range(t.length)}function Go(t){for(var n=-1,e=t[0].length,r=[];++n<e;)r[n]=0;return r}function Io(t){for(var n,e=1,r=0,i=t[0][1],o=t.length;e<o;++e)(n=t[e][1])>i&&(r=e,i=n);return r}function Uo(t){return t.reduce(Wo,0)}function Wo(t,n){return t+n[1]}function Bo(t,n){return Yo(t,Math.ceil(Math.log(n.length)/Math.LN2+1))}function Yo(t,n){for(var e=-1,r=+t[0],i=(t[1]-r)/n,o=[];++e<=n;)o[e]=i*e+r;return o}function $o(t){return[z.min(t),z.max(t)]}function Vo(t,n){return t.value-n.value}function Zo(t,n){var e=t._pack_next;(t._pack_next=n)._pack_prev=t,(n._pack_next=e)._pack_prev=n}function Xo(t,n){(t._pack_next=n)._pack_prev=t}function Jo(t,n){var e=n.x-t.x,r=n.y-t.y,i=t.r+n.r;return e*e+r*r<.999*i*i}function Ko(t){if((n=t.children)&&(c=n.length)){var n,e,r,i,o,a,u,c,s=1/0,l=-1/0,f=1/0,h=-1/0;if(n.forEach(Qo),(e=n[0]).x=-e.r,e.y=0,x(e),1<c&&((r=n[1]).x=r.r,r.y=0,x(r),2<c))for(na(e,r,i=n[2]),x(i),Zo(e,i),Zo(e._pack_prev=i,r),r=e._pack_next,o=3;o<c;o++){na(e,r,i=n[o]);var p=0,d=1,g=1;for(a=r._pack_next;a!==r;a=a._pack_next,d++)if(Jo(a,i)){p=1;break}if(1==p)for(u=e._pack_prev;u!==a._pack_prev&&!Jo(u,i);u=u._pack_prev,g++);p?(d<g||d==g&&r.r<e.r?Xo(e,r=a):Xo(e=u,r),o--):(Zo(e,i),x(r=i))}var v=(s+l)/2,y=(f+h)/2,m=0;for(o=0;o<c;o++)(i=n[o]).x-=v,i.y-=y,m=Math.max(m,i.r+Math.sqrt(i.x*i.x+i.y*i.y));t.r=m,n.forEach(ta)}function x(t){s=Math.min(t.x-t.r,s),l=Math.max(t.x+t.r,l),f=Math.min(t.y-t.r,f),h=Math.max(t.y+t.r,h)}}function Qo(t){t._pack_next=t._pack_prev=t}function ta(t){delete t._pack_next,delete t._pack_prev}function na(t,n,e){var r=t.r+e.r,i=n.x-t.x,o=n.y-t.y;if(r&&(i||o)){var a=n.r+e.r,u=i*i+o*o,c=.5+((r*=r)-(a*=a))/(2*u),s=Math.sqrt(Math.max(0,2*a*(r+u)-(r-=u)*r-a*a))/(2*u);e.x=t.x+c*i+s*o,e.y=t.y+c*o-s*i}else e.x=t.x+r,e.y=t.y}function ea(t,n){return t.parent==n.parent?1:2}function ra(t){var n=t.children;return n.length?n[0]:t.t}function ia(t){var n,e=t.children;return(n=e.length)?e[n-1]:t.t}function oa(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function aa(t){return{x:t.x,y:t.y,dx:t.dx,dy:t.dy}}function ua(t,n){var e=t.x+n[3],r=t.y+n[0],i=t.dx-n[1]-n[3],o=t.dy-n[0]-n[2];return i<0&&(e+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:e,y:r,dx:i,dy:o}}function ca(t){var n=t[0],e=t[t.length-1];return n<e?[n,e]:[e,n]}function sa(t){return t.rangeExtent?t.rangeExtent():ca(t.range())}function la(t,n,e,r){var i=e(t[0],t[1]),o=r(n[0],n[1]);return function(t){return o(i(t))}}function fa(t,n){var e,r=0,i=t.length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function ha(n){return n?{floor:function(t){return Math.floor(t/n)*n},ceil:function(t){return Math.ceil(t/n)*n}}:pa}z.layout.histogram=function(){var f=!0,h=Number,p=$o,d=Bo;function e(t,n){for(var e,r,i=[],o=t.map(h,this),a=p.call(this,o,n),u=d.call(this,a,o,n),c=(n=-1,o.length),s=u.length-1,l=f?1:1/c;++n<s;)(e=i[n]=[]).dx=u[n+1]-(e.x=u[n]),e.y=0;if(0<s)for(n=-1;++n<c;)(r=o[n])>=a[0]&&r<=a[1]&&((e=i[z.bisect(u,r,1,s)-1]).y+=l,e.push(t[n]));return i}return e.value=function(t){return arguments.length?(h=t,e):h},e.range=function(t){return arguments.length?(p=vn(t),e):p},e.bins=function(n){return arguments.length?(d="number"==typeof n?function(t){return Yo(t,n)}:vn(n),e):d},e.frequency=function(t){return arguments.length?(f=!!t,e):f},e},z.layout.pack=function(){var c,s=z.layout.hierarchy().sort(Vo),l=0,f=[1,1];function n(t,n){var e=s.call(this,t,n),r=e[0],i=f[0],o=f[1],a=null==c?Math.sqrt:"function"==typeof c?c:function(){return c};if(r.x=r.y=0,No(r,function(t){t.r=+a(t.value)}),No(r,Ko),l){var u=l*(c?1:Math.max(2*r.r/i,2*r.r/o))/2;No(r,function(t){t.r+=u}),No(r,Ko),No(r,function(t){t.r-=u})}return function t(n,e,r,i){var o=n.children;n.x=e+=i*n.x;n.y=r+=i*n.y;n.r*=i;if(o)for(var a=-1,u=o.length;++a<u;)t(o[a],e,r,i)}(r,i/2,o/2,c?1:1/Math.max(2*r.r/i,2*r.r/o)),e}return n.size=function(t){return arguments.length?(f=t,n):f},n.radius=function(t){return arguments.length?(c=null==t||"function"==typeof t?t:+t,n):c},n.padding=function(t){return arguments.length?(l=+t,n):l},Ao(n,s)},z.layout.tree=function(){var f=z.layout.hierarchy().sort(null).value(null),g=ea,h=[1,1],p=null;function n(t,n){var e=f.call(this,t,n),r=e[0],i=function(t){var n,e={A:null,children:[t]},r=[e];for(;null!=(n=r.pop());)for(var i,o=n.children,a=0,u=o.length;a<u;++a)r.push((o[a]=i={_:o[a],parent:n,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return e.children[0]}(r);if(No(i,d),i.parent.m=-i.z,Eo(i,v),p)Eo(r,y);else{var o=r,a=r,u=r;Eo(r,function(t){t.x<o.x&&(o=t),t.x>a.x&&(a=t),t.depth>u.depth&&(u=t)});var c=g(o,a)/2-o.x,s=h[0]/(a.x+g(a,o)/2+c),l=h[1]/(u.depth||1);Eo(r,function(t){t.x=(t.x+c)*s,t.y=t.depth*l})}return e}function d(t){var n=t.children,e=t.parent.children,r=t.i?e[t.i-1]:null;if(n.length){!function(t){var n,e=0,r=0,i=t.children,o=i.length;for(;0<=--o;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(t);var i=(n[0].z+n[n.length-1].z)/2;r?(t.z=r.z+g(t._,r._),t.m=t.z-i):t.z=i}else r&&(t.z=r.z+g(t._,r._));t.parent.A=function(t,n,e){if(n){for(var r,i=t,o=t,a=n,u=i.parent.children[0],c=i.m,s=o.m,l=a.m,f=u.m;a=ia(a),i=ra(i),a&&i;)u=ra(u),(o=ia(o)).a=t,0<(r=a.z+l-i.z-c+g(a._,i._))&&(oa((p=t,d=e,(h=a).a.parent===p.parent?h.a:d),t,r),c+=r,s+=r),l+=a.m,c+=i.m,f+=u.m,s+=o.m;a&&!ia(o)&&(o.t=a,o.m+=l-s),i&&!ra(u)&&(u.t=i,u.m+=c-f,e=t)}var h,p,d;return e}(t,r,t.parent.A||e[0])}function v(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function y(t){t.x*=h[0],t.y=t.depth*h[1]}return n.separation=function(t){return arguments.length?(g=t,n):g},n.size=function(t){return arguments.length?(p=null==(h=t)?y:null,n):p?null:h},n.nodeSize=function(t){return arguments.length?(p=null==(h=t)?null:y,n):p?h:null},Ao(n,f)},z.layout.cluster=function(){var l=z.layout.hierarchy().sort(null).value(null),f=ea,h=[1,1],p=!1;function n(t,n){var i,e=l.call(this,t,n),r=e[0],o=0;No(r,function(t){var n,e,r=t.children;r&&r.length?(t.x=(e=r).reduce(function(t,n){return t+n.x},0)/e.length,t.y=(n=r,1+z.max(n,function(t){return t.y}))):(t.x=i?o+=f(t,i):0,t.y=0,i=t)});var a=function t(n){var e=n.children;return e&&e.length?t(e[0]):n}(r),u=function t(n){var e,r=n.children;return r&&(e=r.length)?t(r[e-1]):n}(r),c=a.x-f(a,u)/2,s=u.x+f(u,a)/2;return No(r,p?function(t){t.x=(t.x-r.x)*h[0],t.y=(r.y-t.y)*h[1]}:function(t){t.x=(t.x-c)/(s-c)*h[0],t.y=(1-(r.y?t.y/r.y:1))*h[1]}),e}return n.separation=function(t){return arguments.length?(f=t,n):f},n.size=function(t){return arguments.length?(p=null==(h=t),n):p?null:h},n.nodeSize=function(t){return arguments.length?(p=null!=(h=t),n):p?h:null},Ao(n,l)},z.layout.treemap=function(){var r,i=z.layout.hierarchy(),l=Math.round,o=[1,1],a=null,f=aa,u=!1,h="squarify",c=.5*(1+Math.sqrt(5));function p(t,n){for(var e,r,i=-1,o=t.length;++i<o;)r=(e=t[i]).value*(n<0?0:n),e.area=isNaN(r)||r<=0?0:r}function d(t){var n=t.children;if(n&&n.length){var e,r,i,o=f(t),a=[],u=n.slice(),c=1/0,s="slice"===h?o.dx:"dice"===h?o.dy:"slice-dice"===h?1&t.depth?o.dy:o.dx:Math.min(o.dx,o.dy);for(p(u,o.dx*o.dy/t.value),a.area=0;0<(i=u.length);)a.push(e=u[i-1]),a.area+=e.area,"squarify"!==h||(r=g(a,s))<=c?(u.pop(),c=r):(a.area-=a.pop().area,v(a,s,o,!1),s=Math.min(o.dx,o.dy),a.length=a.area=0,c=1/0);a.length&&(v(a,s,o,!0),a.length=a.area=0),n.forEach(d)}}function s(t){var n=t.children;if(n&&n.length){var e,r=f(t),i=n.slice(),o=[];for(p(i,r.dx*r.dy/t.value),o.area=0;e=i.pop();)o.push(e),o.area+=e.area,null!=e.z&&(v(o,e.z?r.dx:r.dy,r,!i.length),o.length=o.area=0);n.forEach(s)}}function g(t,n){for(var e,r=t.area,i=0,o=1/0,a=-1,u=t.length;++a<u;)(e=t[a].area)&&(e<o&&(o=e),i<e&&(i=e));return n*=n,(r*=r)?Math.max(n*i*c/r,r/(n*o*c)):1/0}function v(t,n,e,r){var i,o=-1,a=t.length,u=e.x,c=e.y,s=n?l(t.area/n):0;if(n==e.dx){for((r||s>e.dy)&&(s=e.dy);++o<a;)(i=t[o]).x=u,i.y=c,i.dy=s,u+=i.dx=Math.min(e.x+e.dx-u,s?l(i.area/s):0);i.z=!0,i.dx+=e.x+e.dx-u,e.y+=s,e.dy-=s}else{for((r||s>e.dx)&&(s=e.dx);++o<a;)(i=t[o]).x=u,i.y=c,i.dx=s,c+=i.dy=Math.min(e.y+e.dy-c,s?l(i.area/s):0);i.z=!1,i.dy+=e.y+e.dy-c,e.x+=s,e.dx-=s}}function y(t){var n=r||i(t),e=n[0];return e.x=e.y=0,e.value?(e.dx=o[0],e.dy=o[1]):e.dx=e.dy=0,r&&i.revalue(e),p([e],e.dx*e.dy/e.value),(r?s:d)(e),u&&(r=n),n}return y.size=function(t){return arguments.length?(o=t,y):o},y.padding=function(e){if(!arguments.length)return a;function t(t){return ua(t,e)}var n;return f=null==(a=e)?aa:"function"==(n=typeof e)?function(t){var n=e.call(y,t,t.depth);return null==n?aa(t):ua(t,"number"==typeof n?[n,n,n,n]:n)}:("number"===n&&(e=[e,e,e,e]),t),y},y.round=function(t){return arguments.length?(l=t?Math.round:Number,y):l!=Number},y.sticky=function(t){return arguments.length?(u=t,r=null,y):u},y.ratio=function(t){return arguments.length?(c=t,y):c},y.mode=function(t){return arguments.length?(h=t+"",y):h},Ao(y,i)},z.random={normal:function(r,i){var t=arguments.length;return t<2&&(i=1),t<1&&(r=0),function(){for(var t,n,e;!(e=(t=2*Math.random()-1)*t+(n=2*Math.random()-1)*n)||1<e;);return r+i*t*Math.sqrt(-2*Math.log(e)/e)}},logNormal:function(){var t=z.random.normal.apply(z,arguments);return function(){return Math.exp(t())}},bates:function(t){var n=z.random.irwinHall(t);return function(){return n()/t}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},z.scale={};var pa={floor:D,ceil:D};function da(e,t,n,r){var i=[],o=[],a=0,u=Math.min(e.length,t.length)-1;for(e[u]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=u;)i.push(n(e[a-1],e[a])),o.push(r(t[a-1],t[a]));return function(t){var n=z.bisect(e,t,1,u)-1;return o[n](i[n](t))}}function ga(t,n){return z.rebind(t,n,"range","rangeRound","interpolate","clamp")}function va(t,n){return fa(t,ha(ya(t,n)[2])),fa(t,ha(ya(t,n)[2])),t}function ya(t,n){null==n&&(n=10);var e=ca(t),r=e[1]-e[0],i=Math.pow(10,Math.floor(Math.log(r/n)/Math.LN10)),o=n/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),e[0]=Math.ceil(e[0]/i)*i,e[1]=Math.floor(e[1]/i)*i+.5*i,e[2]=i,e}function ma(t,n){return z.range.apply(z,ya(t,n))}function xa(t,n,e){var r,i,o,a=ya(t,n);if(e){var u=Tn.exec(e);if(u.shift(),"s"===u[8]){var c=z.formatPrefix(Math.max(H(a[0]),H(a[1])));return u[7]||(u[7]="."+wa(c.scale(a[2]))),u[8]="f",e=z.format(u.join("")),function(t){return e(c.scale(t))+c.symbol}}u[7]||(u[7]="."+(r=u[8],o=wa((i=a)[2]),r in ba?Math.abs(o-wa(Math.max(H(i[0]),H(i[1]))))+ +("e"!==r):o-2*("%"===r))),e=u.join("")}else e=",."+wa(a[2])+"f";return z.format(e)}z.scale.linear=function(){return function t(e,r,i,o){var a,u;function n(){var t=2<Math.min(e.length,r.length)?da:la,n=o?yo:vo;return a=t(e,r,n,i),u=t(r,e,n,Vi),c}function c(t){return a(t)}c.invert=function(t){return u(t)};c.domain=function(t){return arguments.length?(e=t.map(Number),n()):e};c.range=function(t){return arguments.length?(r=t,n()):r};c.rangeRound=function(t){return c.range(t).interpolate(co)};c.clamp=function(t){return arguments.length?(o=t,n()):o};c.interpolate=function(t){return arguments.length?(i=t,n()):i};c.ticks=function(t){return ma(e,t)};c.tickFormat=function(t,n){return xa(e,t,n)};c.nice=function(t){return va(e,t),n()};c.copy=function(){return t(e,r,i,o)};return n()}([0,1],[0,1],Vi,!1)};var ba={s:1,g:1,p:1,r:1,e:1};function wa(t){return-Math.floor(Math.log(t)/Math.LN10+.01)}z.scale.log=function(){return function t(n,c,s,l){function f(t){return(s?Math.log(t<0?0:t):-Math.log(0<t?0:-t))/Math.log(c)}function h(t){return s?Math.pow(c,t):-Math.pow(c,-t)}function i(t){return n(f(t))}i.invert=function(t){return h(n.invert(t))};i.domain=function(t){return arguments.length?(s=0<=t[0],n.domain((l=t.map(Number)).map(f)),i):l};i.base=function(t){return arguments.length?(c=+t,n.domain(l.map(f)),i):c};i.nice=function(){var t=fa(l.map(f),s?Math:_a);return n.domain(t),l=t.map(h),i};i.ticks=function(){var t=ca(l),n=[],e=t[0],r=t[1],i=Math.floor(f(e)),o=Math.ceil(f(r)),a=c%1?2:c;if(isFinite(o-i)){if(s){for(;i<o;i++)for(var u=1;u<a;u++)n.push(h(i)*u);n.push(h(i))}else for(n.push(h(i));i++<o;)for(var u=a-1;0<u;u--)n.push(h(i)*u);for(i=0;n[i]<e;i++);for(o=n.length;n[o-1]>r;o--);n=n.slice(i,o)}return n};i.tickFormat=function(t,e){if(!arguments.length)return Ma;arguments.length<2?e=Ma:"function"!=typeof e&&(e=z.format(e));var r=Math.max(1,c*t/i.ticks().length);return function(t){var n=t/h(Math.round(f(t)));return n*c<c-.5&&(n*=c),n<=r?e(t):""}};i.copy=function(){return t(n.copy(),c,s,l)};return ga(i,n)}(z.scale.linear().domain([0,1]),10,!0,[1,10])};var Ma=z.format(".0e"),_a={floor:function(t){return-Math.ceil(-t)},ceil:function(t){return-Math.floor(-t)}};function ka(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}z.scale.pow=function(){return function t(n,e,r){var i=ka(e),o=ka(1/e);function a(t){return n(i(t))}a.invert=function(t){return o(n.invert(t))};a.domain=function(t){return arguments.length?(n.domain((r=t.map(Number)).map(i)),a):r};a.ticks=function(t){return ma(r,t)};a.tickFormat=function(t,n){return xa(r,t,n)};a.nice=function(t){return a.domain(va(r,t))};a.exponent=function(t){return arguments.length?(i=ka(e=t),o=ka(1/e),n.domain(r.map(i)),a):e};a.copy=function(){return t(n.copy(),e,r)};return ga(a,n)}(z.scale.linear(),1,[0,1])},z.scale.sqrt=function(){return z.scale.pow().exponent(.5)},z.scale.ordinal=function(){return function t(u,c){var i,s,l;function f(t){return s[((i.get(t)||("range"===c.t?i.set(t,u.push(t)):NaN))-1)%s.length]}function h(n,e){return z.range(u.length).map(function(t){return n+e*t})}f.domain=function(t){if(!arguments.length)return u;u=[],i=new m;for(var n,e=-1,r=t.length;++e<r;)i.has(n=t[e])||i.set(n,u.push(n));return f[c.t].apply(f,c.a)};f.range=function(t){return arguments.length?(s=t,l=0,c={t:"range",a:arguments},f):s};f.rangePoints=function(t,n){arguments.length<2&&(n=0);var e=t[0],r=t[1],i=u.length<2?(e=(e+r)/2,0):(r-e)/(u.length-1+n);return s=h(e+i*n/2,i),l=0,c={t:"rangePoints",a:arguments},f};f.rangeRoundPoints=function(t,n){arguments.length<2&&(n=0);var e=t[0],r=t[1],i=u.length<2?(e=r=Math.round((e+r)/2),0):(r-e)/(u.length-1+n)|0;return s=h(e+Math.round(i*n/2+(r-e-(u.length-1+n)*i)/2),i),l=0,c={t:"rangeRoundPoints",a:arguments},f};f.rangeBands=function(t,n,e){arguments.length<2&&(n=0),arguments.length<3&&(e=n);var r=t[1]<t[0],i=t[r-0],o=t[1-r],a=(o-i)/(u.length-n+2*e);return s=h(i+a*e,a),r&&s.reverse(),l=a*(1-n),c={t:"rangeBands",a:arguments},f};f.rangeRoundBands=function(t,n,e){arguments.length<2&&(n=0),arguments.length<3&&(e=n);var r=t[1]<t[0],i=t[r-0],o=t[1-r],a=Math.floor((o-i)/(u.length-n+2*e));return s=h(i+Math.round((o-i-(u.length-n)*a)/2),a),r&&s.reverse(),l=Math.round(a*(1-n)),c={t:"rangeRoundBands",a:arguments},f};f.rangeBand=function(){return l};f.rangeExtent=function(){return ca(c.a[0])};f.copy=function(){return t(u,c)};return f.domain(u)}([],{t:"range",a:[[]]})},z.scale.category10=function(){return z.scale.ordinal().range(Sa)},z.scale.category20=function(){return z.scale.ordinal().range(Ca)},z.scale.category20b=function(){return z.scale.ordinal().range(Aa)},z.scale.category20c=function(){return z.scale.ordinal().range(Ea)};var Sa=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(un),Ca=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(un),Aa=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(un),Ea=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(un);function Na(){return 0}z.scale.quantile=function(){return function t(e,r){var i;function n(){var t=0,n=r.length;for(i=[];++t<n;)i[t-1]=z.quantile(e,t/n);return o}function o(t){if(!isNaN(t=+t))return r[z.bisect(i,t)]}o.domain=function(t){return arguments.length?(e=t.map(s).filter(l).sort(c),n()):e};o.range=function(t){return arguments.length?(r=t,n()):r};o.quantiles=function(){return i};o.invertExtent=function(t){return(t=r.indexOf(t))<0?[NaN,NaN]:[0<t?i[t-1]:e[0],t<i.length?i[t]:e[e.length-1]]};o.copy=function(){return t(e,r)};return n()}([],[])},z.scale.quantize=function(){return function t(n,e,r){var i,o;function a(t){return r[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=r.length/(e-n),o=r.length-1,a}a.domain=function(t){return arguments.length?(n=+t[0],e=+t[t.length-1],u()):[n,e]};a.range=function(t){return arguments.length?(r=t,u()):r};a.invertExtent=function(t){return[t=(t=r.indexOf(t))<0?NaN:t/i+n,t+1/i]};a.copy=function(){return t(n,e,r)};return u()}(0,1,[0,1])},z.scale.threshold=function(){return function t(n,e){function r(t){if(t<=t)return e[z.bisect(n,t)]}r.domain=function(t){return arguments.length?(n=t,r):n};r.range=function(t){return arguments.length?(e=t,r):e};r.invertExtent=function(t){return t=e.indexOf(t),[n[t-1],n[t]]};r.copy=function(){return t(n,e)};return r}([.5],[0,1])},z.scale.identity=function(){return function t(e){function n(t){return+t}n.invert=n;n.domain=n.range=function(t){return arguments.length?(e=t.map(n),n):e};n.ticks=function(t){return ma(e,t)};n.tickFormat=function(t,n){return xa(e,t,n)};n.copy=function(){return t(e)};return n}([0,1])},z.svg={},z.svg.arc=function(){var P=La,R=ja,F=Na,G=Ta,I=Ha,U=za,W=Oa;function n(){var t=Math.max(0,+P.apply(this,arguments)),n=Math.max(0,+R.apply(this,arguments)),e=I.apply(this,arguments)-At,r=U.apply(this,arguments)-At,i=Math.abs(r-e),o=r<e?0:1;if(n<t&&(a=n,n=t,t=a),Ct<=i)return B(n,o)+(t?B(t,1-o):"")+"Z";var a,u,c,s,l,f,h,p,d,g,v,y,m=0,x=0,b=[];if((s=(+W.apply(this,arguments)||0)/2)&&(c=G===Ta?Math.sqrt(t*t+n*n):+G.apply(this,arguments),o||(x*=-1),n&&(x=Ht(c/n*Math.sin(s))),t&&(m=Ht(c/t*Math.sin(s)))),n){l=n*Math.cos(e+x),f=n*Math.sin(e+x),h=n*Math.cos(r-x),p=n*Math.sin(r-x);var w=Math.abs(r-e-2*x)<=kt?0:1;if(x&&Da(l,f,h,p)===o^w){var M=(e+r)/2;l=n*Math.cos(M),f=n*Math.sin(M),h=p=null}}else l=f=0;if(t){d=t*Math.cos(r-m),g=t*Math.sin(r-m),v=t*Math.cos(e+m),y=t*Math.sin(e+m);var _=Math.abs(e-r+2*m)<=kt?0:1;if(m&&Da(d,g,v,y)===1-o^_){var k=(e+r)/2;d=t*Math.cos(k),g=t*Math.sin(k),v=y=null}}else d=g=0;if(Mt<i&&.001<(a=Math.min(Math.abs(n-t)/2,+F.apply(this,arguments)))){u=t<n^o?0:1;var S=a,C=a;if(i<kt){var A=null==v?[d,g]:null==h?[l,f]:ai([l,f],[v,y],[h,p],[d,g]),E=l-A[0],N=f-A[1],T=h-A[0],L=p-A[1],j=1/Math.sin(Math.acos((E*T+N*L)/(Math.sqrt(E*E+N*N)*Math.sqrt(T*T+L*L)))/2),H=Math.sqrt(A[0]*A[0]+A[1]*A[1]);C=Math.min(a,(t-H)/(j-1)),S=Math.min(a,(n-H)/(j+1))}if(null!=h){var z=qa(null==v?[d,g]:[v,y],[l,f],n,S,o),O=qa([h,p],[d,g],n,S,o);a===S?b.push("M",z[0],"A",S,",",S," 0 0,",u," ",z[1],"A",n,",",n," 0 ",1-o^Da(z[1][0],z[1][1],O[1][0],O[1][1]),",",o," ",O[1],"A",S,",",S," 0 0,",u," ",O[0]):b.push("M",z[0],"A",S,",",S," 0 1,",u," ",O[0])}else b.push("M",l,",",f);if(null!=v){var D=qa([l,f],[v,y],t,-C,o),q=qa([d,g],null==h?[l,f]:[h,p],t,-C,o);a===C?b.push("L",q[0],"A",C,",",C," 0 0,",u," ",q[1],"A",t,",",t," 0 ",o^Da(q[1][0],q[1][1],D[1][0],D[1][1]),",",1-o," ",D[1],"A",C,",",C," 0 0,",u," ",D[0]):b.push("L",q[0],"A",C,",",C," 0 0,",u," ",D[0])}else b.push("L",d,",",g)}else b.push("M",l,",",f),null!=h&&b.push("A",n,",",n," 0 ",w,",",o," ",h,",",p),b.push("L",d,",",g),null!=v&&b.push("A",t,",",t," 0 ",_,",",1-o," ",v,",",y);return b.push("Z"),b.join("")}function B(t,n){return"M0,"+t+"A"+t+","+t+" 0 1,"+n+" 0,"+-t+"A"+t+","+t+" 0 1,"+n+" 0,"+t}return n.innerRadius=function(t){return arguments.length?(P=vn(t),n):P},n.outerRadius=function(t){return arguments.length?(R=vn(t),n):R},n.cornerRadius=function(t){return arguments.length?(F=vn(t),n):F},n.padRadius=function(t){return arguments.length?(G=t==Ta?Ta:vn(t),n):G},n.startAngle=function(t){return arguments.length?(I=vn(t),n):I},n.endAngle=function(t){return arguments.length?(U=vn(t),n):U},n.padAngle=function(t){return arguments.length?(W=vn(t),n):W},n.centroid=function(){var t=(+P.apply(this,arguments)+ +R.apply(this,arguments))/2,n=(+I.apply(this,arguments)+ +U.apply(this,arguments))/2-At;return[Math.cos(n)*t,Math.sin(n)*t]},n};var Ta="auto";function La(t){return t.innerRadius}function ja(t){return t.outerRadius}function Ha(t){return t.startAngle}function za(t){return t.endAngle}function Oa(t){return t&&t.padAngle}function Da(t,n,e,r){return 0<(t-e)*n-(n-r)*t?0:1}function qa(t,n,e,r,i){var o=t[0]-n[0],a=t[1]-n[1],u=(i?r:-r)/Math.sqrt(o*o+a*a),c=u*a,s=-u*o,l=t[0]+c,f=t[1]+s,h=n[0]+c,p=n[1]+s,d=(l+h)/2,g=(f+p)/2,v=h-l,y=p-f,m=v*v+y*y,x=e-r,b=l*p-h*f,w=(y<0?-1:1)*Math.sqrt(Math.max(0,x*x*m-b*b)),M=(b*y-v*w)/m,_=(-b*v-y*w)/m,k=(b*y+v*w)/m,S=(-b*v+y*w)/m,C=M-d,A=_-g,E=k-d,N=S-g;return E*E+N*N<C*C+A*A&&(M=k,_=S),[[M-c,_-s],[M*e/x,_*e/x]]}function Pa(s){var l=ti,f=ni,h=Ye,p=Fa,n=p.key,d=.7;function e(t){var n,e=[],r=[],i=-1,o=t.length,a=vn(l),u=vn(f);function c(){e.push("M",p(s(r),d))}for(;++i<o;)h.call(this,n=t[i],i)?r.push([+a.call(this,n,i),+u.call(this,n,i)]):r.length&&(c(),r=[]);return r.length&&c(),e.length?e.join(""):null}return e.x=function(t){return arguments.length?(l=t,e):l},e.y=function(t){return arguments.length?(f=t,e):f},e.defined=function(t){return arguments.length?(h=t,e):h},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?p=t:(p=Ra.get(t)||Fa).key,e):n},e.tension=function(t){return arguments.length?(d=t,e):d},e}z.svg.line=function(){return Pa(D)};var Ra=z.map({linear:Fa,"linear-closed":Ga,step:function(t){var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];for(;++n<e;)i.push("H",(r[0]+(r=t[n])[0])/2,"V",r[1]);1<e&&i.push("H",r[0]);return i.join("")},"step-before":Ia,"step-after":Ua,basis:Ya,"basis-open":function(t){if(t.length<4)return Fa(t);var n,e=[],r=-1,i=t.length,o=[0],a=[0];for(;++r<3;)n=t[r],o.push(n[0]),a.push(n[1]);e.push($a(Xa,o)+","+$a(Xa,a)),--r;for(;++r<i;)n=t[r],o.shift(),o.push(n[0]),a.shift(),a.push(n[1]),Ja(e,o,a);return e.join("")},"basis-closed":function(t){var n,e,r=-1,i=t.length,o=i+4,a=[],u=[];for(;++r<4;)e=t[r%i],a.push(e[0]),u.push(e[1]);n=[$a(Xa,a),",",$a(Xa,u)],--r;for(;++r<o;)e=t[r%i],a.shift(),a.push(e[0]),u.shift(),u.push(e[1]),Ja(n,a,u);return n.join("")},bundle:function(t,n){var e=t.length-1;if(e)for(var r,i,o=t[0][0],a=t[0][1],u=t[e][0]-o,c=t[e][1]-a,s=-1;++s<=e;)r=t[s],i=s/e,r[0]=n*r[0]+(1-n)*(o+i*u),r[1]=n*r[1]+(1-n)*(a+i*c);return Ya(t)},cardinal:function(t,n){return t.length<3?Fa(t):t[0]+Wa(t,Ba(t,n))},"cardinal-open":function(t,n){return t.length<4?Fa(t):t[1]+Wa(t.slice(1,-1),Ba(t,n))},"cardinal-closed":function(t,n){return t.length<3?Ga(t):t[0]+Wa((t.push(t[0]),t),Ba([t[t.length-2]].concat(t,[t[1]]),n))},monotone:function(t){return t.length<3?Fa(t):t[0]+Wa(t,function(t){var n,e,r,i,o=[],a=function(t){var n=0,e=t.length-1,r=[],i=t[0],o=t[1],a=r[0]=Ka(i,o);for(;++n<e;)r[n]=(a+(a=Ka(i=o,o=t[n+1])))/2;return r[n]=a,r}(t),u=-1,c=t.length-1;for(;++u<c;)n=Ka(t[u],t[u+1]),H(n)<Mt?a[u]=a[u+1]=0:(e=a[u]/n,r=a[u+1]/n,9<(i=e*e+r*r)&&(i=3*n/Math.sqrt(i),a[u]=i*e,a[u+1]=i*r));u=-1;for(;++u<=c;)i=(t[Math.min(c,u+1)][0]-t[Math.max(0,u-1)][0])/(6*(1+a[u]*a[u])),o.push([i||0,a[u]*i||0]);return o}(t))}});function Fa(t){return 1<t.length?t.join("L"):t+"Z"}function Ga(t){return t.join("L")+"Z"}function Ia(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("V",(r=t[n])[1],"H",r[0]);return i.join("")}function Ua(t){for(var n=0,e=t.length,r=t[0],i=[r[0],",",r[1]];++n<e;)i.push("H",(r=t[n])[0],"V",r[1]);return i.join("")}function Wa(t,n){if(n.length<1||t.length!=n.length&&t.length!=n.length+2)return Fa(t);var e=t.length!=n.length,r="",i=t[0],o=t[1],a=n[0],u=a,c=1;if(e&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=t[1],c=2),1<n.length){u=n[1],o=t[c],c++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1];for(var s=2;s<n.length;s++,c++)o=t[c],u=n[s],r+="S"+(o[0]-u[0])+","+(o[1]-u[1])+","+o[0]+","+o[1]}if(e){var l=t[c];r+="Q"+(o[0]+2*u[0]/3)+","+(o[1]+2*u[1]/3)+","+l[0]+","+l[1]}return r}function Ba(t,n){for(var e,r=[],i=(1-n)/2,o=t[0],a=t[1],u=1,c=t.length;++u<c;)e=o,o=a,a=t[u],r.push([i*(a[0]-e[0]),i*(a[1]-e[1])]);return r}function Ya(t){if(t.length<3)return Fa(t);var n=1,e=t.length,r=t[0],i=r[0],o=r[1],a=[i,i,i,(r=t[1])[0]],u=[o,o,o,r[1]],c=[i,",",o,"L",$a(Xa,a),",",$a(Xa,u)];for(t.push(t[e-1]);++n<=e;)r=t[n],a.shift(),a.push(r[0]),u.shift(),u.push(r[1]),Ja(c,a,u);return t.pop(),c.push("L",r),c.join("")}function $a(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]}Ra.forEach(function(t,n){n.key=t,n.closed=/-closed$/.test(t)});var Va=[0,2/3,1/3,0],Za=[0,1/3,2/3,0],Xa=[0,1/6,2/3,1/6];function Ja(t,n,e){t.push("C",$a(Va,n),",",$a(Va,e),",",$a(Za,n),",",$a(Za,e),",",$a(Xa,n),",",$a(Xa,e))}function Ka(t,n){return(n[1]-t[1])/(n[0]-t[0])}function Qa(t){for(var n,e,r,i=-1,o=t.length;++i<o;)e=(n=t[i])[0],r=n[1]-At,n[0]=e*Math.cos(r),n[1]=e*Math.sin(r);return t}function tu(d){var g=ti,v=ti,y=0,m=ni,x=Ye,b=Fa,n=b.key,w=b,M="L",_=.7;function e(t){var n,e,r,i=[],o=[],a=[],u=-1,c=t.length,s=vn(g),l=vn(y),f=g===v?function(){return e}:vn(v),h=y===m?function(){return r}:vn(m);function p(){i.push("M",b(d(a),_),M,w(d(o.reverse()),_),"Z")}for(;++u<c;)x.call(this,n=t[u],u)?(o.push([e=+s.call(this,n,u),r=+l.call(this,n,u)]),a.push([+f.call(this,n,u),+h.call(this,n,u)])):o.length&&(p(),o=[],a=[]);return o.length&&p(),i.length?i.join(""):null}return e.x=function(t){return arguments.length?(g=v=t,e):v},e.x0=function(t){return arguments.length?(g=t,e):g},e.x1=function(t){return arguments.length?(v=t,e):v},e.y=function(t){return arguments.length?(y=m=t,e):m},e.y0=function(t){return arguments.length?(y=t,e):y},e.y1=function(t){return arguments.length?(m=t,e):m},e.defined=function(t){return arguments.length?(x=t,e):x},e.interpolate=function(t){return arguments.length?(n="function"==typeof t?b=t:(b=Ra.get(t)||Fa).key,w=b.reverse||b,M=b.closed?"M":"L",e):n},e.tension=function(t){return arguments.length?(_=t,e):_},e}function nu(t){return t.radius}function eu(t){return[t.x,t.y]}function ru(){return 64}function iu(){return"circle"}function ou(t){var n=Math.sqrt(t/kt);return"M0,"+n+"A"+n+","+n+" 0 1,1 0,"+-n+"A"+n+","+n+" 0 1,1 0,"+n+"Z"}z.svg.line.radial=function(){var t=Pa(Qa);return t.radius=t.x,delete t.x,t.angle=t.y,delete t.y,t},(Ia.reverse=Ua).reverse=Ia,z.svg.area=function(){return tu(D)},z.svg.area.radial=function(){var t=tu(Qa);return t.radius=t.x,delete t.x,t.innerRadius=t.x0,delete t.x0,t.outerRadius=t.x1,delete t.x1,t.angle=t.y,delete t.y,t.startAngle=t.y0,delete t.y0,t.endAngle=t.y1,delete t.y1,t},z.svg.chord=function(){var a=Fr,u=Gr,c=nu,s=Ha,l=za;function n(t,n){var e,r,i=f(this,a,t,n),o=f(this,u,t,n);return"M"+i.p0+h(i.r,i.p1,i.a1-i.a0)+(r=o,(e=i).a0==r.a0&&e.a1==r.a1?p(i.r,i.p1,i.r,i.p0):p(i.r,i.p1,o.r,o.p0)+h(o.r,o.p1,o.a1-o.a0)+p(o.r,o.p1,i.r,i.p0))+"Z"}function f(t,n,e,r){var i=n.call(t,e,r),o=c.call(t,i,r),a=s.call(t,i,r)-At,u=l.call(t,i,r)-At;return{r:o,a0:a,a1:u,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(u),o*Math.sin(u)]}}function h(t,n,e){return"A"+t+","+t+" 0 "+ +(kt<e)+",1 "+n}function p(t,n,e,r){return"Q 0,0 "+r}return n.radius=function(t){return arguments.length?(c=vn(t),n):c},n.source=function(t){return arguments.length?(a=vn(t),n):a},n.target=function(t){return arguments.length?(u=vn(t),n):u},n.startAngle=function(t){return arguments.length?(s=vn(t),n):s},n.endAngle=function(t){return arguments.length?(l=vn(t),n):l},n},z.svg.diagonal=function(){var a=Fr,u=Gr,c=eu;function n(t,n){var e=a.call(this,t,n),r=u.call(this,t,n),i=(e.y+r.y)/2,o=[e,{x:e.x,y:i},{x:r.x,y:i},r];return"M"+(o=o.map(c))[0]+"C"+o[1]+" "+o[2]+" "+o[3]}return n.source=function(t){return arguments.length?(a=vn(t),n):a},n.target=function(t){return arguments.length?(u=vn(t),n):u},n.projection=function(t){return arguments.length?(c=t,n):c},n},z.svg.diagonal.radial=function(){var t=z.svg.diagonal(),n=eu,e=t.projection;return t.projection=function(t){return arguments.length?e((r=n=t,function(){var t=r.apply(this,arguments),n=t[0],e=t[1]-At;return[n*Math.cos(e),n*Math.sin(e)]})):n;var r},t},z.svg.symbol=function(){var e=iu,r=ru;function n(t,n){return(au.get(e.call(this,t,n))||ou)(r.call(this,t,n))}return n.type=function(t){return arguments.length?(e=vn(t),n):e},n.size=function(t){return arguments.length?(r=vn(t),n):r},n};var au=z.map({circle:ou,cross:function(t){var n=Math.sqrt(t/5)/2;return"M"+-3*n+","+-n+"H"+-n+"V"+-3*n+"H"+n+"V"+-n+"H"+3*n+"V"+n+"H"+n+"V"+3*n+"H"+-n+"V"+n+"H"+-3*n+"Z"},diamond:function(t){var n=Math.sqrt(t/(2*cu)),e=n*cu;return"M0,"+-n+"L"+e+",0 0,"+n+" "+-e+",0Z"},square:function(t){var n=Math.sqrt(t)/2;return"M"+-n+","+-n+"L"+n+","+-n+" "+n+","+n+" "+-n+","+n+"Z"},"triangle-down":function(t){var n=Math.sqrt(t/uu),e=n*uu/2;return"M0,"+e+"L"+n+","+-e+" "+-n+","+-e+"Z"},"triangle-up":function(t){var n=Math.sqrt(t/uu),e=n*uu/2;return"M0,"+-e+"L"+n+","+e+" "+-n+","+e+"Z"}});z.svg.symbolTypes=au.keys();var uu=Math.sqrt(3),cu=Math.tan(30*Et);Y.transition=function(t){for(var n,e,r=hu||++gu,i=mu(t),o=[],a=pu||{time:Date.now(),ease:ro,delay:0,duration:250},u=-1,c=this.length;++u<c;){o.push(n=[]);for(var s=this[u],l=-1,f=s.length;++l<f;)(e=s[l])&&xu(e,l,i,r,a),n.push(e)}return fu(o,i,r)},Y.interrupt=function(t){return this.each(null==t?su:lu(mu(t)))};var su=lu(mu());function lu(r){return function(){var t,n,e;(t=this[r])&&(e=t[n=t.active])&&(e.timer.c=null,e.timer.t=NaN,--t.count?delete t[n]:delete this[r],t.active+=.5,e.event&&e.event.interrupt.call(this,this.__data__,e.index))}}function fu(t,n,e){return G(t,du),t.namespace=n,t.id=e,t}var hu,pu,du=[],gu=0;function vu(t,r,i,o){var a=t.id,u=t.namespace;return st(t,"function"==typeof i?function(t,n,e){t[u][a].tween.set(r,o(i.call(t,t.__data__,n,e)))}:(i=o(i),function(t){t[u][a].tween.set(r,i)}))}function yu(t){return null==t&&(t=""),function(){this.textContent=t}}function mu(t){return null==t?"__transition__":"__transition_"+t+"__"}function xu(o,a,i,u,t){var c,s,l,f,h,p=o[i]||(o[i]={active:0,count:0}),d=p[u];function e(t){var n=p.active,e=p[n];for(var r in e&&(e.timer.c=null,e.timer.t=NaN,--p.count,delete p[n],e.event&&e.event.interrupt.call(o,o.__data__,e.index)),p)if(+r<u){var i=p[r];i.timer.c=null,i.timer.t=NaN,--p.count,delete p[r]}s.c=g,kn(function(){return s.c&&g(t||1)&&(s.c=null,s.t=NaN),1},0,c),p.active=u,d.event&&d.event.start.call(o,o.__data__,a),h=[],d.tween.forEach(function(t,n){(n=n.call(o,o.__data__,a))&&h.push(n)}),f=d.ease,l=d.duration}function g(t){for(var n=t/l,e=f(n),r=h.length;0<r;)h[--r].call(o,e);if(1<=n)return d.event&&d.event.end.call(o,o.__data__,a),--p.count?delete p[u]:delete o[i],1}d||(c=t.time,s=kn(function(t){var n=d.delay;if(s.t=n+c,n<=t)return e(t-n);s.c=e},0,c),d=p[u]={tween:new m,time:c,timer:s,delay:t.delay,duration:t.duration,ease:t.ease,index:a},t=null,++p.count)}du.call=Y.call,du.empty=Y.empty,du.node=Y.node,du.size=Y.size,z.transition=function(t,n){return t&&t.transition?hu?t.transition(n):t:z.selection().transition(t)},(z.transition.prototype=du).select=function(t){var n,e,r,i=this.id,o=this.namespace,a=[];t=$(t);for(var u=-1,c=this.length;++u<c;){a.push(n=[]);for(var s=this[u],l=-1,f=s.length;++l<f;)(r=s[l])&&(e=t.call(r,r.__data__,l,u))?("__data__"in r&&(e.__data__=r.__data__),xu(e,l,o,i,r[o][i]),n.push(e)):n.push(null)}return fu(a,o,i)},du.selectAll=function(t){var n,e,r,i,o,a=this.id,u=this.namespace,c=[];t=V(t);for(var s=-1,l=this.length;++s<l;)for(var f=this[s],h=-1,p=f.length;++h<p;)if(r=f[h]){o=r[u][a],e=t.call(r,r.__data__,h,s),c.push(n=[]);for(var d=-1,g=e.length;++d<g;)(i=e[d])&&xu(i,d,u,a,o),n.push(i)}return fu(c,u,a)},du.filter=function(t){var n,e,r=[];"function"!=typeof t&&(t=ct(t));for(var i=0,o=this.length;i<o;i++){r.push(n=[]);for(var a,u=0,c=(a=this[i]).length;u<c;u++)(e=a[u])&&t.call(e,e.__data__,u,i)&&n.push(e)}return fu(r,this.namespace,this.id)},du.tween=function(n,e){var r=this.id,i=this.namespace;return arguments.length<2?this.node()[i][r].tween.get(n):st(this,null==e?function(t){t[i][r].tween.remove(n)}:function(t){t[i][r].tween.set(n,e)})},du.attr=function(t,n){if(arguments.length<2){for(n in t)this.attr(n,t[n]);return this}var r="transform"==t?go:Vi,i=z.ns.qualify(t);function o(){this.removeAttribute(i)}function a(){this.removeAttributeNS(i.space,i.local)}return vu(this,"attr."+t,n,i.local?function(e){return null==e?a:(e+="",function(){var n,t=this.getAttributeNS(i.space,i.local);return t!==e&&(n=r(t,e),function(t){this.setAttributeNS(i.space,i.local,n(t))})})}:function(e){return null==e?o:(e+="",function(){var n,t=this.getAttribute(i);return t!==e&&(n=r(t,e),function(t){this.setAttribute(i,n(t))})})})},du.attrTween=function(t,r){var i=z.ns.qualify(t);return this.tween("attr."+t,i.local?function(t,n){var e=r.call(this,t,n,this.getAttributeNS(i.space,i.local));return e&&function(t){this.setAttributeNS(i.space,i.local,e(t))}}:function(t,n){var e=r.call(this,t,n,this.getAttribute(i));return e&&function(t){this.setAttribute(i,e(t))}})},du.style=function(r,t,i){var n=arguments.length;if(n<3){if("string"!=typeof r){for(i in n<2&&(t=""),r)this.style(i,r[i],t);return this}i=""}function o(){this.style.removeProperty(r)}return vu(this,"style."+r,t,function(e){return null==e?o:(e+="",function(){var n,t=O(this).getComputedStyle(this,null).getPropertyValue(r);return t!==e&&(n=Vi(t,e),function(t){this.style.setProperty(r,n(t),i)})})})},du.styleTween=function(r,i,o){return arguments.length<3&&(o=""),this.tween("style."+r,function(t,n){var e=i.call(this,t,n,O(this).getComputedStyle(this,null).getPropertyValue(r));return e&&function(t){this.style.setProperty(r,e(t),o)}})},du.text=function(t){return vu(this,"text",t,yu)},du.remove=function(){var n=this.namespace;return this.each("end.transition",function(){var t;this[n].count<2&&(t=this.parentNode)&&t.removeChild(this)})},du.ease=function(n){var e=this.id,r=this.namespace;return arguments.length<1?this.node()[r][e].ease:("function"!=typeof n&&(n=z.ease.apply(z,arguments)),st(this,function(t){t[r][e].ease=n}))},du.delay=function(r){var i=this.id,o=this.namespace;return arguments.length<1?this.node()[o][i].delay:st(this,"function"==typeof r?function(t,n,e){t[o][i].delay=+r.call(t,t.__data__,n,e)}:(r=+r,function(t){t[o][i].delay=r}))},du.duration=function(r){var i=this.id,o=this.namespace;return arguments.length<1?this.node()[o][i].duration:st(this,"function"==typeof r?function(t,n,e){t[o][i].duration=Math.max(1,r.call(t,t.__data__,n,e))}:(r=Math.max(1,r),function(t){t[o][i].duration=r}))},du.each=function(r,e){var i=this.id,o=this.namespace;if(arguments.length<2){var t=pu,n=hu;try{hu=i,st(this,function(t,n,e){pu=t[o][i],r.call(t,t.__data__,n,e)})}finally{pu=t,hu=n}}else st(this,function(t){var n=t[o][i];(n.event||(n.event=z.dispatch("start","end","interrupt"))).on(r,e)});return this},du.transition=function(){for(var t,n,e,r=this.id,i=++gu,o=this.namespace,a=[],u=0,c=this.length;u<c;u++){a.push(t=[]);for(var s,l=0,f=(s=this[u]).length;l<f;l++)(n=s[l])&&xu(n,l,o,i,{time:(e=n[o][r]).time,ease:e.ease,delay:e.delay+e.duration,duration:e.duration}),t.push(n)}return fu(a,o,i)},z.svg.axis=function(){var C,A=z.scale.linear(),E=bu,N=6,T=6,L=3,j=[10],H=null;function e(t){t.each(function(){var t,n=z.select(this),e=this.__chart__||A,r=this.__chart__=A.copy(),i=null==H?r.ticks?r.ticks.apply(r,j):r.domain():H,o=null==C?r.tickFormat?r.tickFormat.apply(r,j):D:C,a=n.selectAll(".tick").data(i,r),u=a.enter().insert("g",".domain").attr("class","tick").style("opacity",Mt),c=z.transition(a.exit()).style("opacity",Mt).remove(),s=z.transition(a.order()).style("opacity",1),l=Math.max(N,0)+L,f=sa(r),h=n.selectAll(".domain").data([0]),p=(h.enter().append("path").attr("class","domain"),z.transition(h));u.append("line"),u.append("text");var d,g,v,y,m=u.select("line"),x=s.select("line"),b=a.select("text").text(o),w=u.select("text"),M=s.select("text"),_="top"===E||"left"===E?-1:1;if("bottom"===E||"top"===E?(t=Mu,d="x",v="y",g="x2",y="y2",b.attr("dy",_<0?"0em":".71em").style("text-anchor","middle"),p.attr("d","M"+f[0]+","+_*T+"V0H"+f[1]+"V"+_*T)):(t=_u,d="y",v="x",g="y2",y="x2",b.attr("dy",".32em").style("text-anchor",_<0?"end":"start"),p.attr("d","M"+_*T+","+f[0]+"H0V"+f[1]+"H"+_*T)),m.attr(y,_*N),w.attr(v,_*l),x.attr(g,0).attr(y,_*N),M.attr(d,0).attr(v,_*l),r.rangeBand){var k=r,S=k.rangeBand()/2;e=r=function(t){return k(t)+S}}else e.rangeBand?e=r:c.call(t,r,e);u.call(t,e,r),s.call(t,r,r)})}return e.scale=function(t){return arguments.length?(A=t,e):A},e.orient=function(t){return arguments.length?(E=t in wu?t+"":bu,e):E},e.ticks=function(){return arguments.length?(j=h(arguments),e):j},e.tickValues=function(t){return arguments.length?(H=t,e):H},e.tickFormat=function(t){return arguments.length?(C=t,e):C},e.tickSize=function(t){var n=arguments.length;return n?(N=+t,T=+arguments[n-1],e):N},e.innerTickSize=function(t){return arguments.length?(N=+t,e):N},e.outerTickSize=function(t){return arguments.length?(T=+t,e):T},e.tickPadding=function(t){return arguments.length?(L=+t,e):L},e.tickSubdivide=function(){return arguments.length&&e},e};var bu="bottom",wu={top:1,right:1,bottom:1,left:1};function Mu(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate("+(isFinite(n)?n:r(t))+",0)"})}function _u(t,e,r){t.attr("transform",function(t){var n=e(t);return"translate(0,"+(isFinite(n)?n:r(t))+")"})}z.svg.brush=function(){var m,x,b=R(A,"brushstart","brush","brushend"),w=null,M=null,_=[0,0],k=[0,0],S=!0,C=!0,a=Su[0];function A(t){t.each(function(){var t=z.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",u).on("touchstart.brush",u),n=t.selectAll(".background").data([0]);n.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var e=t.selectAll(".resize").data(a,D);e.exit().remove(),e.enter().append("g").attr("class",function(t){return"resize "+t}).style("cursor",function(t){return ku[t]}).append("rect").attr("x",function(t){return/[ew]$/.test(t)?-3:null}).attr("y",function(t){return/^[ns]/.test(t)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),e.style("display",A.empty()?"none":null);var r,i=z.transition(t),o=z.transition(n);w&&(r=sa(w),o.attr("x",r[0]).attr("width",r[1]-r[0]),N(i)),M&&(r=sa(M),o.attr("y",r[0]).attr("height",r[1]-r[0]),T(i)),E(i)})}function E(t){t.selectAll(".resize").attr("transform",function(t){return"translate("+_[+/e$/.test(t)]+","+k[+/^s/.test(t)]+")"})}function N(t){t.select(".extent").attr("x",_[0]),t.selectAll(".extent,.n>rect,.s>rect").attr("width",_[1]-_[0])}function T(t){t.select(".extent").attr("y",k[0]),t.selectAll(".extent,.e>rect,.w>rect").attr("height",k[1]-k[0])}function u(){var f,e,r=this,t=z.select(z.event.target),i=b.of(r,arguments),o=z.select(r),n=t.datum(),a=!/^(n|s)$/.test(n)&&w,u=!/^(e|w)$/.test(n)&&M,h=t.classed("extent"),c=mt(r),p=z.mouse(r),s=z.select(O(r)).on("keydown.brush",function(){32==z.event.keyCode&&(h||(f=null,p[0]-=_[1],p[1]-=k[1],h=2),q())}).on("keyup.brush",function(){32==z.event.keyCode&&2==h&&(p[0]+=_[1],p[1]+=k[1],h=0,q())});if(z.event.changedTouches?s.on("touchmove.brush",g).on("touchend.brush",y):s.on("mousemove.brush",g).on("mouseup.brush",y),o.interrupt().selectAll("*").interrupt(),h)p[0]=_[0]-p[0],p[1]=k[0]-p[1];else if(n){var l=+/w$/.test(n),d=+/^n/.test(n);e=[_[1-l]-p[0],k[1-d]-p[1]],p[0]=_[l],p[1]=k[d]}else z.event.altKey&&(f=p.slice());function g(){var t=z.mouse(r),n=!1;e&&(t[0]+=e[0],t[1]+=e[1]),h||(z.event.altKey?(f||(f=[(_[0]+_[1])/2,(k[0]+k[1])/2]),p[0]=_[+(t[0]<f[0])],p[1]=k[+(t[1]<f[1])]):f=null),a&&v(t,w,0)&&(N(o),n=!0),u&&v(t,M,1)&&(T(o),n=!0),n&&(E(o),i({type:"brush",mode:h?"move":"resize"}))}function v(t,n,e){var r,i,o=sa(n),a=o[0],u=o[1],c=p[e],s=e?k:_,l=s[1]-s[0];if(h&&(a-=c,u-=l+c),r=(e?C:S)?Math.max(a,Math.min(u,t[e])):t[e],h?i=(r+=c)+l:(f&&(c=Math.max(a,Math.min(u,2*f[e]-r))),c<r?(i=r,r=c):i=c),s[0]!=r||s[1]!=i)return e?x=null:m=null,s[0]=r,s[1]=i,!0}function y(){g(),o.style("pointer-events","all").selectAll(".resize").style("display",A.empty()?"none":null),z.select("body").style("cursor",null),s.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),c(),i({type:"brushend"})}o.style("pointer-events","none").selectAll(".resize").style("display",null),z.select("body").style("cursor",t.style("cursor")),i({type:"brushstart"}),g()}return A.event=function(t){t.each(function(){var r=b.of(this,arguments),i={x:_,y:k,i:m,j:x},t=this.__chart__||i;this.__chart__=i,hu?z.select(this).transition().each("start.brush",function(){m=t.i,x=t.j,_=t.x,k=t.y,r({type:"brushstart"})}).tween("brush:brush",function(){var n=Zi(_,i.x),e=Zi(k,i.y);return m=x=null,function(t){_=i.x=n(t),k=i.y=e(t),r({type:"brush",mode:"resize"})}}).each("end.brush",function(){m=i.i,x=i.j,r({type:"brush",mode:"resize"}),r({type:"brushend"})}):(r({type:"brushstart"}),r({type:"brush",mode:"resize"}),r({type:"brushend"}))})},A.x=function(t){return arguments.length?(a=Su[!(w=t)<<1|!M],A):w},A.y=function(t){return arguments.length?(a=Su[!w<<1|!(M=t)],A):M},A.clamp=function(t){return arguments.length?(w&&M?(S=!!t[0],C=!!t[1]):w?S=!!t:M&&(C=!!t),A):w&&M?[S,C]:w?S:M?C:null},A.extent=function(t){var n,e,r,i,o;return arguments.length?(w&&(n=t[0],e=t[1],M&&(n=n[0],e=e[0]),m=[n,e],w.invert&&(n=w(n),e=w(e)),e<n&&(o=n,n=e,e=o),n==_[0]&&e==_[1]||(_=[n,e])),M&&(r=t[0],i=t[1],w&&(r=r[1],i=i[1]),x=[r,i],M.invert&&(r=M(r),i=M(i)),i<r&&(o=r,r=i,i=o),r==k[0]&&i==k[1]||(k=[r,i])),A):(w&&(m?(n=m[0],e=m[1]):(n=_[0],e=_[1],w.invert&&(n=w.invert(n),e=w.invert(e)),e<n&&(o=n,n=e,e=o))),M&&(x?(r=x[0],i=x[1]):(r=k[0],i=k[1],M.invert&&(r=M.invert(r),i=M.invert(i)),i<r&&(o=r,r=i,i=o))),w&&M?[[n,r],[e,i]]:w?[n,e]:M&&[r,i])},A.clear=function(){return A.empty()||(_=[0,0],k=[0,0],m=x=null),A},A.empty=function(){return!!w&&_[0]==_[1]||!!M&&k[0]==k[1]},z.rebind(A,b,"on")};var ku={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Su=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Cu=Hn.format=ue.timeFormat,Au=Cu.utc,Eu=Au("%Y-%m-%dT%H:%M:%S.%LZ");function Nu(t){return t.toISOString()}function Tu(n,i,t){function a(t){return n(t)}function u(t,n){var e=(t[1]-t[0])/n,r=z.bisect(ju,e);return r==ju.length?[i.year,ya(t.map(function(t){return t/31536e6}),n)[2]]:r?i[e/ju[r-1]<ju[r]/e?r-1:r]:[Ou,ya(t,n)[2]]}return a.invert=function(t){return Lu(n.invert(t))},a.domain=function(t){return arguments.length?(n.domain(t),a):n.domain().map(Lu)},a.nice=function(n,e){var t=a.domain(),r=ca(t),i=null==n?u(r,10):"number"==typeof n&&u(r,n);function o(t){return!isNaN(t)&&!n.range(t,Lu(+t+1),e).length}return i&&(n=i[0],e=i[1]),a.domain(fa(t,1<e?{floor:function(t){for(;o(t=n.floor(t));)t=Lu(t-1);return t},ceil:function(t){for(;o(t=n.ceil(t));)t=Lu(+t+1);return t}}:n))},a.ticks=function(t,n){var e=ca(a.domain()),r=null==t?u(e,10):"number"==typeof t?u(e,t):!t.range&&[{range:t},n];return r&&(t=r[0],n=r[1]),t.range(e[0],Lu(+e[1]+1),n<1?1:n)},a.tickFormat=function(){return t},a.copy=function(){return Tu(n.copy(),i,t)},ga(a,n)}function Lu(t){return new Date(t)}Cu.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?Nu:Eu,Nu.parse=function(t){var n=new Date(t);return isNaN(n)?null:n},Nu.toString=Eu.toString,Hn.second=qn(function(t){return new zn(1e3*Math.floor(t/1e3))},function(t,n){t.setTime(t.getTime()+1e3*Math.floor(n))},function(t){return t.getSeconds()}),Hn.seconds=Hn.second.range,Hn.seconds.utc=Hn.second.utc.range,Hn.minute=qn(function(t){return new zn(6e4*Math.floor(t/6e4))},function(t,n){t.setTime(t.getTime()+6e4*Math.floor(n))},function(t){return t.getMinutes()}),Hn.minutes=Hn.minute.range,Hn.minutes.utc=Hn.minute.utc.range,Hn.hour=qn(function(t){var n=t.getTimezoneOffset()/60;return new zn(36e5*(Math.floor(t/36e5-n)+n))},function(t,n){t.setTime(t.getTime()+36e5*Math.floor(n))},function(t){return t.getHours()}),Hn.hours=Hn.hour.range,Hn.hours.utc=Hn.hour.utc.range,Hn.month=qn(function(t){return(t=Hn.day(t)).setDate(1),t},function(t,n){t.setMonth(t.getMonth()+n)},function(t){return t.getMonth()}),Hn.months=Hn.month.range,Hn.months.utc=Hn.month.utc.range;var ju=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Hu=[[Hn.second,1],[Hn.second,5],[Hn.second,15],[Hn.second,30],[Hn.minute,1],[Hn.minute,5],[Hn.minute,15],[Hn.minute,30],[Hn.hour,1],[Hn.hour,3],[Hn.hour,6],[Hn.hour,12],[Hn.day,1],[Hn.day,2],[Hn.week,1],[Hn.month,1],[Hn.month,3],[Hn.year,1]],zu=Cu.multi([[".%L",function(t){return t.getMilliseconds()}],[":%S",function(t){return t.getSeconds()}],["%I:%M",function(t){return t.getMinutes()}],["%I %p",function(t){return t.getHours()}],["%a %d",function(t){return t.getDay()&&1!=t.getDate()}],["%b %d",function(t){return 1!=t.getDate()}],["%B",function(t){return t.getMonth()}],["%Y",Ye]]),Ou={range:function(t,n,e){return z.range(Math.ceil(t/e)*e,+n,e).map(Lu)},floor:D,ceil:D};Hu.year=Hn.year,Hn.scale=function(){return Tu(z.scale.linear(),Hu,zu)};var Du=Hu.map(function(t){return[t[0].utc,t[1]]}),qu=Au.multi([[".%L",function(t){return t.getUTCMilliseconds()}],[":%S",function(t){return t.getUTCSeconds()}],["%I:%M",function(t){return t.getUTCMinutes()}],["%I %p",function(t){return t.getUTCHours()}],["%a %d",function(t){return t.getUTCDay()&&1!=t.getUTCDate()}],["%b %d",function(t){return 1!=t.getUTCDate()}],["%B",function(t){return t.getUTCMonth()}],["%Y",Ye]]);function Pu(t){return JSON.parse(t.responseText)}function Ru(t){var n=x.createRange();return n.selectNode(x.body),n.createContextualFragment(t.responseText)}Du.year=Hn.year.utc,Hn.scale.utc=function(){return Tu(z.scale.linear(),Du,qu)},z.text=yn(function(t){return t.responseText}),z.json=function(t,n){return mn(t,"application/json",Pu,n)},z.html=function(t,n){return mn(t,"text/html",Ru,n)},z.xml=yn(function(t){return t.responseXML}),"function"==typeof define&&define.amd?(this.d3=z,define(z)):"object"==typeof Fu&&Fu.exports?Fu.exports=z:this.d3=z}()},{}],2:[function(t,n,e){"use strict";var r=Object.prototype.hasOwnProperty,p="~";function s(){}function o(t,n,e){this.fn=t,this.context=n,this.once=e||!1}function i(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),(new s).__proto__||(p=!1)),i.prototype.eventNames=function(){var t,n,e=[];if(0===this._eventsCount)return e;for(n in t=this._events)r.call(t,n)&&e.push(p?n.slice(1):n);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(t)):e},i.prototype.listeners=function(t,n){var e=p?p+t:t,r=this._events[e];if(n)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},i.prototype.emit=function(t,n,e,r,i,o){var a=p?p+t:t;if(!this._events[a])return!1;var u,c,s=this._events[a],l=arguments.length;if(s.fn){switch(s.once&&this.removeListener(t,s.fn,void 0,!0),l){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,n),!0;case 3:return s.fn.call(s.context,n,e),!0;case 4:return s.fn.call(s.context,n,e,r),!0;case 5:return s.fn.call(s.context,n,e,r,i),!0;case 6:return s.fn.call(s.context,n,e,r,i,o),!0}for(c=1,u=new Array(l-1);c<l;c++)u[c-1]=arguments[c];s.fn.apply(s.context,u)}else{var f,h=s.length;for(c=0;c<h;c++)switch(s[c].once&&this.removeListener(t,s[c].fn,void 0,!0),l){case 1:s[c].fn.call(s[c].context);break;case 2:s[c].fn.call(s[c].context,n);break;case 3:s[c].fn.call(s[c].context,n,e);break;case 4:s[c].fn.call(s[c].context,n,e,r);break;default:if(!u)for(f=1,u=new Array(l-1);f<l;f++)u[f-1]=arguments[f];s[c].fn.apply(s[c].context,u)}}return!0},i.prototype.on=function(t,n,e){var r=new o(n,e||this),i=p?p+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.once=function(t,n,e){var r=new o(n,e||this,!0),i=p?p+t:t;return this._events[i]?this._events[i].fn?this._events[i]=[this._events[i],r]:this._events[i].push(r):(this._events[i]=r,this._eventsCount++),this},i.prototype.removeListener=function(t,n,e,r){var i=p?p+t:t;if(!this._events[i])return this;if(!n)return 0==--this._eventsCount?this._events=new s:delete this._events[i],this;var o=this._events[i];if(o.fn)o.fn!==n||r&&!o.once||e&&o.context!==e||(0==--this._eventsCount?this._events=new s:delete this._events[i]);else{for(var a=0,u=[],c=o.length;a<c;a++)(o[a].fn!==n||r&&!o[a].once||e&&o[a].context!==e)&&u.push(o[a]);u.length?this._events[i]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new s:delete this._events[i]}return this},i.prototype.removeAllListeners=function(t){var n;return t?(n=p?p+t:t,this._events[n]&&(0==--this._eventsCount?this._events=new s:delete this._events[n])):(this._events=new s,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=p,i.EventEmitter=i,void 0!==n&&(n.exports=i)},{}],3:[function(t,Zt,Xt){(function(t){var r="__lodash_hash_undefined__",e=9007199254740991,M="[object Arguments]",_="[object Boolean]",k="[object Date]",S="[object Function]",C="[object GeneratorFunction]",A="[object Map]",E="[object Number]",N="[object Object]",i="[object Promise]",T="[object RegExp]",L="[object Set]",j="[object String]",H="[object Symbol]",o="[object WeakMap]",z="[object ArrayBuffer]",O="[object DataView]",D="[object Float32Array]",q="[object Float64Array]",P="[object Int8Array]",R="[object Int16Array]",F="[object Int32Array]",G="[object Uint8Array]",I="[object Uint8ClampedArray]",U="[object Uint16Array]",W="[object Uint32Array]",B=/\w*$/,a=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,Y={};Y[M]=Y["[object Array]"]=Y[z]=Y[O]=Y[_]=Y[k]=Y[D]=Y[q]=Y[P]=Y[R]=Y[F]=Y[A]=Y[E]=Y[N]=Y[T]=Y[L]=Y[j]=Y[H]=Y[G]=Y[I]=Y[U]=Y[W]=!0,Y["[object Error]"]=Y[S]=Y[o]=!1;var n="object"==typeof t&&t&&t.Object===Object&&t,c="object"==typeof self&&self&&self.Object===Object&&self,s=n||c||Function("return this")(),l="object"==typeof Xt&&Xt&&!Xt.nodeType&&Xt,f=l&&"object"==typeof Zt&&Zt&&!Zt.nodeType&&Zt,h=f&&f.exports===l;function $(t,n){return t.set(n[0],n[1]),t}function V(t,n){return t.add(n),t}function Z(t,n,e,r){var i=-1,o=t?t.length:0;for(r&&o&&(e=t[++i]);++i<o;)e=n(e,t[i],i,t);return e}function X(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}function J(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function p(n,e){return function(t){return n(e(t))}}function K(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}var d,g=Array.prototype,v=Function.prototype,y=Object.prototype,m=s["__core-js_shared__"],x=(d=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",b=v.toString,Q=y.hasOwnProperty,w=y.toString,tt=RegExp("^"+b.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=h?s.Buffer:void 0,et=s.Symbol,rt=s.Uint8Array,it=p(Object.getPrototypeOf,Object),ot=Object.create,at=y.propertyIsEnumerable,ut=g.splice,ct=Object.getOwnPropertySymbols,st=nt?nt.isBuffer:void 0,lt=p(Object.keys,Object),ft=Dt(s,"DataView"),ht=Dt(s,"Map"),pt=Dt(s,"Promise"),dt=Dt(s,"Set"),gt=Dt(s,"WeakMap"),vt=Dt(Object,"create"),yt=Gt(ft),mt=Gt(ht),xt=Gt(pt),bt=Gt(dt),wt=Gt(gt),Mt=et?et.prototype:void 0,_t=Mt?Mt.valueOf:void 0;function kt(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function St(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function Ct(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function At(t){this.__data__=new St(t)}function Et(t,n){var e,r,i,o=Ut(t)||(i=r=e=t)&&"object"==typeof i&&Wt(r)&&Q.call(e,"callee")&&(!at.call(e,"callee")||w.call(e)==M)?function(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}(t.length,String):[],a=o.length,u=!!a;for(var c in t)!n&&!Q.call(t,c)||u&&("length"==c||Rt(c,a))||o.push(c);return o}function Nt(t,n,e){var r=t[n];Q.call(t,n)&&It(r,e)&&(void 0!==e||n in t)||(t[n]=e)}function Tt(t,n){for(var e=t.length;e--;)if(It(t[e][0],n))return e;return-1}function Lt(e,r,i,o,t,n,a){var u;if(o&&(u=n?o(e,t,n,a):o(e)),void 0!==u)return u;if(!$t(e))return e;var c,s,l,f,h,p,d=Ut(e);if(d){if(u=function(t){var n=t.length,e=t.constructor(n);n&&"string"==typeof t[0]&&Q.call(t,"index")&&(e.index=t.index,e.input=t.input);return e}(e),!r)return function(t,n){var e=-1,r=t.length;n||(n=Array(r));for(;++e<r;)n[e]=t[e];return n}(e,u)}else{var g=Pt(e),v=g==S||g==C;if(Bt(e))return function(t,n){if(n)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}(e,r);if(g==N||g==M||v&&!n){if(X(e))return n?e:{};if(u="function"!=typeof(h=v?{}:e).constructor||Ft(h)?{}:$t(p=it(h))?ot(p):{},!r)return f=c=e,s=(l=u)&&zt(f,Vt(f),l),zt(c,qt(c),s)}else{if(!Y[g])return n?e:{};u=function(t,n,e,r){var i=t.constructor;switch(n){case z:return Ht(t);case _:case k:return new i(+t);case O:return d=t,g=r?Ht(d.buffer):d.buffer,new d.constructor(g,d.byteOffset,d.byteLength);case D:case q:case P:case R:case F:case G:case I:case U:case W:return h=t,p=r?Ht(h.buffer):h.buffer,new h.constructor(p,h.byteOffset,h.length);case A:return l=t,f=e,Z(r?f(J(l),!0):J(l),$,new l.constructor);case E:case j:return new i(t);case T:return(s=new(c=t).constructor(c.source,B.exec(c))).lastIndex=c.lastIndex,s;case L:return a=t,u=e,Z(r?u(K(a),!0):K(a),V,new a.constructor);case H:return o=t,_t?Object(_t.call(o)):{}}var o;var a,u;var c,s;var l,f;var h,p;var d,g}(e,g,Lt,r)}}a||(a=new At);var y,m,x,b=a.get(e);if(b)return b;if(a.set(e,u),!d)var w=i?(m=qt,x=Vt(y=e),Ut(y)?x:function(t,n){for(var e=-1,r=n.length,i=t.length;++e<r;)t[i+e]=n[e];return t}(x,m(y))):Vt(e);return function(t,n){for(var e=-1,r=t?t.length:0;++e<r&&!1!==n(t[e],e,t););}(w||e,function(t,n){w&&(t=e[n=t]),Nt(u,n,Lt(t,r,i,o,n,e,a))}),u}function jt(t){return!(!$t(t)||(n=t,x&&x in n))&&(Yt(t)||X(t)?tt:a).test(Gt(t));var n}function Ht(t){var n=new t.constructor(t.byteLength);return new rt(n).set(new rt(t)),n}function zt(t,n,e,r){e||(e={});for(var i=-1,o=n.length;++i<o;){var a=n[i],u=r?r(e[a],t[a],a,e,t):void 0;Nt(e,a,void 0===u?t[a]:u)}return e}function Ot(t,n){var e,r,i=t.__data__;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?i["string"==typeof n?"string":"hash"]:i.map}function Dt(t,n){var e,r,i=(r=n,null==(e=t)?void 0:e[r]);return jt(i)?i:void 0}kt.prototype.clear=function(){this.__data__=vt?vt(null):{}},kt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},kt.prototype.get=function(t){var n=this.__data__;if(vt){var e=n[t];return e===r?void 0:e}return Q.call(n,t)?n[t]:void 0},kt.prototype.has=function(t){var n=this.__data__;return vt?void 0!==n[t]:Q.call(n,t)},kt.prototype.set=function(t,n){return this.__data__[t]=vt&&void 0===n?r:n,this},St.prototype.clear=function(){this.__data__=[]},St.prototype.delete=function(t){var n=this.__data__,e=Tt(n,t);return!(e<0||(e==n.length-1?n.pop():ut.call(n,e,1),0))},St.prototype.get=function(t){var n=this.__data__,e=Tt(n,t);return e<0?void 0:n[e][1]},St.prototype.has=function(t){return-1<Tt(this.__data__,t)},St.prototype.set=function(t,n){var e=this.__data__,r=Tt(e,t);return r<0?e.push([t,n]):e[r][1]=n,this},Ct.prototype.clear=function(){this.__data__={hash:new kt,map:new(ht||St),string:new kt}},Ct.prototype.delete=function(t){return Ot(this,t).delete(t)},Ct.prototype.get=function(t){return Ot(this,t).get(t)},Ct.prototype.has=function(t){return Ot(this,t).has(t)},Ct.prototype.set=function(t,n){return Ot(this,t).set(t,n),this},At.prototype.clear=function(){this.__data__=new St},At.prototype.delete=function(t){return this.__data__.delete(t)},At.prototype.get=function(t){return this.__data__.get(t)},At.prototype.has=function(t){return this.__data__.has(t)},At.prototype.set=function(t,n){var e=this.__data__;if(e instanceof St){var r=e.__data__;if(!ht||r.length<199)return r.push([t,n]),this;e=this.__data__=new Ct(r)}return e.set(t,n),this};var qt=ct?p(ct,Object):function(){return[]},Pt=function(t){return w.call(t)};function Rt(t,n){return!!(n=null==n?e:n)&&("number"==typeof t||u.test(t))&&-1<t&&t%1==0&&t<n}function Ft(t){var n=t&&t.constructor;return t===("function"==typeof n&&n.prototype||y)}function Gt(t){if(null!=t){try{return b.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function It(t,n){return t===n||t!=t&&n!=n}(ft&&Pt(new ft(new ArrayBuffer(1)))!=O||ht&&Pt(new ht)!=A||pt&&Pt(pt.resolve())!=i||dt&&Pt(new dt)!=L||gt&&Pt(new gt)!=o)&&(Pt=function(t){var n=w.call(t),e=n==N?t.constructor:void 0,r=e?Gt(e):void 0;if(r)switch(r){case yt:return O;case mt:return A;case xt:return i;case bt:return L;case wt:return o}return n});var Ut=Array.isArray;function Wt(t){return null!=t&&("number"==typeof(n=t.length)&&-1<n&&n%1==0&&n<=e)&&!Yt(t);var n}var Bt=st||function(){return!1};function Yt(t){var n=$t(t)?w.call(t):"";return n==S||n==C}function $t(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function Vt(t){return Wt(t)?Et(t):function(t){if(!Ft(t))return lt(t);var n=[];for(var e in Object(t))Q.call(t,e)&&"constructor"!=e&&n.push(e);return n}(t)}Zt.exports=function(t){return Lt(t,!0,!0)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(t,P,n){(function(t){var p=200,r="__lodash_hash_undefined__",i="[object Function]",o="[object GeneratorFunction]",a=/^\[object .+?Constructor\]$/,n="object"==typeof t&&t&&t.Object===Object&&t,e="object"==typeof self&&self&&self.Object===Object&&self,u=n||e||Function("return this")();function d(t,n){return!!(t?t.length:0)&&-1<function(t,n,e){if(n!=n)return function(t,n,e,r){var i=t.length,o=e+(r?1:-1);for(;r?o--:++o<i;)if(n(t[o],o,t))return o;return-1}(t,c,e);var r=e-1,i=t.length;for(;++r<i;)if(t[r]===n)return r;return-1}(t,n,0)}function g(t,n,e){for(var r=-1,i=t?t.length:0;++r<i;)if(e(n,t[r]))return!0;return!1}function c(t){return t!=t}function v(t,n){return t.has(n)}function y(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}var s,l=Array.prototype,f=Function.prototype,h=Object.prototype,m=u["__core-js_shared__"],x=(s=/[^.]+$/.exec(m&&m.keys&&m.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"",b=f.toString,w=h.hasOwnProperty,M=h.toString,_=RegExp("^"+b.call(w).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=l.splice,S=D(u,"Map"),C=D(u,"Set"),A=D(Object,"create");function E(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function N(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function T(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function L(t){var n=-1,e=t?t.length:0;for(this.__data__=new T;++n<e;)this.add(t[n])}function j(t,n){for(var e,r,i=t.length;i--;)if((e=t[i][0])===(r=n)||e!=e&&r!=r)return i;return-1}function H(t){return!(!q(t)||(n=t,x&&x in n))&&((r=q(e=t)?M.call(e):"")==i||r==o||function(t){var n=!1;if(null!=t&&"function"!=typeof t.toString)try{n=!!(t+"")}catch(t){}return n}(t)?_:a).test(function(t){if(null!=t){try{return b.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(t));var n,e,r}E.prototype.clear=function(){this.__data__=A?A(null):{}},E.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},E.prototype.get=function(t){var n=this.__data__;if(A){var e=n[t];return e===r?void 0:e}return w.call(n,t)?n[t]:void 0},E.prototype.has=function(t){var n=this.__data__;return A?void 0!==n[t]:w.call(n,t)},E.prototype.set=function(t,n){return this.__data__[t]=A&&void 0===n?r:n,this},N.prototype.clear=function(){this.__data__=[]},N.prototype.delete=function(t){var n=this.__data__,e=j(n,t);return!(e<0||(e==n.length-1?n.pop():k.call(n,e,1),0))},N.prototype.get=function(t){var n=this.__data__,e=j(n,t);return e<0?void 0:n[e][1]},N.prototype.has=function(t){return-1<j(this.__data__,t)},N.prototype.set=function(t,n){var e=this.__data__,r=j(e,t);return r<0?e.push([t,n]):e[r][1]=n,this},T.prototype.clear=function(){this.__data__={hash:new E,map:new(S||N),string:new E}},T.prototype.delete=function(t){return O(this,t).delete(t)},T.prototype.get=function(t){return O(this,t).get(t)},T.prototype.has=function(t){return O(this,t).has(t)},T.prototype.set=function(t,n){return O(this,t).set(t,n),this},L.prototype.add=L.prototype.push=function(t){return this.__data__.set(t,r),this},L.prototype.has=function(t){return this.__data__.has(t)};var z=C&&1/y(new C([,-0]))[1]==1/0?function(t){return new C(t)}:function(){};function O(t,n){var e,r,i=t.__data__;return("string"==(r=typeof(e=n))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==e:null===e)?i["string"==typeof n?"string":"hash"]:i.map}function D(t,n){var e,r,i=(r=n,null==(e=t)?void 0:e[r]);return H(i)?i:void 0}function q(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}P.exports=function(t){return t&&t.length?function(t,n,e){var r=-1,i=d,o=t.length,a=!0,u=[],c=u;if(e)a=!1,i=g;else if(p<=o){var s=n?null:z(t);if(s)return y(s);a=!1,i=v,c=new L}else c=n?[]:u;t:for(;++r<o;){var l=t[r],f=n?n(l):l;if(l=e||0!==l?l:0,a&&f==f){for(var h=c.length;h--;)if(c[h]===f)continue t;n&&c.push(f),u.push(l)}else i(c,f,e)||(c!==u&&c.push(f),u.push(l))}return u}(t):[]}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],5:[function(t,n,e){var a=9007199254740991,s="[object Arguments]",u="[object Function]",c="[object GeneratorFunction]",r=/^(?:0|[1-9]\d*)$/;function i(n,t){return function(t,n){for(var e=-1,r=t?t.length:0,i=Array(r);++e<r;)i[e]=n(t[e],e,t);return i}(t,function(t){return n[t]})}var o,l,f=Object.prototype,h=f.hasOwnProperty,p=f.toString,d=f.propertyIsEnumerable,g=(o=Object.keys,l=Object,function(t){return o(l(t))});function v(t,n){var e,r,i,o=x(t)||(i=r=e=t)&&"object"==typeof i&&b(r)&&h.call(e,"callee")&&(!d.call(e,"callee")||p.call(e)==s)?function(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}(t.length,String):[],a=o.length,u=!!a;for(var c in t)!n&&!h.call(t,c)||u&&("length"==c||m(c,a))||o.push(c);return o}function y(t){if(e=(n=t)&&n.constructor,r="function"==typeof e&&e.prototype||f,n!==r)return g(t);var n,e,r,i=[];for(var o in Object(t))h.call(t,o)&&"constructor"!=o&&i.push(o);return i}function m(t,n){return!!(n=null==n?a:n)&&("number"==typeof t||r.test(t))&&-1<t&&t%1==0&&t<n}var x=Array.isArray;function b(t){return null!=t&&("number"==typeof(o=t.length)&&-1<o&&o%1==0&&o<=a)&&(i=typeof(r=n=t),!((e=!r||"object"!=i&&"function"!=i?"":p.call(n))==u||e==c));var n,e,r,i,o}n.exports=function(t){return t?i(t,b(n=t)?v(n):y(n)):[];var n}},{}],6:[function(t,n,e){var r,i;r=this,i=function(w){var n=Object.prototype.toString,M=Array.isArray||function(t){return"[object Array]"===n.call(t)};function s(t){return"function"==typeof t}function _(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function u(t,n){return null!=t&&"object"==typeof t&&n in t}var r=RegExp.prototype.test;var i=/\S/;function k(t){return n=i,e=t,!r.call(n,e);var n,e}var e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var S=/\s*/,C=/\s+/,A=/\s*=/,E=/\s*\}/,N=/#|\^|\/|>|\{|&|=|!/;function T(t){this.string=t,this.tail=t,this.pos=0}function o(t,n){this.view=t,this.cache={".":this.view},this.parent=n}function t(){this.cache={}}T.prototype.eos=function(){return""===this.tail},T.prototype.scan=function(t){var n=this.tail.match(t);if(!n||0!==n.index)return"";var e=n[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e},T.prototype.scanUntil=function(t){var n,e=this.tail.search(t);switch(e){case-1:n=this.tail,this.tail="";break;case 0:n="";break;default:n=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=n.length,n},o.prototype.push=function(t){return new o(t,this)},o.prototype.lookup=function(t){var n,e=this.cache;if(e.hasOwnProperty(t))n=e[t];else{for(var r,i,o=this,a=!1;o;){if(0<t.indexOf("."))for(n=o.view,r=t.split("."),i=0;null!=n&&i<r.length;)i===r.length-1&&(a=u(n,r[i])),n=n[r[i++]];else n=o.view[t],a=u(o.view,t);if(a)break;o=o.parent}e[t]=n}return s(n)&&(n=n.call(this.view)),n},t.prototype.clearCache=function(){this.cache={}},t.prototype.parse=function(t,n){var e=this.cache,r=e[t];return null==r&&(r=e[t]=function(t,n){if(!t)return[];var e,r,i,o=[],a=[],u=[],c=!1,s=!1;function l(){if(c&&!s)for(;u.length;)delete a[u.pop()];else u=[];s=c=!1}function f(t){if("string"==typeof t&&(t=t.split(C,2)),!M(t)||2!==t.length)throw new Error("Invalid tags: "+t);e=new RegExp(_(t[0])+"\\s*"),r=new RegExp("\\s*"+_(t[1])),i=new RegExp("\\s*"+_("}"+t[1]))}f(n||w.tags);for(var h,p,d,g,v,y,m=new T(t);!m.eos();){if(h=m.pos,d=m.scanUntil(e))for(var x=0,b=d.length;x<b;++x)k(g=d.charAt(x))?u.push(a.length):s=!0,a.push(["text",g,h,h+1]),h+=1,"\n"===g&&l();if(!m.scan(e))break;if(c=!0,p=m.scan(N)||"name",m.scan(S),"="===p?(d=m.scanUntil(A),m.scan(A),m.scanUntil(r)):"{"===p?(d=m.scanUntil(i),m.scan(E),m.scanUntil(r),p="&"):d=m.scanUntil(r),!m.scan(r))throw new Error("Unclosed tag at "+m.pos);if(v=[p,d,h,m.pos],a.push(v),"#"===p||"^"===p)o.push(v);else if("/"===p){if(!(y=o.pop()))throw new Error('Unopened section "'+d+'" at '+h);if(y[1]!==d)throw new Error('Unclosed section "'+y[1]+'" at '+h)}else"name"===p||"{"===p||"&"===p?s=!0:"="===p&&f(d)}if(y=o.pop())throw new Error('Unclosed section "'+y[1]+'" at '+m.pos);return function(t){for(var n,e=[],r=e,i=[],o=0,a=t.length;o<a;++o)switch((n=t[o])[0]){case"#":case"^":r.push(n),i.push(n),r=n[4]=[];break;case"/":i.pop()[5]=n[2],r=0<i.length?i[i.length-1][4]:e;break;default:r.push(n)}return e}(function(t){for(var n,e,r=[],i=0,o=t.length;i<o;++i)(n=t[i])&&("text"===n[0]&&e&&"text"===e[0]?(e[1]+=n[1],e[3]=n[3]):(r.push(n),e=n));return r}(a))}(t,n)),r},t.prototype.render=function(t,n,e){var r=this.parse(t),i=n instanceof o?n:new o(n);return this.renderTokens(r,i,e,t)},t.prototype.renderTokens=function(t,n,e,r){for(var i,o,a,u="",c=0,s=t.length;c<s;++c)a=void 0,"#"===(o=(i=t[c])[0])?a=this.renderSection(i,n,e,r):"^"===o?a=this.renderInverted(i,n,e,r):">"===o?a=this.renderPartial(i,n,e,r):"&"===o?a=this.unescapedValue(i,n):"name"===o?a=this.escapedValue(i,n):"text"===o&&(a=this.rawValue(i)),void 0!==a&&(u+=a);return u},t.prototype.renderSection=function(t,n,e,r){var i=this,o="",a=n.lookup(t[1]);if(a){if(M(a))for(var u=0,c=a.length;u<c;++u)o+=this.renderTokens(t[4],n.push(a[u]),e,r);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)o+=this.renderTokens(t[4],n.push(a),e,r);else if(s(a)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(n.view,r.slice(t[3],t[5]),function(t){return i.render(t,n,e)}))&&(o+=a)}else o+=this.renderTokens(t[4],n,e,r);return o}},t.prototype.renderInverted=function(t,n,e,r){var i=n.lookup(t[1]);if(!i||M(i)&&0===i.length)return this.renderTokens(t[4],n,e,r)},t.prototype.renderPartial=function(t,n,e){if(e){var r=s(e)?e(t[1]):e[t[1]];return null!=r?this.renderTokens(this.parse(r),n,e,r):void 0}},t.prototype.unescapedValue=function(t,n){var e=n.lookup(t[1]);if(null!=e)return e},t.prototype.escapedValue=function(t,n){var e=n.lookup(t[1]);if(null!=e)return w.escape(e)},t.prototype.rawValue=function(t){return t[1]},w.name="mustache.js",w.version="2.3.0",w.tags=["{{","}}"];var a=new t;return w.clearCache=function(){return a.clearCache()},w.parse=function(t,n){return a.parse(t,n)},w.render=function(t,n,e){if("string"!=typeof t)throw new TypeError('Invalid template! Template should be a "string" but "'+(M(r=t)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return a.render(t,n,e)},w.to_html=function(t,n,e,r){var i=w.render(t,n,e);if(!s(r))return i;r(i)},w.escape=function(t){return String(t).replace(/[&<>"'`=\/]/g,function(t){return e[t]})},w.Scanner=T,w.Context=o,w.Writer=t,w},"object"==typeof e&&e&&"string"!=typeof e.nodeName?i(e):"function"==typeof define&&define.amd?define(["exports"],i):(r.Mustache={},i(r.Mustache))},{}],7:[function(t,n,e){var r=n.exports={};function i(){}r.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,n="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(n){var e=[];return window.addEventListener("message",function(t){var n=t.source;n!==window&&null!==n||"process-tick"!==t.data||(t.stopPropagation(),0<e.length&&e.shift()())},!0),function(t){e.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),r.title="browser",r.browser=!0,r.env={},r.argv=[],r.on=i,r.addListener=i,r.once=i,r.off=i,r.removeListener=i,r.removeAllListeners=i,r.emit=i,r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")}},{}],8:[function(t,n,e){"function"==typeof Object.create?n.exports=function(t,n){t.super_=n,t.prototype=Object.create(n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:n.exports=function(t,n){t.super_=n;var e=function(){};e.prototype=n.prototype,t.prototype=new e,t.prototype.constructor=t}},{}],9:[function(t,n,e){n.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],10:[function(h,t,A){(function(r,i){var u=/%[sdj%]/g;A.format=function(t){if(!b(t)){for(var n=[],e=0;e<arguments.length;e++)n.push(c(arguments[e]));return n.join(" ")}e=1;for(var r=arguments,i=r.length,o=String(t).replace(u,function(t){if("%%"===t)return"%";if(i<=e)return t;switch(t){case"%s":return String(r[e++]);case"%d":return Number(r[e++]);case"%j":try{return JSON.stringify(r[e++])}catch(t){return"[Circular]"}default:return t}}),a=r[e];e<i;a=r[++e])m(a)||!l(a)?o+=" "+a:o+=" "+c(a);return o},A.deprecate=function(t,n){if(w(i.process))return function(){return A.deprecate(t,n).apply(this,arguments)};if(!0===r.noDeprecation)return t;var e=!1;return function(){if(!e){if(r.throwDeprecation)throw new Error(n);r.traceDeprecation?console.trace(n):console.error(n),e=!0}return t.apply(this,arguments)}};var t,o={};function c(t,n){var e={seen:[],stylize:s};return 3<=arguments.length&&(e.depth=arguments[2]),4<=arguments.length&&(e.colors=arguments[3]),y(n)?e.showHidden=n:n&&A._extend(e,n),w(e.showHidden)&&(e.showHidden=!1),w(e.depth)&&(e.depth=2),w(e.colors)&&(e.colors=!1),w(e.customInspect)&&(e.customInspect=!0),e.colors&&(e.stylize=a),p(e,t,e.depth)}function a(t,n){var e=c.styles[n];return e?"["+c.colors[e][0]+"m"+t+"["+c.colors[e][1]+"m":t}function s(t,n){return t}function p(n,e,r){if(n.customInspect&&e&&S(e.inspect)&&e.inspect!==A.inspect&&(!e.constructor||e.constructor.prototype!==e)){var t=e.inspect(r,n);return b(t)||(t=p(n,t,r)),t}var i=function(t,n){if(w(n))return t.stylize("undefined","undefined");if(b(n)){var e="'"+JSON.stringify(n).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(e,"string")}if(x(n))return t.stylize(""+n,"number");if(y(n))return t.stylize(""+n,"boolean");if(m(n))return t.stylize("null","null")}(n,e);if(i)return i;var o,a=Object.keys(e),u=(o={},a.forEach(function(t,n){o[t]=!0}),o);if(n.showHidden&&(a=Object.getOwnPropertyNames(e)),k(e)&&(0<=a.indexOf("message")||0<=a.indexOf("description")))return d(e);if(0===a.length){if(S(e)){var c=e.name?": "+e.name:"";return n.stylize("[Function"+c+"]","special")}if(M(e))return n.stylize(RegExp.prototype.toString.call(e),"regexp");if(_(e))return n.stylize(Date.prototype.toString.call(e),"date");if(k(e))return d(e)}var s,l="",f=!1,h=["{","}"];(v(e)&&(f=!0,h=["[","]"]),S(e))&&(l=" [Function"+(e.name?": "+e.name:"")+"]");return M(e)&&(l=" "+RegExp.prototype.toString.call(e)),_(e)&&(l=" "+Date.prototype.toUTCString.call(e)),k(e)&&(l=" "+d(e)),0!==a.length||f&&0!=e.length?r<0?M(e)?n.stylize(RegExp.prototype.toString.call(e),"regexp"):n.stylize("[Object]","special"):(n.seen.push(e),s=f?function(n,e,r,i,t){for(var o=[],a=0,u=e.length;a<u;++a)C(e,String(a))?o.push(g(n,e,r,i,String(a),!0)):o.push("");return t.forEach(function(t){t.match(/^\d+$/)||o.push(g(n,e,r,i,t,!0))}),o}(n,e,r,u,a):a.map(function(t){return g(n,e,r,u,t,f)}),n.seen.pop(),function(t,n,e){if(60<t.reduce(function(t,n){return 0,0<=n.indexOf("\n")&&0,t+n.replace(/\u001b\[\d\d?m/g,"").length+1},0))return e[0]+(""===n?"":n+"\n ")+" "+t.join(",\n  ")+" "+e[1];return e[0]+n+" "+t.join(", ")+" "+e[1]}(s,l,h)):h[0]+l+h[1]}function d(t){return"["+Error.prototype.toString.call(t)+"]"}function g(t,n,e,r,i,o){var a,u,c;if((c=Object.getOwnPropertyDescriptor(n,i)||{value:n[i]}).get?u=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(u=t.stylize("[Setter]","special")),C(r,i)||(a="["+i+"]"),u||(t.seen.indexOf(c.value)<0?-1<(u=m(e)?p(t,c.value,null):p(t,c.value,e-1)).indexOf("\n")&&(u=o?u.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+u.split("\n").map(function(t){return"   "+t}).join("\n")):u=t.stylize("[Circular]","special")),w(a)){if(o&&i.match(/^\d+$/))return u;(a=JSON.stringify(""+i)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=t.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=t.stylize(a,"string"))}return a+": "+u}function v(t){return Array.isArray(t)}function y(t){return"boolean"==typeof t}function m(t){return null===t}function x(t){return"number"==typeof t}function b(t){return"string"==typeof t}function w(t){return void 0===t}function M(t){return l(t)&&"[object RegExp]"===n(t)}function l(t){return"object"==typeof t&&null!==t}function _(t){return l(t)&&"[object Date]"===n(t)}function k(t){return l(t)&&("[object Error]"===n(t)||t instanceof Error)}function S(t){return"function"==typeof t}function n(t){return Object.prototype.toString.call(t)}function e(t){return t<10?"0"+t.toString(10):t.toString(10)}A.debuglog=function(n){if(w(t)&&(t=r.env.NODE_DEBUG||""),n=n.toUpperCase(),!o[n])if(new RegExp("\\b"+n+"\\b","i").test(t)){var e=r.pid;o[n]=function(){var t=A.format.apply(A,arguments);console.error("%s %d: %s",n,e,t)}}else o[n]=function(){};return o[n]},(A.inspect=c).colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},A.isArray=v,A.isBoolean=y,A.isNull=m,A.isNullOrUndefined=function(t){return null==t},A.isNumber=x,A.isString=b,A.isSymbol=function(t){return"symbol"==typeof t},A.isUndefined=w,A.isRegExp=M,A.isObject=l,A.isDate=_,A.isError=k,A.isFunction=S,A.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},A.isBuffer=h("./support/isBuffer");var f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(t,n){return Object.prototype.hasOwnProperty.call(t,n)}A.log=function(){var t,n;console.log("%s - %s",(t=new Date,n=[e(t.getHours()),e(t.getMinutes()),e(t.getSeconds())].join(":"),[t.getDate(),f[t.getMonth()],n].join(" ")),A.format.apply(A,arguments))},A.inherits=h("inherits"),A._extend=function(t,n){if(!n||!l(n))return t;for(var e=Object.keys(n),r=e.length;r--;)t[e[r]]=n[e[r]];return t}}).call(this,h("pBGvAp"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":9,inherits:8,pBGvAp:7}],11:[function(t,n,e){"use strict";function i(t){for(var n=1,e=0;e<t.length;e++)n=Math.max(n,t[e].count);return n}var r=function(t,n,e){var r=this,i=t.histogramBorderPadding||{};r.lineWidthOffset=i.left||10,r.lineHeightOffset=i.bottom||5,r.padding=20,r.centerText=-6,r.prefix=t.prefix||"og-",r.observations=t.observations,r.svg=n,r.rotated=e||!1,r.domain=(r.rotated?t.genes:t.donors)||[],r.margin=t.margin||{top:30,right:15,bottom:15,left:80},r.clickFunc=r.rotated?t.geneHistogramClick:t.donorHistogramClick,r.width=t.width||500,r.height=t.height||500,r.histogramWidth=r.rotated?r.height:r.width,r.histogramHeight=80,r.numDomain=r.domain.length,r.barWidth=(r.rotated?r.height:r.width)/r.domain.length,r.totalHeight=r.histogramHeight+r.lineHeightOffset+r.padding,r.wrapper=d3.select(t.wrapper||"body")};r.prototype.render=function(t){var r=this;r.div=t;var n=i(r.domain);r.topCount=n,r.container=r.svg.append("g").attr("class",r.prefix+"histogram").attr("width",function(){return r.rotated?r.height:r.width+r.margin.left+r.margin.right}).attr("height",r.histogramHeight).style("margin-left",r.margin.left+"px").attr("transform",function(){return r.rotated?"rotate(90)translate(0,-"+r.width+")":""}),r.histogram=r.container.append("g").attr("transform","translate(0,-"+(r.totalHeight+r.centerText)+")"),r.renderAxis(n),r.histogram.on("mouseover",function(){var t=d3.event.target,n=r.domain[t.dataset.domainIndex];if(n){var e=d3.mouse(r.wrapper.node());r.div.transition().duration(200).style("opacity",.9),r.div.html(function(){return r.rotated?'<div class="wrapper">'+n.symbol+"<br/> Count: "+n.count+"<br/></div>":'<div class="wrapper">'+n.case_code+"<br/> Count: "+n.count+"<br/></div>"}).style("left",e[0]+10+"px").style("top",e[1]-28+"px")}}).on("mouseout",function(){r.div.transition().duration(500).style("opacity",0)}).on("click",function(){var t=d3.event.target,n=r.domain[t.dataset.domainIndex];n&&r.clickFunc(n)}),r.histogram.selectAll("rect").data(r.domain).enter().append("rect").attr("class",function(t){return r.prefix+"sortable-bar "+r.prefix+t.id+"-bar"}).attr("data-domain-index",function(t,n){return n}).attr("width",r.barWidth-(r.barWidth<3?0:1)).attr("height",function(t){return r.histogramHeight*t.count/n}).attr("x",function(t){return r.rotated?t.y:t.x}).attr("y",function(t){return r.histogramHeight-r.histogramHeight*t.count/n}).attr("fill","#1693C0")},r.prototype.update=function(t){var n=this;n.domain=t,n.barWidth=(n.rotated?n.height:n.width)/n.domain.length;var e=n.topCount||i(n.domain);n.updateAxis(e),n.histogram.selectAll("rect").data(n.domain).attr("data-domain-index",function(t,n){return n}).transition().attr("width",n.barWidth-(n.barWidth<3?0:1)).attr("height",function(t){return n.histogramHeight*t.count/e}).attr("y",function(t){return n.histogramHeight-n.histogramHeight*t.count/e}).attr("x",function(t){return n.rotated?t.y:t.x})},r.prototype.resize=function(t,n){var e=this;e.width=t,e.height=n,e.histogramWidth=e.rotated?e.height:e.width,e.container.attr("width",function(){return e.rotated?e.height:e.width+e.margin.left+e.margin.right}).attr("transform",function(){return e.rotated?"rotate(90)translate(0,-"+e.width+")":""}),e.histogram.attr("transform","translate(0,-"+(e.totalHeight+e.centerText)+")"),e.bottomAxis.attr("x2",e.histogramWidth+10)},r.prototype.renderAxis=function(t){var n=this;n.bottomAxis=n.histogram.append("line").attr("class",n.prefix+"histogram-axis"),n.leftAxis=n.histogram.append("line").attr("class",n.prefix+"histogram-axis"),n.topText=n.histogram.append("text").attr("class",n.prefix+"label-text-font").attr("dy",".32em").attr("text-anchor","end"),n.middleText=n.histogram.append("text").attr("class",n.prefix+"label-text-font").attr("dy",".32em").attr("text-anchor","end"),n.leftLabel=n.histogram.append("text").text("Mutation freq.").attr({class:n.prefix+"label-text-font","text-anchor":"middle",transform:"rotate(-90)"}),n.updateAxis(t)},r.prototype.updateAxis=function(t){var n=this;n.bottomAxis.attr("y1",n.histogramHeight+n.lineHeightOffset).attr("y2",n.histogramHeight+n.lineHeightOffset).attr("x2",n.histogramWidth+n.lineWidthOffset).attr("transform","translate(-"+n.lineHeightOffset+",0)"),n.leftAxis.attr("y1",0).attr("y2",n.histogramHeight+n.lineHeightOffset).attr("transform","translate(-"+n.lineHeightOffset+",0)"),n.topText.attr("x",n.centerText).text(t);var e=parseInt(t/2),r=n.histogramHeight-n.histogramHeight/(t/e);n.middleText.attr("x",n.centerText).attr("y",r).text(e),n.leftLabel.attr({x:-n.histogramHeight/2,y:-n.lineHeightOffset-n.padding})},r.prototype.destroy=function(){this.histogram.remove(),this.container.remove()},n.exports=r},{d3:1}],12:[function(t,n,e){"use strict";var r,f=t("mustache"),c=t("./Histogram"),s=t("./Track");(r=function(t,n,e,r,i,o,a){var u=this;u.emit=i,u.x=o,u.y=a,u.lookupTable=n,u.updateCallback=e,u.resizeCallback=r,u.loadParams(t),u.createGeneMap(),u.init(),u.donorHistogram=new c(t,u.container,!1),u.histogramHeight=u.donorHistogram.totalHeight,u.donorTrack=new s(t,u.container,!1,t.donorTracks,t.donorOpacityFunc,t.donorFillFunc,e,u.height,u.resizeCallback,u.isFullscreen),u.donorTrack.init(),u.geneHistogram=new c(t,u.container,!0),u.geneTrack=new s(t,u.container,!0,t.geneTracks,t.geneOpacityFunc,t.geneFillFunc,e,u.width+u.histogramHeight,u.resizeCallback,u.isFullscreen),u.geneTrack.init()}).prototype.loadParams=function(t){var n=this;n.scaleToFit="boolean"!=typeof t.scaleToFit||t.scaleToFit,n.leftTextWidth=t.leftTextWidth||80,n.prefix=t.prefix||"og-",n.minCellHeight=t.minCellHeight||10,n.donors=t.donors||[],n.genes=t.genes||[],n.observations=t.observations||[],n.wrapper=d3.select(t.wrapper||"body"),n.colorMap=t.colorMap||{missense_variant:"#ff9b6c",frameshift_variant:"#57dba4",stop_gained:"#af57db",start_lost:"#ff2323",stop_lost:"#d3ec00",initiator_codon_variant:"#5abaff"},n.numDonors=n.donors.length,n.numGenes=n.genes.length,n.fullscreen=!1,n.isFullscreen=function(){return n.fullscreen},n.width=t.width||500,n.height=t.height||500,n.inputWidth=t.width||500,n.inputHeight=t.height||500,n.cellWidth=n.width/n.donors.length,n.cellHeight=n.height/n.genes.length,n.cellHeight<n.minCellHeight&&(n.cellHeight=n.minCellHeight,t.height=n.numGenes*n.minCellHeight,n.height=t.height),n.margin=t.margin||{top:30,right:100,bottom:15,left:80},n.heatMap=t.heatMap,n.drawGridLines=t.grid||!1,n.crosshair=!1,n.gridClick=t.gridClick;var e=t.templates||{};n.templates={mainGrid:e.mainGrid||"{{#observation}}{{observation.id}}<br>{{observation.geneSymbol}}<br>{{observation.donorId}}<br>{{observation.consequence}}<br>{{/observation}}",mainGridCrosshair:e.mainGridCrosshair||"{{#donor}}Donor: {{donor.id}}<br>{{/donor}}{{#gene}}Gene: {{gene.symbol}}<br>{{/gene}}{{#obs}}Mutations: {{obs}}<br>{{/obs}}"}},r.prototype.init=function(){var t=this;t.div=t.wrapper.append("div").attr("class",t.prefix+"tooltip-oncogrid").style("opacity",0),t.canvas=t.wrapper.append("canvas").attr("class",t.prefix+"canvas"),t.svg=t.wrapper.append("svg").attr("class",t.prefix+"maingrid-svg").attr("id",t.prefix+"maingrid-svg").attr("width","100%").style("position","absolute").style("top",0).style("left",0),t.container=t.svg.append("g"),t.background=t.container.append("rect").attr("class","background").attr("width",t.width).attr("height",t.height),t.gridContainer=t.container.append("g")},r.prototype.render=function(){var s=this;s.emit("render:mainGrid:start"),s.computeCoordinates(),s.svg.on("mouseover",function(t){var n=d3.event.target,e=d3.mouse(n),r=s.rangeToDomain(s.x,e[0]),i=s.rangeToDomain(s.y,e[1]),o=s.crosshair?s.templates.mainGridCrosshair:s.templates.mainGrid,a=s.observations[n.dataset.obsIndex];if(a){var u=f.render(o||"",{observation:a,donor:s.donors[r],gene:s.genes[i]});if(u){var c=d3.mouse(s.wrapper.node());s.div.transition().duration(200).style("opacity",.9),s.div.html(u).style("left",c[0]+15+"px").style("top",c[1]+30+"px")}}}),s.svg.on("mouseout",function(){s.div.transition().duration(500).style("opacity",0)}),s.svg.on("click",function(){if(s.gridClick){var t=s.observations[d3.event.target.dataset.obsIndex];if(!t)return;s.gridClick(t)}}),s.container.selectAll("."+s.prefix+"maingrid-svg").data(s.observations).enter().append("rect").attr("data-obs-index",function(t,n){return n}).attr("class",function(t){return s.prefix+"sortable-rect "+s.prefix+t.donorId+"-cell "+s.prefix+t.geneId+"-cell"}).attr("cons",function(t){return t.consequence}).attr("x",function(t){return s.lookupTable[t.donorId].x}).attr("y",function(t){return s.getY(t)}).attr("width",s.cellWidth).attr("height",function(t){return s.getHeight(t)}).attr("fill",function(t){return s.getColor(t)}).attr("opacity",function(t){return s.getOpacity(t)}).attr("stroke-width",2),s.emit("render:mainGrid:end"),s.emit("render:donorHisogram:start"),s.donorHistogram.render(s.div),s.emit("render:donorHisogram:end"),s.emit("render:donorTrack:start"),s.donorTrack.render(s.div),s.emit("render:donorTrack:end"),s.emit("render:geneHistogram:start"),s.geneHistogram.render(s.div),s.emit("render:geneHistogram:end"),s.emit("render:geneTrack:start"),s.geneTrack.render(s.div),s.emit("render:geneTrack:end"),s.defineCrosshairBehaviour(),s.resizeSvg()},r.prototype.update=function(t,n){var e=this;e.createGeneMap(),e.x=t,e.y=n,e.numDonors!==e.donors.length||e.numGenes!==e.genes.length?(e.numDonors=e.donors.length,e.numGenes=e.genes.length,e.cellWidth=e.width/e.numDonors,e.cellHeight=e.height/e.numGenes,e.computeCoordinates()):e.row.selectAll("text").attr("style",function(){return e.cellHeight<e.minCellHeight?"display: none;":""}),e.row.transition().attr("transform",function(t){return"translate( 0, "+t.y+")"}),e.container.selectAll("."+e.prefix+"sortable-rect").transition().attr("width",e.cellWidth).attr("height",function(t){return e.getHeight(t)}).attr("y",function(t){return e.getY(t)}).attr("x",function(t){return e.lookupTable[t.donorId].x}),e.donorHistogram.update(e.donors),e.donorTrack.update(e.donors),e.geneHistogram.update(e.genes),e.geneTrack.update(e.genes)},r.prototype.computeCoordinates=function(){var e=this;e.cellWidth=e.width/e.donors.length,void 0!==e.column&&e.column.remove(),e.drawGridLines&&(e.column=e.gridContainer.selectAll("."+e.prefix+"donor-column").data(e.donors).enter().append("line").attr({x1:function(t){return t.x},x2:function(t){return t.x},y2:e.height,class:e.prefix+"donor-column"}).style("pointer-events","none")),e.cellHeight=e.height/e.genes.length,void 0!==e.row&&e.row.remove(),e.row=e.gridContainer.selectAll("."+e.prefix+"gene-row").data(e.genes).enter().append("g").attr("class",e.prefix+"gene-row").attr("transform",function(t){return"translate(0,"+t.y+")"}),e.drawGridLines&&e.row.append("line").attr("x2",e.width).style("pointer-events","none"),e.row.append("text").attr("class",function(t){return e.prefix+t.id+"-label "+e.prefix+"gene-label "+e.prefix+"label-text-font"}).attr("x",-8).attr("y",e.cellHeight/2).attr("dy",".32em").attr("text-anchor","end").attr("style",function(){return e.cellHeight<e.minCellHeight?"display: none;":""}).text(function(t,n){return e.genes[n].symbol}),e.defineRowDragBehaviour()},r.prototype.resize=function(t,n,e,r){var i=this;i.createGeneMap(),i.x=e,i.y=r,i.width=t,i.height=n,i.cellWidth=i.width/i.donors.length,i.cellHeight=i.height/i.genes.length,i.cellHeight<i.minCellHeight&&(i.cellHeight=i.minCellHeight,i.height=i.genes.length*i.minCellHeight),i.background.attr("width",i.width).attr("height",i.height),i.computeCoordinates(),i.donorHistogram.resize(t,i.height),i.donorTrack.resize(t,i.height,i.height),i.geneHistogram.resize(t,i.height),i.geneTrack.resize(t,i.height,i.width+i.histogramHeight),i.resizeSvg(),i.update(i.x,i.x),i.verticalCross.attr("y2",i.height+i.donorTrack.height),i.horizontalCross.attr("x2",i.width+i.histogramHeight+i.geneTrack.height)},r.prototype.resizeSvg=function(){var t=this,n=t.margin.left+t.leftTextWidth+t.width+t.histogramHeight+t.geneTrack.height+t.margin.right,e=t.margin.top+t.histogramHeight+t.height+t.donorTrack.height+t.margin.bottom;t.canvas.attr("width",n).attr("height",e),t.scaleToFit?(t.canvas.style("width","100%"),t.svg.attr("viewBox","0 0 "+n+" "+e)):(t.canvas.style("width",n+"px"),t.svg.attr("width",n).attr("height",e)),t.container.attr("transform","translate("+(t.margin.left+t.leftTextWidth)+","+(t.margin.top+t.histogramHeight)+")")},r.prototype.defineCrosshairBehaviour=function(){var l=this,t=function(t,n){if(l.crosshair){var e=d3.mouse(n);l.verticalCross.attr("x1",e[0]).attr("opacity",1),l.verticalCross.attr("x2",e[0]).attr("opacity",1),l.horizontalCross.attr("y1",e[1]).attr("opacity",1),l.horizontalCross.attr("y2",e[1]).attr("opacity",1),"mousemove"===t&&void 0!==l.selectionRegion&&l.changeSelection(e);var r=l.width<e[0]?-1:l.rangeToDomain(l.x,e[0]),i=l.height<e[1]?-1:l.rangeToDomain(l.y,e[1]),o=l.donors[r],a=l.genes[i],u=l.nullableObsLookup(o,a),c=f.render(l.templates.mainGridCrosshair,{donor:o,gene:a,obs:u});if(c){var s=d3.mouse(l.wrapper.node());l.div.transition().duration(200).style("opacity",.9),l.div.html(c).style("left",s[0]+15+"px").style("top",s[1]+30+"px")}}};l.verticalCross=l.container.append("line").attr("class",l.prefix+"vertical-cross").attr("y1",-l.histogramHeight).attr("y2",l.height+l.donorTrack.height).attr("opacity",0).attr("style","pointer-events: none"),l.horizontalCross=l.container.append("line").attr("class",l.prefix+"horizontal-cross").attr("x1",0).attr("x2",l.width+l.histogramHeight+l.geneTrack.height).attr("opacity",0).attr("style","pointer-events: none"),l.container.on("mousedown",function(){l.startSelection(this)}).on("mouseover",function(){t("mouseover",this)}).on("mousemove",function(){t("mousemove",this)}).on("mouseout",function(){l.crosshair&&(l.verticalCross.attr("opacity",0),l.horizontalCross.attr("opacity",0))}).on("mouseup",function(){l.finishSelection()})},r.prototype.startSelection=function(t){if(this.crosshair&&void 0===this.selectionRegion){d3.event.stopPropagation();var n=d3.mouse(t);this.selectionRegion=this.container.append("rect").attr("x",n[0]).attr("y",n[1]).attr("width",1).attr("height",1).attr("class",this.prefix+"selection-region").attr("stroke","black").attr("stroke-width","2").attr("opacity",.2)}},r.prototype.changeSelection=function(t){var n={x:parseInt(this.selectionRegion.attr("x"),10),y:parseInt(this.selectionRegion.attr("y"),10),width:parseInt(this.selectionRegion.attr("width"),10),height:parseInt(this.selectionRegion.attr("height"),10)},e={x:t[0]-Number(this.selectionRegion.attr("x")),y:t[1]-Number(this.selectionRegion.attr("y"))};e.x<1||2*e.x<n.width?(n.x=t[0],n.width-=e.x):n.width=e.x,e.y<1||2*e.y<n.height?(n.y=t[1],n.height-=e.y):n.height=e.y,this.selectionRegion.attr(n)},r.prototype.finishSelection=function(){var t=this;if(t.crosshair&&void 0!==t.selectionRegion){d3.event.stopPropagation();var n=Number(t.selectionRegion.attr("x")),e=n+Number(t.selectionRegion.attr("width")),r=Number(t.selectionRegion.attr("y")),i=r+Number(t.selectionRegion.attr("height")),o=t.rangeToDomain(t.x,n),a=t.rangeToDomain(t.x,e),u=t.rangeToDomain(t.y,r),c=t.rangeToDomain(t.y,i);t.sliceDonors(o,a),t.sliceGenes(u,c),t.selectionRegion.remove(),delete t.selectionRegion,t.updateCallback(!0)}},r.prototype.sliceGenes=function(t,n){for(var e=0;e<this.genes.length;e++){var r=this.genes[e];(e<t||n<e)&&(d3.selectAll("."+this.prefix+r.id+"-cell").remove(),d3.selectAll("."+this.prefix+r.id+"-bar").remove(),this.genes.splice(e,1),e--,t--,n--)}},r.prototype.sliceDonors=function(t,n){for(var e=0;e<this.donors.length;e++){var r=this.donors[e];(e<t||n<e)&&(d3.selectAll("."+this.prefix+r.id+"-cell").remove(),d3.selectAll("."+this.prefix+r.id+"-bar").remove(),this.donors.splice(e,1),e--,t--,n--)}},r.prototype.defineRowDragBehaviour=function(){var i=this,t=d3.behavior.drag();t.on("dragstart",function(){d3.event.sourceEvent.stopPropagation()}),t.on("drag",function(){var n=d3.event.dy;d3.select(this).attr("transform",function(){var t=d3.transform(d3.select(this).attr("transform"));return"translate( 0, "+(parseInt(t.translate[1])+n)+")"})}),t.on("dragend",function(t){var n=d3.mouse(i.container.node()),e=i.genes.indexOf(t),r=i.rangeToDomain(i.y,n[1]);i.genes.splice(e,1),i.genes.splice(r,0,t),i.updateCallback(!0)}),i.row.call(t).on("click",function(){d3.event.defaultPrevented}),i.row.on("mouseover",function(){void 0!==this.timeout&&clearTimeout(this.timeout),d3.select(this).select("."+i.prefix+"remove-gene").attr("style","display: block")}),i.row.on("mouseout",function(){var t=this;t.timeout=setTimeout(function(){d3.select(t).select("."+i.prefix+"remove-gene").attr("style","display: none")},500)})},r.prototype.createGeneMap=function(){for(var t={},n=0;n<this.genes.length;n+=1){var e=this.genes[n];t[e.id]=e}this.geneMap=t},r.prototype.getY=function(t){var n=this.geneMap[t.geneId].y;if(this.heatMap)return n;var e=this.lookupTable[t.donorId][t.geneId];return n+this.cellHeight/e.length*e.indexOf(t.id)},r.prototype.getColor=function(t){return!0===this.heatMap?"#D33682":this.colorMap[t.consequence]},r.prototype.getOpacity=function(){return!0===this.heatMap?.25:1},r.prototype.getHeight=function(t){if(void 0!==t){if(!0===this.heatMap)return this.cellHeight;var n=this.lookupTable[t.donorId][t.geneId].length;return this.cellHeight/n}return 0},r.prototype.setHeatmap=function(t){var n=this;return t===n.heatMap||(n.heatMap=t,d3.selectAll("."+n.prefix+"sortable-rect").transition().attr("y",function(t){return n.getY(t)}).attr("height",function(t){return n.getHeight(t)}).attr("fill",function(t){return n.getColor(t)}).attr("opacity",function(t){return n.getOpacity(t)})),n.heatMap},r.prototype.setGridLines=function(t){return this.drawGridLines===t||(this.drawGridLines=t,this.geneTrack.setGridLines(this.drawGridLines),this.donorTrack.setGridLines(this.drawGridLines),this.computeCoordinates()),this.drawGridLines},r.prototype.setCrosshair=function(t){return this.crosshair=t,this.crosshair},r.prototype.getDonorIndex=function(t,n){for(var e=0;e<t.length;e++){if(t[e].id===n)return e}return-1},r.prototype.removeGene=function(t){var n=this.genes[t];n&&(d3.selectAll("."+this.prefix+n.id+"-cell").remove(),d3.selectAll("."+this.prefix+n.id+"-bar").remove(),this.genes.splice(t,1)),this.updateCallback(!0)},r.prototype.rangeToDomain=function(t,n){return t.domain()[d3.bisect(t.range(),n)-1]},r.prototype.nullableObsLookup=function(t,n){return t&&"object"==typeof t&&n&&"object"==typeof n&&this.lookupTable.hasOwnProperty(t.id)&&this.lookupTable[t.id].hasOwnProperty(n.id)?this.lookupTable[t.id][n.id].join(", "):null},r.prototype.destroy=function(){this.wrapper.select("."+this.prefix+"maingrid-svg").remove(),this.wrapper.select("."+this.prefix+"canvas").remove(),this.wrapper.select("."+this.prefix+"tooltip-oncogrid").remove()},n.exports=r},{"./Histogram":11,"./Track":14,d3:1,mustache:6}],13:[function(t,n,e){"use strict";var r=t("lodash.clonedeep"),i=t("./MainGrid"),o=t("lodash.values"),a=t("eventemitter3"),u=function(t){var n=this;n.params=t,n.inputWidth=t.width||500,n.width=n.inputWidth,n.minCellHeight=t.minCellHeight||10,n.inputHeight=t.height||500,n.height=n.inputHeight,n.height/t.genes.length<n.minCellHeight&&(n.height=t.genes.length*n.minCellHeight),n.prefix=t.prefix||"og-",t.wrapper="."+n.prefix+"container",n.container=d3.select(t.element||"body").append("div").attr("class",n.prefix+"container").style("position","relative"),n.initCharts(),a.call(this)};t("util").inherits(u,a),u.prototype.initCharts=function(t){var n=this;n.clonedParams=r(n.params),n.donors=n.clonedParams.donors||[],n.genes=n.clonedParams.genes||[],n.observations=n.clonedParams.observations||[],n.createLookupTable(),n.computeDonorCounts(),n.computeGeneScoresAndCount(),n.genesSortbyScores(),n.computeScores(),n.sortByScores(),n.calculatePositions(),t&&(n.clonedParams.width=n.width,n.clonedParams.height=n.height),n.mainGrid=new i(n.clonedParams,n.lookupTable,n.update(n),function(){n.resize(n.width,n.height,n.fullscreen)},n.emit.bind(n),n.x,n.y),n.heatMapMode=n.mainGrid.heatMap,n.drawGridLines=n.mainGrid.drawGridLines,n.crosshairMode=n.mainGrid.crosshair,n.charts=[],n.charts.push(n.mainGrid)},u.prototype.calculatePositions=function(){for(var t,n,e,r=this,i=d3.scale.ordinal().domain(d3.range(r.donors.length)).rangeBands([0,r.width]),o=0;o<r.donors.length;o+=1)n=(t=r.donors[o]).id,e=i(o),t.x=e,r.lookupTable[n]=r.lookupTable[n]||{},r.lookupTable[n].x=e;var a=d3.scale.ordinal().domain(d3.range(r.genes.length)).rangeBands([0,r.height]);for(o=0;o<r.genes.length;o+=1)r.genes[o].y=a(o);r.y=a,r.x=i},u.prototype.createLookupTable=function(){for(var t={},n=0;n<this.observations.length;n++){var e=this.observations[n],r=e.donorId,i=e.geneId;t.hasOwnProperty(r)?t[r].hasOwnProperty(i)?t[r][i].push(e.id):t[r][i]=[e.id]:(t[r]={},t[r][i]=[e.id]),this.lookupTable=t}},u.prototype.render=function(){var t=this;t.emit("render:all:start"),setTimeout(function(){t.charts.forEach(function(t){t.render()}),t.emit("render:all:end")})},u.prototype.update=function(t){var n=t;return function(t){(t=null!=t&&t)&&(n.computeScores(),n.sortByScores()),n.calculatePositions(),n.charts.forEach(function(t){t.update(n.x,n.y)})}},u.prototype.resize=function(t,n,e){var r=this;r.fullscreen=e,r.mainGrid.fullscreen=e,r.width=Number(t),r.height=Number(n),r.height/r.genes.length<r.minCellHeight&&(r.height=r.genes.length*r.minCellHeight),r.calculatePositions(),r.charts.forEach(function(t){t.fullscreen=e,t.resize(r.width,r.height,r.x,r.y)})},u.prototype.sortByScores=function(){this.donors.sort(this.sortScore)},u.prototype.genesSortbyScores=function(){this.genes.sort(this.sortScore)},u.prototype.cluster=function(){this.genesSortbyScores(),this.computeScores(),this.sortByScores(),this.update(this)()},u.prototype.removeDonors=function(t){for(var n=this,e=[],r=0;r<n.donors.length;r++){var i=n.donors[r];t(i)&&(e.push(i.id),d3.selectAll("."+n.prefix+i.id+"-cell").remove(),d3.selectAll("."+n.prefix+i.id+"-bar").remove(),n.donors.splice(r,1),r--)}for(var o=0;o<n.observations.length;o++){var a=n.observations[o];0<=n.donors.indexOf(a.id)&&(n.observations.splice(o,1),o--)}n.computeGeneScoresAndCount(),n.update(n)(),n.resize(n.width,n.height,!1)},u.prototype.removeGenes=function(t){for(var n=this,e=[],r=0;r<n.genes.length;r++){var i=n.genes[r];t(i)&&(e.push(i.id),d3.selectAll("."+n.prefix+i.id+"-cell").remove(),d3.selectAll("."+n.prefix+i.id+"-bar").remove(),n.genes.splice(r,1),r--)}n.update(n)(),n.resize(n.width,n.height,!1)},u.prototype.sortDonors=function(t){this.donors.sort(t),this.update(this)()},u.prototype.sortGenes=function(t){this.computeScores(),this.sortByScores(),this.genes.sort(t),this.update(this)()},u.prototype.setHeatmap=function(t){this.heatMapMode=t,this.mainGrid.setHeatmap(t)},u.prototype.toggleHeatmap=function(){this.setHeatmap(!this.heatMapMode)},u.prototype.setGridLines=function(t){this.drawGridLines=t,this.mainGrid.setGridLines(t)},u.prototype.toggleGridLines=function(){this.setGridLines(!this.drawGridLines)},u.prototype.setCrosshair=function(t){this.crosshairMode=t,this.mainGrid.setCrosshair(t)},u.prototype.toggleCrosshair=function(){this.setCrosshair(!this.crosshairMode)},u.prototype.mutationScore=function(t,n){return this.lookupTable.hasOwnProperty(t)&&this.lookupTable[t].hasOwnProperty(n)?1:0},u.prototype.mutationGeneScore=function(t,n){return this.lookupTable.hasOwnProperty(t)&&this.lookupTable[t].hasOwnProperty(n)?this.lookupTable[t][n].length:0},u.prototype.computeScores=function(){for(var t=0;t<this.donors.length;t++)for(var n=this.donors[t],e=n.score=0;e<this.genes.length;e++){var r=this.genes[e];n.score+=this.mutationScore(n.id,r.id)*Math.pow(2,this.genes.length+1-e)}},u.prototype.computeGeneScoresAndCount=function(){for(var t=0;t<this.genes.length;t++){for(var n=this.genes[t],e=n.score=0;e<this.donors.length;e++){var r=this.donors[e];n.score+=this.mutationGeneScore(r.id,n.id)}n.count=n.score}},u.prototype.computeDonorCounts=function(){for(var t=0;t<this.donors.length;t++)for(var n=this.donors[t],e=o(this.lookupTable[n.id]||{}),r=n.count=0;r<e.length;r++)n.count+=e[r].length},u.prototype.computeGeneCounts=function(){for(var t=0;t<this.genes.length;t++)for(var n=this.genes[t],e=n.count=0;e<this.observations.length;e++){var r=this.observations[e];n.id===r.geneId&&(n.count+=1)}},u.prototype.sortScore=function(t,n){return t.score<n.score?1:t.score>n.score?-1:t.id>=n.id?1:-1},u.prototype.destroy=function(){this.charts.forEach(function(t){t.destroy()}),this.container.remove()},u.prototype.reload=function(){this.charts.forEach(function(t){t.destroy()}),this.initCharts(!0),this.render()},n.exports=u},{"./MainGrid":12,d3:1,eventemitter3:2,"lodash.clonedeep":3,"lodash.values":5,util:10}],14:[function(t,n,e){"use strict";var r,i=t("./TrackGroup");(r=function(t,n,e,r,i,o,a,u,c,s){var l=this;l.padding=t.trackPadding||20,l.offset=u,l.params=t,l.prefix=t.prefix||"og-",l.svg=n,l.rotated=e||!1,l.updateCallback=a,l.resizeCallback=c,l.expandableGroups=t.expandableGroups||[],l.addTrackFunc=t.addTrackFunc,l.isFullscreen=s,l.trackLegends=t.trackLegends||{},l.trackLegendLabel=t.trackLegendLabel,l.clickFunc=l.rotated?t.geneClick:t.donorClick,l.margin=t.margin||{top:30,right:15,bottom:15,left:80},l.domain=(l.rotated?t.genes:t.donors)||[],l.width=(l.rotated?t.height:t.width)||500,l.cellHeight=t.trackHeight||10,l.numDomain=l.domain.length,l.cellWidth=l.width/l.numDomain,l.availableTracks=r||[],l.opacityFunc=i,l.fillFunc=o,l.drawGridLines=t.grid||!1,l.nullSentinel=t.nullSentinel||-777,l.parseGroups()}).prototype.parseGroups=function(){var r=this;r.groupMap={},r.groups=[],r.availableTracks.forEach(function(t){var n=t.group||"Tracks";if(r.groupMap.hasOwnProperty(n))r.groupMap[n].addTrack(t);else{var e=new i({cellHeight:r.cellHeight,width:r.width,clickFunc:r.clickFunc,grid:r.drawGridLines,nullSentinel:r.nullSentinel,domain:r.domain,trackLegend:r.trackLegends[n]||"",trackLegendLabel:r.trackLegendLabel,expandable:0<=r.expandableGroups.indexOf(n),addTrackFunc:r.addTrackFunc,wrapper:r.params.wrapper},n,r.rotated,r.opacityFunc,r.fillFunc,r.updateCallback,r.resizeCallback,r.isFullscreen);e.addTrack(t),r.groupMap[n]=e,r.groups.push(e)}})},r.prototype.init=function(){var t=this;t.container=t.svg.append("g");for(var n=t.rotated?16.5:0,e=t.height=0;e<t.groups.length;e++){var r=t.groups[e],i=t.container.append("g").attr("transform","translate(0,"+t.height+")");r.init(i),t.height+=Number(r.totalHeight)+t.padding}var o=t.rotated?-(t.offset+t.height):t.padding+t.offset;t.container.attr("width",t.width).attr("height",t.height).attr("class",t.prefix+"track").attr("transform",function(){return(t.rotated?"rotate(90)":"")+"translate(0,"+o+")"}),t.height+=n},r.prototype.render=function(t){for(var n=0;n<this.groups.length;n++){this.groups[n].render(t)}},r.prototype.resize=function(t,n,e){var r=this;r.offset=e||r.offset,r.width=r.rotated?n:t,r.height=0;for(var i=r.rotated?16.5:0,o=0;o<r.groups.length;o++){var a=r.groups[o];a.container.attr("transform","translate(0,"+r.height+")"),a.resize(r.width),r.height+=Number(a.totalHeight)+r.padding}var u=r.rotated?-(r.offset+r.height):r.padding+r.offset;r.container.attr("width",r.width).attr("height",r.height).attr("transform",function(){return(r.rotated?"rotate(90)":"")+"translate(0,"+u+")"}),r.height+=i},r.prototype.update=function(t){this.domain=t;for(var n=0;n<this.groups.length;n++){this.groups[n].update(t)}},r.prototype.setGridLines=function(t){for(var n=0;n<this.groups.length;n++){this.groups[n].setGridLines(t)}},n.exports=r},{"./TrackGroup":15}],15:[function(t,n,e){"use strict";var r,i=t("lodash.uniq"),o=t("mustache");(r=function(t,n,e,r,i,o,a,u){var c=this;c.prefix=t.prefix||"og-",c.expandable=t.expandable,c.name=n,c.cellHeight=t.cellHeight||20,c.height=0,c.totalHeight=0,c.width=t.width,c.tracks=[],c.collapsedTracks=[],c.length=0,c.nullSentinel=t.nullSentinel||-777,c.isFullscreen=u,c.rotated=e,c.updateCallback=o,c.resizeCallback=a,c.trackLegend=t.trackLegend,c.trackLegendLabel=t.trackLegendLabel,c.clickFunc=t.clickFunc,c.opacityFunc=r,c.fillFunc=i,c.addTrackFunc=t.addTrackFunc||function(t,n){n(t[0])},c.drawGridLines=t.grid||!1,c.domain=t.domain,c.numDomain=c.domain.length,c.trackData=[],c.wrapper=d3.select(t.wrapper||"body")}).prototype.addTrack=function(t){var e=this;t=Array.isArray(t)?t:[t];for(var n,r=0;r<t.length;r++)n=t[r],!e.rendered&&n.collapsed&&e.expandable?e.collapsedTracks.push(n):e.tracks.push(n);e.collapsedTracks=e.collapsedTracks.filter(function(n){return!e.tracks.some(function(t){return _.isEqual(n,t)})}),e.tracks=i(e.tracks,"fieldName"),e.length=e.tracks.length,e.height=e.cellHeight*e.length,e.rendered&&(e.refreshData(),e.resizeCallback())},r.prototype.removeTrack=function(t){var n=this.tracks.splice(t,1);this.collapsedTracks=this.collapsedTracks.concat(n),this.length=this.tracks.length,this.refreshData(),this.resizeCallback()},r.prototype.refreshData=function(){this.trackData=[];for(var t,n=0;n<this.domain.length;n++){t=this.domain[n];for(var e,r,i=0;i<this.length;i++){var o=(r=t[(e=this.tracks[i]).fieldName])===this.nullSentinel;this.trackData.push({id:t.id,displayId:this.rotated?t.symbol:t.case_code,domainIndex:n,value:r,displayValue:o?"Not Verified":r,notNullSentinel:!o,displayName:e.name,fieldName:e.fieldName,type:e.type,template:e.template||"{{displayId}}<br>{{displayName}}: {{displayValue}}"})}}},r.prototype.init=function(t){var n=this;n.container=t,n.label=n.container.append("text").attr("x",-6).attr("y",-11).attr("dy",".32em").attr("text-anchor","end").attr("class",n.prefix+"track-group-label").text(n.name),n.legendObject=n.container.append("svg:foreignObject").attr("width",20).attr("height",20),n.legend=n.legendObject.attr("x",0).attr("y",-22).append("xhtml:div").html(n.trackLegendLabel),n.background=n.container.append("rect").attr("class","background").attr("width",n.width).attr("height",n.height),n.refreshData(),n.totalHeight=n.height+(n.collapsedTracks.length?n.cellHeight:0)},r.prototype.render=function(t){var n=this;n.rendered=!0,n.div=t,n.computeCoordinates(),n.cellWidth=n.width/n.domain.length,n.renderData(),n.legend.on("mouseover",function(){var t=d3.mouse(n.wrapper.node());n.div.transition().duration(200).style("opacity",.9),n.div.html(function(){return n.trackLegend}).style("left",t[0]+15+"px").style("top",t[1]+30+"px")}).on("mouseout",function(){n.div.transition().duration(500).style("opacity",0)})},r.prototype.update=function(t){var e=this;e.domain=t,e.domain.length!==e.numDomain&&(e.numDomain=e.domain.length,e.cellWidth=e.width/e.numDomain);for(var n={},r=0;r<t.length;r+=1)n[t[r].id]=r;var i=[];for(r=0;r<e.trackData.length;r+=1){var o=e.trackData[r],a=n[o.id];(a||0===a)&&(o.domainIndex=a,i.push(o))}e.trackData=i,e.computeCoordinates(),e.container.selectAll("."+e.prefix+"track-data").data(e.trackData).attr("x",function(t){var n=e.domain[t.domainIndex];return e.rotated?n.y:n.x}).attr("data-track-data-index",function(t,n){return n}).attr("width",e.cellWidth)},r.prototype.resize=function(t){var n=this;n.width=t,n.height=n.cellHeight*n.length,n.collapsedTracks.length&&(n.totalHeight=n.height+n.cellHeight),n.cellWidth=n.width/n.domain.length,n.background.attr("class","background").attr("width",n.width).attr("height",n.height),n.computeCoordinates(),n.totalHeight=n.height+(n.collapsedTracks.length?n.cellHeight:0),n.renderData()},r.prototype.computeCoordinates=function(){var e=this;e.y=d3.scale.ordinal().domain(d3.range(e.length)).rangeBands([0,e.height]),e.column&&e.column.remove(),e.drawGridLines&&(e.column=e.container.selectAll("."+e.prefix+"column").data(e.domain).enter().append("line").attr("class",e.prefix+"column").attr("donor",function(t){return t.id}).attr("transform",function(t,n){return"translate("+(e.rotated?t.y:t.x)+")rotate(-90)"}).style("pointer-events","none").attr("x1",-e.height)),void 0!==e.row&&e.row.remove(),e.row=e.container.selectAll("."+e.prefix+"row").data(e.tracks).enter().append("g").attr("class",e.prefix+"row").attr("transform",function(t,n){return"translate(0,"+e.y(n)+")"}),e.drawGridLines&&e.row.append("line").style("pointer-events","none").attr("x2",e.width);var t=e.row.append("text");t.attr("class",e.prefix+"track-label "+e.prefix+"label-text-font").on("click",function(t){e.domain.sort(t.sort(t.fieldName)),e.updateCallback(!1)}).transition().attr("x",-6).attr("y",e.cellHeight/2).attr("dy",".32em").attr("text-anchor","end").text(function(t,n){return e.tracks[n].name}),e.container.selectAll("."+e.prefix+"remove-track").remove(),e.expandable&&setTimeout(function(){var n={};t.each(function(t){n[t.name]=this.getComputedTextLength()}),e.row.append("text").attr("class","remove-track").text("-").attr("y",e.cellHeight/2).attr("dy",".32em").on("click",function(t,n){e.removeTrack(n)}).attr("x",function(t){return-(n[t.name]+12+this.getComputedTextLength())})});var n=e.container.selectAll("."+e.prefix+"add-track");e.collapsedTracks.length&&e.expandable?(n.empty()&&(n=e.container.append("text").text("+").attr("class",e.prefix+"add-track").attr("x",-6).attr("dy",".32em").attr("text-anchor","end").on("click",function(){e.addTrackFunc(e.collapsedTracks.slice(),e.addTrack.bind(e))})),n.attr("y",e.cellHeight/2+(e.length&&e.cellHeight+e.y(e.length-1)))):n.remove()},r.prototype.setGridLines=function(t){this.drawGridLines!==t&&(this.drawGridLines=t,this.computeCoordinates())},r.prototype.renderData=function(){var r=this,t=r.container.selectAll("."+r.prefix+"track-data").data(r.trackData);t.enter().append("rect");for(var n={},e=0;e<r.tracks.length;e+=1)n[r.tracks[e].fieldName]=e;r.container.on("click",function(t){var n=d3.event.target;(t=r.trackData[n.dataset.trackDataIndex])&&r.clickFunc(t)}).on("mouseover",function(){var t=d3.event.target,n=r.trackData[t.dataset.trackDataIndex];if(n){var e=d3.mouse(r.wrapper.node());r.div.transition().duration(200).style("opacity",.9),r.div.html(o.render(n.template,n)).style("left",e[0]+15+"px").style("top",e[1]+30+"px")}}).on("mouseout",function(){r.div.transition().duration(500).style("opacity",0)}),t.attr("data-track-data-index",function(t,n){return n}).attr("x",function(t){var n=r.domain[t.domainIndex];return r.rotated?n.y:n.x}).attr("y",function(t){return r.y(n[t.fieldName])}).attr("width",r.cellWidth).attr("height",r.cellHeight).attr("fill",r.fillFunc).attr("opacity",r.opacityFunc).attr("class",function(t){return r.prefix+"track-data "+r.prefix+"track-"+t.fieldName+" "+r.prefix+"track-"+t.value+" "+r.prefix+t.id+"-cell"}),t.exit().remove()},n.exports=r},{d3:1,"lodash.uniq":4,mustache:6}],16:[function(t,n,e){"use strict";window.OncoGrid=t("./OncoGrid")},{"./OncoGrid":13}]},{},[16]);