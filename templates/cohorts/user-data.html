<div id="user-data" class="tab-pane data-tab {% if user_data and metadata_counts.user_data_total > 0 %}active{% endif %}" role="tabpanel">
    <div id="user-data-filter-panel" class="col-lg-4 filter-panel" role="tabpanel" {% if cohort.id %}style="display:none;"{% endif %}>
        <div class="tabpanel" role="tabpanel">
            <ul class="nav nav-tabs nav-tabs-ud-filters" role="tablist">
                <li role="presentation" class="active"><a href="#ud-proj-study-filters" role="tab" data-toggle="tab" title="User Data Projects & Studies">Projects & Studies</a></li>
                <li role="presentation" class=""><a href="#ud-feature-filters" role="tab" data-toggle="tab" title="User Data Features">Features</a></li>
            </ul>
            <div class="tab-content">
                <!-- user data projects & studies filters tab -->
                <div role="tabpanel" class="tab-pane active" id="ud-proj-study-filters">
                    <ul class="list-group" id="data-type-accordion" role="tablist" aria-multiselectable="true">
                        {% if not user_data or metadata_counts.user_data_total <= 0 %}
                            <li class="list-group-item">
                                <div id="user-data-alert" class="alert alert-warning alert-dismissable">
                                    <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                    There is no user data available to display.
                                </div>
                            </li>
                        {% endif %}
                        {% for attr in user_data %}
                            <li class="list-group-item">
                                <div class="list-group-item__heading" role="tab" id="heading-{{ attr.id }}">
                                    <a role="button" data-toggle="collapse" data-parent="#data-type-accordion" href="#collapse-{{ attr.id }}"
                                       aria-expanded="false" aria-controls="collapse-{{ attr.id }}">
                                        <i class="fa fa-caret-right"></i><i class="fa fa-caret-down" style="display:none;"></i> {% if attr.displ_name %}{{ attr.displ_name }}{% elif attr.name %}{{ attr.name }}{% else %}{{ attr.id }}{% endif %}
                                    </a>
                                </div>
                                <div id="collapse-{{ attr.id }}" class="list-group-item__body collapse cohort-feature-select-block" role="tabpanel"
                                     aria-labelledby="heading-{{ attr.id }}" data-feature-name="{{ attr.name }}" data-feature-id="{{ attr.id }}"
                                     data-feature-displ-name="{% if attr.displ_name %}{{ attr.displ_name }}{% elif attr.name %}{{ attr.name }}{% else %}{{ attr.id }}{% endif %}"
                                     data-feature-type="user-data">
                                    <ul class="search-checkbox-list" id="{{ attr.id }}">
                                        {% for v in attr.values %}
                                            <li class="checkbox">
                                                <label>
                                                    <input type="checkbox" name="elements-selected" data-value-name="{{ v.name }}"
                                                           data-value-id="{% if v.id %}{{ v.id }}{% elif v.name %}{{ v.name }}{% else %}{{ v.value }}{% endif %}"
                                                           data-value-displ-name="{% if v.display_name %}{{ v.displ_name }}{% elif v.name %}{{ v.name }}{% else %}{{ v.id }}{% endif %}">
                                                    {% if v.display_name %}{{ v.displ_name }}{% elif v.name %}{{ v.name }}{% else %}{{ v.id }}{% endif %} <span class="count">({{ v.count }})</span>
                                                </label>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
                <!-- user data features filters tab -->
                <div role="tabpanel" class="tab-pane" id="ud-feature-filters">
                    <ul class="list-group" id="data-type-accordion" role="tablist" aria-multiselectable="true">
                        <li class="list-group-item">
                            <div id="user-data-filter-alert" class="alert alert-warning alert-dismissable">
                                <button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                                If a feature is not present across all active user-uploaded studies, it will not be available here for filtering.
                            </div>
                        </li>
                        {% for attr in user_data.features %}
                            <li class="list-group-item">
                                <div class="list-group-item__heading" role="tab" id="heading-{{ attr.id }}">
                                    <a role="button" data-toggle="collapse" data-parent="#data-type-accordion" href="#collapse-{{ attr.id }}"
                                       aria-expanded="false" aria-controls="collapse-{{ attr.id }}">
                                        <i class="fa fa-caret-right"></i><i class="fa fa-caret-down" style="display:none;"></i> {% if attr.displ_name %}{{ attr.displ_name }}{% elif attr.name %}{{ attr.name }}{% else %}{{ attr.id }}{% endif %}
                                    </a>
                                </div>
                                <div id="collapse-{{ attr.id }}" class="list-group-item__body collapse cohort-feature-select-block" role="tabpanel"
                                     aria-labelledby="heading-{{ attr.id }}" data-feature-name="{{ attr.name }}" data-feature-id="{{ attr.id }}"
                                     data-feature-displ-name="{% if attr.displ_name %}{{ attr.displ_name }}{% elif attr.name %}{{ attr.name }}{% else %}{{ attr.id }}{% endif %}"
                                     data-feature-type="user-data">
                                    <ul class="search-checkbox-list" id="{{ attr.id }}">
                                        {% for v in attr.values %}
                                            <li class="checkbox">
                                                <label>
                                                    <input type="checkbox" name="elements-selected" data-value-name="{{ v.name }}"
                                                           data-value-id="{% if v.id %}{{ v.id }}{% elif v.name %}{{ v.name }}{% else %}{{ v.value }}{% endif %}"
                                                           data-value-displ-name="{% if v.display_name %}{{ v.displ_name }}{% elif v.name %}{{ v.name }}{% else %}{{ v.id }}{% endif %}">
                                                    {% if v.display_name %}{{ v.displ_name }}{% elif v.name %}{{ v.name }}{% else %}{{ v.id }}{% endif %} <span class="count">({{ v.count }})</span>
                                                </label>
                                            </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </li>
                        {% endfor %}
                    </ul>
                </div>
            </div>
        </div>
    </div>
    <div class="{% if cohort.id %}col-md-12{% else %}col-lg-8{% endif %} data-tab-content-panel">
        <div class="selected-filters user-data-selected-filters panel panel-default" {% if cohort.id %}style="display: none;"{% endif %}>
            <div class="panel-heading clearfix">
                <h4 class="panel-title pull-left">{% if cohort.id %}New Filters{% else %}Selected Filters{% endif %}</h4>
                <a class="pull-right clear-filters" role="button" id="user-data-clear-filters">Clear All</a>
            </div>
            <div class="panel-body">

            </div>
        </div>
        {% if cohort.id %}
            <div class="cohort-selected-filters panel panel-default">
                <div class="panel-heading">
                    <h4 class="panel-title">Current Filters</h4>
                </div>
                <div class="panel-body">
                    {% for filter in cohort.get_current_filters %}
                        <span class="filter-label label label-default space-right-5">{{ filter.name|get_feat_displ_name }}: {{ filter.value|get_readable_name:filter.name }}</span>
                    {% empty %}
                        <p>No filters have been applied to this cohort.</p>
                    {% endfor %}
                </div>
            </div>
        {% endif %}
        <div class="cohort-info panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">Details</h4>
            </div>
            <div class="panel-body">
                <div class="row col-md-6">
                    <span class="detail-label">Total Number of Samples:</span>
                    <div class="spinner" style="display:none;"><i class="fa fa-spinner fa-spin"></i></div>
                    <span class="total-values" id="user-data-total-samples">{% if user_data %}{{ metadata_counts.user_data_total  }}{% else %}NA{% endif %}</span>
                </div>
                <div class="row col-md-6">
                    <span class="detail-label">Total Number of Participants:</span>
                    <div class="spinner" style="display:none;"><i class="fa fa-spinner fa-spin"></i></div>
                    <span class="total-values" id="user-data-total-participants">{% if user_data %}{{ metadata_counts.user_data_participants  }}{% else %}NA{% endif %}</span>
                </div>
            </div>
        </div>

        <div class="clinical-trees panel panel-default">
            <div class="panel-heading">
                <h4 class="panel-title">Clinical Features</h4>
            </div>
            <div class="panel-body">
                <div class="spinner" style="display:none;"><i class="fa fa-spinner fa-spin"></i></div>
                <div id="user-data-tree-graph-clinical" class="tree-graph-clinical"></div>
            </div>
            <div id="user-data-more-graphs" class="more-graphs"><button class="btn btn-link" role="button">Show More</button></div>
            <div id="user-data-less-graphs" class="less-graphs" style="display: none;"><button class="btn btn-link" role="button">Show Less</button></div>
        </div>
    </div>
</div>