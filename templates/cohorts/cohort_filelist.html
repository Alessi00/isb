{% extends 'base.html' %}
{% load staticfiles %}
{% load custom_tags %}

{% comment %}

   Copyright 2015, Institute for Systems Biology

   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at

       http://www.apache.org/licenses/LICENSE-2.0

   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.

{% endcomment %}

{% block header %}
{% endblock %}

{% block page_name %}cohort-filelist{% endblock %}

{% block page_header %}
    <div class="container">
        <ol class="breadcrumb">
            <li><a href="{% url 'dashboard' %}">Your Dashboard</a></li>
            <li><a href="{% url 'cohort_list' %}">Saved Cohorts</a></li>
            <li><a href="{% url 'cohort_details' cohort.id %}">{{ cohort.name }}</a></li>
        </ol>
        <h3 class="page-header">File Browser: <a href="{% url 'cohort_details' cohort.id %}">{{ cohort.name }}</a></h3>
        <div class="page-action-group">
            <ul>
                <li class="menu-item">
                    <div class="filelist-obtain">
                        <h5>Download</h5>
                        <a id="download-link" href="{{ download_url }}" title="Download file manifest as CSV"><button class="btn btn-info">CSV</button></a> <a id="download-link" href="{{ download_url }}" title="Download file manifest as JSON"><button class="btn btn-info">JSON</button></a>
                    </div>
                </li>
                <li class="menu-item"></li>
                <li class="menu-item">
                    <div class="filelist-obtain">
                        <h5>Export</h5>
                        <a id="download-link" href="" title="Export file manifest to BQ"><button class="btn btn-info">BQ</button></a> <a id="download-link" href="" title="Export file manifest to GCS"><button class="btn btn-info">GCS</button></a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-sm-12 col-md-12 col-lg-12">
            <div class="panel panel-default">
                <ul class="nav nav-tabs nav-tabs-files" role="tablist">
                    <li role="presentation" class="file-browser-tab active"><a href="#all-files" role="tab" data-toggle="tab" title="Browse All Files" data-file-type="all">All Files</a></li>
                    <li role="presentation" class="file-browser-tab"><a href="#camic-files" role="tab" data-toggle="tab" title="Browse caMicroscope Files" data-file-type="camic">caMicroscope</a></li>
                    <li role="presentation" class="file-browser-tab"><a href="#igv-files" role="tab" data-toggle="tab" title="Browse IGV Files" data-file-type="igv">IGV</a></li>
                </ul>
            </div>
        </div>
    </div>


    <script type="text/javascript">
    var cohort_id = {{ cohort.id }};
    var page = 1;
    var total_files = {{ total_files }};
    var download_url = '{{ download_url }}';
    var ajax_update_url = '{% url 'cohort_filelist_ajax' cohort.id %}';
    var SEL_IGV_FILE_MAX = '{{  sel_file_max }}';
    var FILE_LIST_MAX = '{{  file_list_max }}';
    </script>
{% endblock %}

{% block js_file %}{% static 'js/cohort_filelist.js' %}{% endblock %}
